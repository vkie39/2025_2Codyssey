
<!DOCTYPE html>
<html lang="ko" >
<head>
  








<!--  for global var  -->
<script type="text/javascript">
  var application = {"root_url":"https://news.kbs.co.kr","vod_cloud_front_url_block_international":"http://news-restrict.gscdn.kbs.co.kr","imagePath":"","resourcesPath":"/resources","root_domain":"news.kbs.co.kr","news_map_client_id":"udun63q80x","vod_api_url":"https://static.api.kbs.co.kr/play/1.2/sign","vodDefaultImage":"/resource/image/common/noimg_633_355.png","cdn_api_url_root":"https://static.api.kbs.co.kr","img_path_m_big":"https://img.kbs.co.kr/kbs/620/news.kbs.co.kr","cms_root_domain":"newscms.kbs.co.kr","vod_bucket":"newsvod.s3.kbs.co.kr","news_mobile_map_client_id":"vogmbm9h4v","jebo_root_url":"jebo.kbs.co.kr","defaultImage":"/resource/image/common/noimg_633_355.png","contextPath":"","rootDomain":"news.kbs.co.kr","img_path_m_sm":"https://img.kbs.co.kr/kbs/44/news.kbs.co.kr","img_path_m_thum":"https://img.kbs.co.kr/kbs/160/news.kbs.co.kr","resource_root_url":"//news.kbs.co.kr","vod_cloud_front_url":"http://news.play.kbs.co.kr","cms_url":"https://newscms.kbs.co.kr","image_bucket":"news-static-prod-kbs","rootUrlPrefix":"https://news.kbs.co.kr","stat_server_url":"stat.kbs.co.kr","api_server_url":"http://news-product-api.ap-northeast-2.elasticbeanstalk.com/api"};
  var user = { loginOn: false };
  var noHeader = "false";
  var noFlashNews = "false";
  var noFooter = "false";
  var searchCode = "";
  var IMGPATH_MOBILE_THUMB = "https://img.kbs.co.kr/kbs/160/news.kbs.co.kr"; 
  var IMGPATH_MOBILE_BIG = "https://img.kbs.co.kr/kbs/620/news.kbs.co.kr";
  var IMGPATH_MOBILE_REPORTER = "https://img.kbs.co.kr/kbs/44/news.kbs.co.kr";
  var IMGPATH_MOBILE_RECO = "https://img.kbs.co.kr/kbs/160"; 
  //var MEMBER_ID = '';
</script>

  <!-- 변수 선언 start -->
  
  
  
  <!-- main.do def -->
  
  
  
  
  <!-- 변수 선언 end -->

  <script>
    var darkMode = "false";
  if (navigator.cookieEnabled) {
      if (localStorage) {
        if (localStorage.getItem('dark-mode')) {
          darkMode = localStorage.getItem('dark-mode');
        }
      }
    }
    
    var isDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

    if (darkMode) {
      document.documentElement.dataset.dark = darkMode;
    } else {
      document.documentElement.dataset.dark = isDarkMode.toString();
    }
  </script>

  
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />

<link rel="shortcut icon" href="/resource/image/common/v1/favicon/favicon.ico" />
<link rel="shortcut icon" href="/resource/image/common/v1/favicon/favicon.png" />
<link rel="apple-touch-icon" href="/resource/image/common/v1/favorite/favorite.png" />

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-M7J7R5');</script>
<!-- End Google Tag Manager -->

<!-- 안드로이드 홈화면추가시 상단 주소창 제거 -->
<meta name="mobile-web-app-capable" content="yes">
<!-- ios홈화면추가시 상단 주소창 제거 -->
<meta name="apple-mobile-web-app-capable" content="yes">
<!-- additional head area -->

<meta name="title" content="KBS 뉴스" />
<meta name="url" content="https://news.kbs.co.kr/" />
<meta name="description" content="세상을 담다, 오늘을 보다" />
<meta name="keywords" content="KBS, KBS 뉴스, KBS뉴스, 뉴스, KBS NEWS, 최신뉴스, 뉴스속보, 날씨, 오늘의 뉴스, 뉴스9, KBS뉴스9, 9시뉴스, 날씨, KBS 월드컵" />

<!-- 페이스북 / 카카오 스토리 -->
<meta id="facebook_title" property="og:title" content="KBS 뉴스" />
<meta property="og:site_name" content="KBS 뉴스" />
<meta property="og:type" content="article" />
<meta id="facebook_url" property="og:url" content="https://news.kbs.co.kr/"/>
<meta id="facebook_img" property="og:image" content="//news.kbs.co.kr/resource/image/common/img_meta.png"/>
<meta id="facebook_img_secure" property="og:image:secure_url" content="//news.kbs.co.kr/resource/image/common/img_meta.png"/>
<meta id="facebook_desc" property="og:description" content="세상을 담다, 오늘을 보다"/>

<!-- 트위터 -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="KBS 뉴스">
<meta name="twitter:title" content="KBS 뉴스">
<meta name="twitter:creator" content="KBS 뉴스">
<meta name="twitter:image" content="//news.kbs.co.kr/resource/image/common/img_meta.png">
<meta name="twitter:description" content="세상을 담다, 오늘을 보다">

<!-- Google -->
<meta itemprop="name" content="KBS 뉴스">
<meta itemprop="description" content="세상을 담다, 오늘을 보다">
<meta itemprop="image" content="//news.kbs.co.kr/resource/image/common/img_meta.png">

<link rel="manifest" href="/resource/manifest/manifest.json">
<link rel="canonical" href="" />
<!-- #ifb alternateUrl <link rel="alternate" href="" /> /ifb -->

<title>KBS 뉴스</title>

<!-- script -->
<script type="text/javascript" src="/resource/module/jquery-3.7.1/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="/resource/module/dayjs-1.11.10/dayjs.min.js"></script>
<script type="text/javascript" src="/resource/module/dayjs-1.11.10/plugin/duration.js"></script>
<script type="text/javascript" src="/resource/module/dayjs-1.11.10/locale/ko.js"></script>
<script>
  dayjs.extend(window.dayjs_plugin_duration);
  dayjs.locale(dayjsLocaleKo, null, true);
</script>
<script type="text/javascript" src="/resource/module/swiper-11.0.5/swiper-bundle.min.js"></script>
<script type="text/javascript" src="/resource/module/jquery-ui-1.13.2/jquery-ui.min.js"></script>
<script type="text/javascript" src="/resource/module/jquery-monthpicker/jquery.ui.monthpicker.js"></script>
<link rel="stylesheet" href="/resource/module/jquery-ui-1.13.2/jquery-ui.css">

<script defer src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>





<!-- css -->
<link rel="stylesheet" type="text/css" href="/resource/css/pc/common/swiper-bundle.min.css">
<link rel="stylesheet" type="text/css" href="/resource/css/pc/style.css">

  <script src="/js/common/common.js?v=20250922094454"></script>
  <script>
    /*******************************************************
     * 공통함수 영역 [s]
     *******************************************************/
    // 브라우저에서 Notification 지원 여부 확인
var isNotificationSupported = 'Notification' in window;
if (isNotificationSupported) {
	// Notification 권한 요청
	try {
		Notification.requestPermission().then(function (result) {
			if (result === 'granted') {
				console.log('[Notification] 허용: ', result);
			} else {
				console.log('[Notification] 차단: ', result);
			}
		});
	} catch (error) {
		console.log(error);
	}
} else {
	// console.log("Not Supported");
}

// 사용자가 푸시 알림을 클릭했을 때의 이벤트 리스너
function onClickNotification(event) {
	console.log('[푸시알림 클릭]');
	event.currentTarget.close();
	var url = event.currentTarget.data.url;
	if (!url) {
		url = "https://news.kbs.co.kr/news/breaking.do";
	}
	window.open(url);
}

function sendNotification(obj) {
	// 푸시 알림 정보 조회
	var title = "알림";
	if (obj.type == "B") {
		title = "속보"
	}

	var icon = icon || '/resource/image/common/kbsnews_logo.png'; // 아이콘 이미지
	var badge = badge || '/resource/image/common/kbsnews_logo.png'; // 배지 이미지
	var options = {
		body: obj.flashEditContents,
		icon: icon,
		badge: badge,
		data: {
			url: obj.url
		}
	};

	// 푸시 알림 출력
	if (window.Notification && Notification.permission === "granted") {
		Notification.requestPermission().then(function(result) {
			if (result === "granted") {
				navigator.serviceWorker.ready.then(function(registration) {		
					registration.showNotification(title, options);
					registration.addEventListener("click", function(event) {
						onClickNotification(event);
					});
				});
			}
		});

	}
}

function checkNotification(data) {
	var flashNewsNotifiedCodeList = {};
	try {
		flashNewsNotifiedCodeList = JSON.parse(localStorage.getItem("flashNewsNotifiedCodeList"));
	}
	catch (e) { }
	if (flashNewsNotifiedCodeList == null) {
		flashNewsNotifiedCodeList = {};
	}
	var now = dayjs();

	if (data == null) {
		data = [];
	}

	for (var a = 0; a < data.length; a++) {
		var obj = data[a];

		if (flashNewsNotifiedCodeList[obj.flashEditCode])
			continue;

		var startDate = dayjs(obj.regDate + "+0900", 'YYYY-MM-DD HH:mm:ssZZ');
		var endDate = dayjs(obj.endDate + "+0900", 'YYYY-MM-DD HH:mm:ssZZ');

		if (now.isBefore(endDate) && now.isAfter(startDate)) {
			flashNewsNotifiedCodeList[obj.flashEditCode] = true;

			sendNotification(obj);
		}
	}
	try {
		localStorage.setItem("flashNewsNotifiedCodeList", JSON.stringify(flashNewsNotifiedCodeList));
	} catch (e) { }
}
    var headerUi = {};
var headerStickyTriggerPoint;

window.addEventListener('load', function () {
  headerUi.worldSelect();
  headerUi.navMenuClick();
  headerUi.navFixed();
  headerUi.searchClick();
  headerUi.dimClick();
  headerUi.disasterClick();
});

// 속보 롤링 클릭 event
headerUi.breakingNewsClick = function breakingNewsClick(swiper) {
  headerStickyTriggerPoint = $('.header-nav-wrapper').offset().top;

  var $btn = document.querySelector('.breaking-news.rolling .arrow-btn');
  var $history = document.querySelector('.breaking-news-history-wrapper');
  if ($btn) {
    $btn.addEventListener('click', function () {
      $btn.classList.toggle('on');
      $history.classList.toggle('on');
      headerStickyTriggerPoint = $('.header-nav-wrapper').offset().top;
      footerUi.setAsidePos();
    });
  }
};

// 수직 롤링 함수
headerUi.verticalRollingFn = function verticalRollingFn(swiper) {
  var retrunValue = new Swiper(swiper, {
    direction: 'vertical',
    loop: true,
    loopAdditionalSlides: 1,
    autoplay: {
      delay: 5000,
      disableOnInteraction: false,
    },
  });
  return retrunValue;
};

// 날씨 롤링 event
headerUi.weatherRolling = function weatherRolling() {
  headerUi.verticalRollingFn('.weather');
};

// 재난 알림 롤링 event
var disasterSwiper;
headerUi.disasterRolling = function disasterRolling() {
  disasterSwiper = headerUi.verticalRollingFn('.disaster-rolling-swiper');
};

// 속보 롤링 event
headerUi.breakingNewsRolling = function breakingNewsRolling() {
  var returnSwiper = headerUi.verticalRollingFn('.breaking-news-swiper');
  return returnSwiper;
};
// 재난 알림 펼침 클릭 event
headerUi.disasterClick = function disasterClick() {
  $('.disaster-rolling .arrow-btn')
    .off('click')
    .on('click', function () {
      if ($(this).hasClass('on')) {
        headerUi.disasterRolling();
        $('.disaster-rolling .disaster-rolling-swiper').scrollTop(0);
        $('.disaster-rolling').removeClass('open');
        $(this).removeClass('on');
        $('.rolling-message').each(function (index, el) {
          $(el).removeClass('open');
        });
        $('.rolling-message .caution').each(function (index, el) {
          $(el).removeClass('off');
        });
      } else {
        disasterSwiper.destroy();
        $('.disaster-rolling .disaster-rolling-swiper').scrollTop(0);
        $('.disaster-rolling-list').removeAttr('style');
        $('.disaster-rolling').addClass('open');
        $(this).addClass('on');
        $('.rolling-message').each(function (index, el) {
          $(el).addClass('open');
        });
        $('.rolling-message .caution').each(function (index, el) {
          $(el).addClass('off');
        });
        if ($('.disaster-rolling .swiper-wrapper').height() > 414) {
          $('.disaster-rolling-swiper').addClass('overflow-y');
        }
      }
      footerUi.setAsidePos();
    });
};

// KBS WORLD 클릭 event
headerUi.worldSelect = function worldSelect() {
  var $menu = document.querySelector('#header .foreign-site-links');
  var $btn = document.querySelector('#header .kbs-world-select-btn');
  var $dim = document.querySelector('.dim');
  if ($btn) {
    $btn.addEventListener('click', function () {
      $btn.classList.toggle('on');
      $menu.classList.toggle('on');
      $dim.classList.toggle('transparent');
      $dim.classList.toggle('on');
    });
  }
};

// 햄버거 버튼 클릭 event
headerUi.hamburgerClick = function hamburgerClick() {
  var $btn = document.querySelector('.hamburger-btn');
  var $navMenu = document.querySelector('.header-nav');
  var $fullMenu = document.querySelector('.full-menu-wrapper');
  var $navLinks = document.querySelectorAll('.nav-link');
  var $commonMenues = document.querySelectorAll('.common-menu');

  var $dim = document.querySelector('.dim');
  var $body = document.querySelector('body');
  if ($btn) {
    $btn.addEventListener('click', function () {
      if ($btn.classList.contains('on')) {
        $btn.classList.remove('on');
        $navMenu.classList.remove('on');
        $fullMenu.classList.remove('on');
        $dim.classList.remove('on');
        $body.classList.remove('hidden');
        $navLinks.forEach(function ($navLink) {
          $navLink.classList.remove('on');
        });
        $commonMenues.forEach(function ($commonMenu) {
          $commonMenu.classList.remove('on');
        });
      } else if (!$btn.classList.contains('on')) {
        $btn.classList.add('on');
        $navMenu.classList.add('on');
        $fullMenu.classList.add('on');
        $dim.classList.add('on');
        $body.classList.add('hidden');
        $body.classList.add('on');
      }
    });
  }
};

// 네비게이션 메뉴 클릭 event
headerUi.navMenuClick = function navMenuClick() {
  var menuNames = ['분야별', 'TV 뉴스', '심층취재', '시사프로그램', '지역뉴스'];
  var $navLinks = document.querySelectorAll('.nav-link');
  var $fullMenu = document.querySelector('.full-menu-wrapper');
  var $dim = document.querySelector('.dim');
  var $fullMenuNames = document.querySelectorAll('#header .full-menu-wrapper h3');
  var $hamburgerBtn = document.querySelector('.hamburger-btn');
  var $onNavLink = void 0;
  var $body = document.querySelector('body');
  $navLinks.forEach(function ($navLink) {
    if ($navLink) {
      $navLink.addEventListener('click', function () {
        var menuName = $navLink.innerText;
        if (menuNames.includes(menuName)) {
          if ($onNavLink) {
            $onNavLink.classList.remove('on');
          }
          if (!$hamburgerBtn.classList.contains('on')) {
            $hamburgerBtn.classList.add('on');
          }
          $navLink.classList.add('on');
          $onNavLink = $navLink;
          $fullMenuNames.forEach(function ($fullMenuName) {
            var fullMenuName = $fullMenuName.innerText;
            var $commonMenu = $fullMenuName.parentElement.parentElement;
            $commonMenu.classList.remove('on');
            if (fullMenuName === menuName) {
              $commonMenu.classList.add('on');
            }
          });

          if (!$fullMenu.classList.contains('on')) {
            $fullMenu.classList.add('on');
            $dim.classList.add('on');
            $body.classList.add('hidden');
          }
        }
      });
    }
  });
};

// 서치 버튼 클릭 event
headerUi.searchClick = function searchClick() {
  var $btn = document.querySelector('.hamburger-search-btns .search-btn');
  var $closeBtn = document.querySelector('.search .close-btn');
  var $hamburgerBtn = document.querySelector('.hamburger-btn');
  var $fullMenu = document.querySelector('.full-menu-wrapper');
  var $navLinks = document.querySelectorAll('.nav-link');
  var $commonMenues = document.querySelectorAll('.full-menu .common-menu');
  var $searchMenu = document.querySelector('.search-most-view');
  var $dim = document.querySelector('.dim');
  var $body = document.querySelector('body');
  if ($btn) {
    $btn.addEventListener('click', function () {
      if ($fullMenu.classList.contains('on')) {
        $fullMenu.classList.remove('on');
      }
      if ($hamburgerBtn.classList.contains('on')) {
        $hamburgerBtn.classList.remove('on');
      }
      $navLinks.forEach(function ($navLink) {
        $navLink.classList.remove('on');
      });
      $commonMenues.forEach(function ($commonMenu) {
        $commonMenu.classList.remove('on');
      });
      $searchMenu.classList.add('on');
      $dim.classList.add('on');
      $body.classList.add('hidden');
      $body.classList.add('on');
    });
  }
  if ($closeBtn) {
    $closeBtn.addEventListener('click', function () {
      $searchMenu.classList.remove('on');
      $dim.classList.remove('on');
      $body.classList.remove('hidden');
    });
  }
};

/**
 * 스크롤 시 헤더 고정 포인트값 계산
 */
headerUi.setHeaderStickyTriggerPoint = function setHeaderStickyTriggerPoint() {
  const $headerTopMenu = $('.header-nav-wrapper');
  headerStickyTriggerPoint = $headerTopMenu.offset().top;
};

// 스크롤시 네비게이션 메뉴 고정 event
headerUi.navFixed = function navFixed() {
  var menuBar = $('.header-nav-wrapper');
  var navLogo = $('.nav-menu .nav-logo');
  var menuBarHeight = menuBar.outerHeight();
  var $contents = $('#contents');

  this.setHeaderStickyTriggerPoint();

  $(window).on('scroll', function () {
    if ($(window).scrollTop() > headerStickyTriggerPoint) {
      menuBar.addClass('fixed');
      navLogo.addClass('on');
      $contents.css('padding-top', `${menuBarHeight}px`);
    } else {
      menuBar.removeClass('fixed');
      navLogo.removeClass('on');
      $contents.removeAttr('style');
    }
  });
};

// 딤 화면 클릭 event
headerUi.dimClick = function dimClick() {
  var $dim = document.querySelector('.dim');
  var $searchMenu = document.querySelector('.search-most-view');
  var $nav = document.querySelector('.header-nav');
  var $hamburgerBtn = document.querySelector('.hamburger-btn');
  var $fullMenu = document.querySelector('.full-menu-wrapper');
  var $navLinks = document.querySelectorAll('.nav-link');
  var $commonMenues = document.querySelectorAll('.common-menu');
  var $body = document.querySelector('body');
  if ($dim) {
    $dim.addEventListener('click', function () {
      $dim.classList.remove('on');
      $searchMenu.classList.remove('on');
      $nav.classList.remove('on');
      $hamburgerBtn.classList.remove('on');
      $fullMenu.classList.remove('on');
      $body.classList.remove('hidden');
      $navLinks.forEach(function ($navLink) {
        $navLink.classList.remove('on');
      });
      $commonMenues.forEach(function ($commonMenu) {
        $commonMenu.classList.remove('on');
      });
    });
  }
};

    var commonUi = {};

window.addEventListener("load", function () {
    commonUi.setAllmenuRef();
    
    commonUi.tabClick();
    setTimeout(function () {
        commonUi.tabClick();
    }, 1000);

    commonUi.localQuickMenu();
    commonUi.playlistPopup();
    commonUi.programIntroPopup();

    commonUi.centerSlide();
    // commonUi.yearSlide();
    commonUi.onairSchedule();
    commonUi.commonToggle();
    commonUi.issueTimeLine();
    // commonUi.recommendSearch();
    commonUi.detailSearchClick();
    // commonUi.commonBtnClick();
    // commonUi.allCheckClick();
});

// Allmenu ref 세팅: #header를 기준으로 마크업 하고 #footer 에서는 JS로 바꿔준다.
// #header : ref=pSiteMap
// #footer : ref=pFooter
commonUi.setAllmenuRef = function() {
    $("#footer .full-menu a").each( (idx, el) => {
        const href = $(el).attr("href").replaceAll(/ref=pSiteMap/gi, "ref=pFooter");
        $(el).attr("href", href);
    } );
}

// 탭 클릭
commonUi.tabClick = function tabClick() {
    const $tabBtns = $(".tab-btns .tab-btn");
    
    $tabBtns.off("click").on("click", function () {
        const id = $(this).parents(".tab-btns").data("tab-contents");
        const index = $(this).parents(".tab-btns-list").index();

        commonUi.setActiveTab(id, index);
    });
};

// 탭 활성화 세팅
commonUi.setActiveTab = function(id, index) {
    const $tabs = $(`.tab-btns[data-tab-contents="${id}"]`);
  
    $tabs.find(".tab-btns-list").removeClass("on");
    $tabs.find(".tab-btns-list").eq(index).addClass("on");

    $tabs.find(".tab-btns-list").find(".tab-btn").attr("aria-selected", false);
    $tabs.find(".tab-btns-list").eq(index).find(".tab-btn").attr("aria-selected", true);
    
    // only class가 없을 때만 tabPanels 활성화
    const $panels = $(`#${id}`);
    const isOnlyTabPanel = $panels.find(".only").length;
    if (!isOnlyTabPanel) {
        $panels.find(".tab-contents-list").removeClass("on");
        $panels.find(".tab-contents-list").eq(index).addClass("on");
    }
}

// 전체선택 체크박스 클릭
commonUi.allSelectClick = function () {
    var $allSelect = document.querySelector(".all-select input");
    $allSelect.checked = false;
    var $allBoxContents = document.querySelectorAll(".box-contents .box-content .common-checkbox input");
    var $checkboxes = [];

    $allBoxContents.forEach(function(input) {
        if (getComputedStyle(input.closest('.box-content')).display !== "none") {
            $checkboxes.push(input);
        }
    });
    $checkboxes.forEach(function ($checkbox) {
        $checkbox.checked = false;
    });
    if ($allSelect) {
        $allSelect.addEventListener("click", function () {
            if ($allSelect.checked) {
                $checkboxes.forEach(function ($checkbox) {
                    $checkbox.checked = true;
                });
            } else {
                $checkboxes.forEach(function ($checkbox) {
                    $checkbox.checked = false;
                });
            }
        });
    }
};

// 지역 뉴스 바로가기 클릭
commonUi.localQuickMenu = function () {
    var $button = document.querySelector(".local-news-quick-menu-button");
    var $quickMenu = document.querySelector(".local-news-quick-menu .quick-menu");
    var $closeButton = document.querySelector(".local-news-quick-menu .close-button");

    if ($button) {
        var handleClickOnce = function(event) {
            if (!$button.contains(event.target)) {
                $button.classList.remove("on");
                $quickMenu.classList.remove("on");
                document.removeEventListener("click", handleClickOnce);
            }
        }

        $button.addEventListener("click", function () {
            if ($button.classList.contains("on")) {
                $button.classList.remove("on");
                $quickMenu.classList.remove("on");
                document.removeEventListener("click", handleClickOnce);
            } else {
                $button.classList.add("on");
                $quickMenu.classList.add("on");
                document.addEventListener("click", handleClickOnce);
            }
        });

        $closeButton.addEventListener("click", function () {
            $button.classList.remove("on");
            $quickMenu.classList.remove("on");
            document.removeEventListener("click", handleClickOnce);
        });
    }
};

// 선택재생 버튼 클릭
commonUi.selectPlayClick = function () {
    var $wrapper = document.querySelector(".play-buttons-wrapper");
    var $selectPlayBtn = document.querySelector(".play-buttons-wrapper .select-play-button");
    var $selectCancelPlayBtn = document.querySelector(".play-buttons-wrapper .select-cancel-button");
    var $allSelect = document.querySelector(".all-select.common-checkbox");
    var $checkboxes = document.querySelectorAll(".thumbnail .common-checkbox");

    if ($selectCancelPlayBtn) {
        $wrapper.classList.remove("on");
        $allSelect.classList.remove("on");
        $checkboxes.forEach(function ($checkbox) {
            $checkbox.classList.remove("on");
        });
    }

    if ($selectPlayBtn) {
        $selectPlayBtn.addEventListener("click", function () {
            $wrapper.classList.add("on");
            $allSelect.classList.add("on");
            $checkboxes.forEach(function ($checkbox) {
                $checkbox.classList.add("on");

                var $parentAnchor = $checkbox.closest("a");
                if ($parentAnchor) {
                    $parentAnchor.setAttribute("onclick", "javascript:checkBox(this)");
                    $parentAnchor.setAttribute("blockhref", $parentAnchor.getAttribute("href"));
                    $parentAnchor.removeAttribute("href");
                }
            });
        });
    }
    if ($selectCancelPlayBtn) {
        $selectCancelPlayBtn.addEventListener("click", function () {
            $wrapper.classList.remove("on");
            $allSelect.classList.remove("on");
            $checkboxes.forEach(function ($checkbox) {
                $checkbox.classList.remove("on");
                var $parentAnchor = $checkbox.closest("a");
                if ($parentAnchor) {
                    $parentAnchor.removeAttribute("onclick");
                    $parentAnchor.setAttribute("href", $parentAnchor.getAttribute("blockhref"));
                    $parentAnchor.removeAttribute("blockhref");
                }
            });
        });
    }
};

function checkBox(_this) {
	var checkBox = $(_this).find('.common-checkbox input');
	if (checkBox) {
		if (checkBox.is(':checked')) {
			checkBox.prop("checked", false);
		} else {
			checkBox.prop("checked", true);
		}
	}
}

// 플레이리스트 팝업 클릭
commonUi.playlistPopup = function () {
    var $headerNav = document.querySelector("#header .header-nav-wrapper");
    var $dim = document.querySelector(".dim");
    var $popup = document.querySelector(".playlist-popup");
    var $body = document.querySelector("body");
    if ($dim) {
        $dim.addEventListener("click", function () {
            $headerNav.classList.remove("index-change");
            $dim.classList.remove("on");
            if ($popup) {
                $popup.classList.remove("on");
            }
            $body.classList.remove("hidden");
        });
    }
};

// 프로그램 소개 팝업 관련 이벤트
commonUi.programIntroPopup = function () {
    var $popupOpenButton = $(".common-title-banner .program-introduction-button");
    var $popupCloseButton = $(".program-introduction-popup .btn-close");
    var $dim = $(".dim");

    var $popup = $(".program-introduction-popup");
    var $headerNav =$("#header .header-nav-wrapper");
    var $body = $("body");

    // popup open
    $popupOpenButton.off("click").on("click", function () {
        $headerNav.addClass("index-change");
        $dim.addClass("on");
        if ($popup) {
            $popup.addClass("on");
            $popup.find(".modal-body").scrollTop(0);
        }
        $body.addClass("hidden");
    });

    // popup close
    function closePopup() {
        $headerNav.removeClass("index-change");
        $dim.removeClass("on");
        $popup.removeClass("on");
        $body.removeClass("hidden");
    }
    $popupCloseButton.off("click").on("click", closePopup);
    $dim.off("click").on("click", closePopup);
};

// 슬라이드 함수
commonUi.slideFn = function slideFn(view, slide, pagination, nextBtn, prevBtn) {
    var retrunValue = new Swiper(slide, {
        slidesPerView: view,
        spaceBetween: 0,
        slidesPerGroup: view,
        loopFillGroupWithBlank: true,
        loop: true,
        pagination: {
            el: pagination,
            type: "fraction"
        },
        navigation: {
            nextEl: nextBtn,
            prevEl: prevBtn
        }
    });
    return retrunValue;
};

// 내비게이션 없는 슬라이드 함수
commonUi.noNaviSlideFn = function noNaviSlideFn(view, slide, pagination) {
    var retrunValue = new Swiper(slide, {
        slidesPerView: view,
        spaceBetween: 0,
        slidesPerGroup: view,
        loopFillGroupWithBlank: true,
        loop: true,
        pagination: {
            el: pagination,
            type: "fraction"
        }
    });
    var $pagination = document.querySelector("".concat(pagination));
    $pagination.parentElement.classList.add("off");
    return retrunValue;
};

// 탭스와이퍼 슬라이드
commonUi.tabSwiper = function () {
    if ($(".tab-swiper-pagination")) {
        if ($(".tab-swiper-pagination .swiper-slide").length > 1) {
            var tabSwiper = commonUi.slideFn(1, ".tab-swiper-pagination .swiper", ".tab-swiper-pagination .pagination", ".tab-swiper-pagination .next", ".tab-swiper-pagination .previous");
        } else if ($(".news-9-slide .swiper-slide").length <= 4) {
            var tabSwiper = commonUi.noNaviSlideFn(1, ".tab-swiper-pagination .swiper", ".tab-swiper-pagination .pagination");
        }
    }
};

// 탭스와이퍼 슬라이드 클릭
commonUi.tabSwiperClick = function () {
    var $tabMenues = document.querySelectorAll(".tab-swiper-pagination .tab-menu");
    var $contentsWrapper = document.querySelector(".tab-swiper-contents-wrapper");
    if ($tabMenues) {
        $tabMenues.forEach(function ($tabMenu) {
            $tabMenu.addEventListener("click", function () {
                if (!$tabMenu.classList.contains("on")) {
                    var $onTabMenu = document.querySelector(".tab-swiper-pagination .tab-menu.on");
                    $onTabMenu.classList.remove("on");
                    $onTabMenu = $tabMenu;
                    $onTabMenu.classList.add("on");
                    var $parentLi = $onTabMenu.parentElement;
                    var $grandUl = $parentLi.parentElement;
                    var btnOrder = Array.from($parentLi.children).indexOf($onTabMenu);
                    var parentOrder = Array.from($grandUl.children).indexOf($parentLi) - 1;
                    var $onContent = document.querySelector(".tab-swiper-content.on");
                    $onContent.classList.remove("on");
                    $onContent = $contentsWrapper.children[parentOrder].children[btnOrder];
                    $onContent.classList.add("on");
                }
            });
        });
    }
};

commonUi.centerSlide = function () {
    if ($(".sub-page-center-slide").length) {
        $(document).ready(function () {
            $(".sub-page-center-slide").owlCarousel({
                center: true,
                items: 3,
                loop: true,
                nav: true,
                autoWidth: true,
                margin: 24
            });
        });
    }
};

commonUi.yearSlide = function () {
    if ($(".sub-page-year-slide").length) {
        $(document).ready(function () {
            $(".sub-page-year-slide").owlCarousel({
                items: 11,
                loop: false,
                nav: true,
                autoWidth: true,
                draggable: false
            });
        });
    }
};

commonUi.onairSchedule = function () {
    $(".title-schedule-box .schedule").click(function () {
        $(".player-schedule").toggleClass("on");
        $(".title-schedule-box .arrow-icon").toggleClass("on");
    });
    $(".onair-player-window .close").click(function () {
        window.close();
    });
};

commonUi.commonToggle = function () {
    var $toggleBtn = document.querySelector(".common-toggle-button");
    if ($toggleBtn) {
        $toggleBtn.addEventListener("click", function () {
            $toggleBtn.classList.toggle("on");
        });
    }
};

commonUi.issueTimeLine = function () {
    var $ul = document.querySelector(".field-timeline");
    var $lists = document.querySelectorAll(".field-timeline .timeline-list");
    var $lastTimeBadge = document.querySelector(".time-badge-wrapper.last");
    var pos = 0;
    var height;
    if ($ul) {
        height = $ul.getBoundingClientRect().height;
    }
    if ($lists && $lastTimeBadge) {
        $lists.forEach(function ($list) {
            $list.style.top = "".concat(pos, "px");
            pos -= 80;
        });
        $lastTimeBadge.style.top = "".concat(pos + 80, "px");
        $ul.style.height = "".concat(height + pos + 80, "px");
    }
};

// 검색결과 추천검색어
// commonUi.recommendSearch = function () {
//     var $body = document.querySelector("body");
//     var $input = document.querySelector(".main-search-area .search-box-input");
//     var $recommendSearch = document.querySelector(".main-search-area .recommend-search");
//     if ($input) {
//         $input.addEventListener("input", function () {
//             $recommendSearch.classList.add("on");
//         });
//         $body.addEventListener("click", function (e) {
//             if (e.target !== $input) {
//                 $recommendSearch.classList.remove("on");
//             }
//         });
//     }
// };

// 검색결과 상세검색 클릭
commonUi.detailSearchClick = function () {
    var $mainSearch = document.querySelector(".main-search-area");
    var $detailSearch = document.querySelector(".detail-search-area");
    var $button = document.querySelector(".detail-search-button");
    if ($button) {
        $button.addEventListener("click", function () {
            $mainSearch.classList.toggle("on");
            $detailSearch.classList.toggle("on");
        });
    }
};

// 검색결과 상세검색 공통버튼 클릭
commonUi.commonBtnClick = function () {
    var $btns = document.querySelectorAll(".detail-search-area .common-button");
    $btns.forEach(function ($btn) {
        if ($btn) {
            $btn.addEventListener("click", function () {
                if (!$btn.classList.contains("on")) {
                    var $wrapper = $btn.parentElement;
                    var $onBtn = $wrapper.querySelector(".common-button.on");
                    $onBtn.classList.remove("on");
                    $btn.classList.add("on");
                }
            });
        }
    });
};

// 검색결과 체크박스 전체 클릭
commonUi.allCheckClick = function () {
    var $checkboxsInputs = document.querySelectorAll(".detail-search-area .classification .custom-blue-checkbox input");
    var $allCheckInput = document.querySelector(".detail-search-area .classification input");
    if ($allCheckInput) {
        $allCheckInput.addEventListener("click", function () {
            if ($allCheckInput.checked === true) {
                $checkboxsInputs.forEach(function ($input) {
                    $input.checked = true;
                });
            } else if ($allCheckInput.checked === false) {
                $checkboxsInputs.forEach(function ($input) {
                    $input.checked = false;
                });
            }
        });
        $checkboxsInputs.forEach(function ($input) {
            if ($input !== $allCheckInput) {
                $input.addEventListener("click", function () {
                    if ($allCheckInput.checked === true) {
                        $allCheckInput.checked = false;
                    }
                });
            }
        });
    }
};

// 폰트사이즈 변경 엘리먼트
commonUi.getFontSizeChangeElement = () => $("body *").not(`.player-app, .player-app *, #header, #header *, #footer, #footer *, .aisde, .aside *, .header-live-wrapper, .header-live-wrapper *, br, script, noscript, style, link, hr, iframe, img, main, form, .box, .box-contents, .field-tab-wrapper, .field-tab, .dim, .thumbnail, .photo, .play-icon, .image-box, #ui-datepicker-div, input[type='checkbox'], input[type='radio'], [fontsize-unchanged], [fontsize-unchanged] *`);
// [250509] [fontsize-unchanged] 폰트사이즈 변경 제외 속성 추가


// 오리지널 폰트사이즈를 저장
commonUi.setOriginalFontSize = () => {
    const $el = commonUi.getFontSizeChangeElement();
    $el.each((i, el)=>{
        const fontSize = $(el).css('font-size').replaceAll('px', '');
        $(el).attr('data-fs', fontSize);
    });
}

// 폰트사이즈 변경
commonUi.updateChangeFontsize = function(changeSize) {
    const $txtIcon = document.querySelector(".aside-btns-list .txt-btn .txt-icon");
    const $btnTxt = document.querySelector(".aside-btns-list .txt-btn .common-btn-txt");
    const $menu = document.querySelector(".aside-btns-list .txt-menu");

    const arr = commonUi.getFontSizeChangeElement();
    const buttonText = { large: '확대', small: '축소', normal: '기본' };

    if (changeSize == 'large') {
        [...arr].forEach( el => {
            let fontSize = $(el).data('fs') * 1 + 1;
            if (!fontSize) {
                const fs = $(el).css('font-size').replaceAll('px', '');
                $(el).attr('data-fs', fs);
                fontSize = $(el).data('fs') * 1 + 1;
            }
            $(el).css("font-size", `${fontSize}px`);
        });

    } else if (changeSize == 'small') {
        [...arr].forEach( el => {
            let fontSize = $(el).data('fs') * 1 - 1;
            if (!fontSize) {
                const fs = $(el).css('font-size').replaceAll('px', '');
                $(el).attr('data-fs', fs);
                fontSize = $(el).data('fs') * 1 - 1;
            }
            $(el).css("font-size", `${fontSize}px`);
        })

    } else {
        [...arr].forEach( el => {
            $(el).css("font-size", '');
        });
    }

    $menu.classList.remove("on");
    $txtIcon.className = `txt-icon ${changeSize}`;
    $btnTxt.innerText = buttonText[changeSize];
    localStorage.setItem("text-size", changeSize);
}
    ui = {};

var isBreakingNewsLoaded = false;
var isLiveNewsLoaded = false;
var isHeaderDisasterLoaded = false;
var isHeaderNoticeLoaded = false;


window.addEventListener("load", function () {
    ui.tooltipClick();
    ui.liveClick();
});

// 슬라이드 함수
ui.slideFn = function slideFn(view, slide, pagination, nextBtn, prevBtn) {
    var retrunValue = new Swiper(slide, {
        slidesPerView: view,
        spaceBetween: 24,
        slidesPerGroup: view,
        loopFillGroupWithBlank: true,
        loop: true,
        pagination: {
            el: pagination,
            type: "fraction"
        },
        navigation: {
            nextEl: nextBtn,
            prevEl: prevBtn
        }
    });
    return retrunValue;
};

// 내비게이션 없는 슬라이드 함수
ui.noNaviSlideFn = function noNaviSlideFn(view, slide, pagination) {
    var retrunValue = new Swiper(slide, {
        slidesPerView: view,
        spaceBetween: 24,
        slidesPerGroup: view,
        loopFillGroupWithBlank: true,
        loop: true,
        pagination: {
            el: pagination,
            type: "fraction"
        }
    });
    var $pagination = document.querySelector("" + pagination);
    $pagination.parentElement.classList.add("off");
    return retrunValue;
};

// 뉴스9 슬라이드
ui.nineSlide = function nineSlide() {
    if ($(".news-9-slide .swiper-slide").length > 4) {
        var newsNine = ui.slideFn(4, ".news-9-slide", ".news-9-pagination", ".news-9-next", ".news-9-previous");
    } else if ($(".news-9-slide .swiper-slide").length <= 4) {
        var newsNine = ui.noNaviSlideFn(4, ".news-9-slide", ".news-9-pagination");
    }
};

// 주요영상 슬라이드
ui.mainVideoSlide = function mainVideoSlide() {
    if ($(".main-video-slide .swiper-slide").length > 2) {
        var mainVideo = ui.slideFn(2, ".main-video-slide", ".main-video-pagination", ".main-video-next", ".main-video-previous");
    } else if ($(".main-video-slide .swiper-slide").length <= 2) {
        var mainVideo = ui.noNaviSlideFn(2, ".main-video-slide", ".main-video-pagination");
    }
};

// 유튜브 라이브 뉴스 슬라이드
ui.youtubeLiveNewsSlide = function youtubeLiveNewsSlide() {
    if ($(".youtube-live-news-slide .swiper-slide").length > 2) {
        var youtubeLive = ui.slideFn(2, ".youtube-live-news-slide", ".youtube-live-news-pagination", ".youtube-live-news-next", ".youtube-live-news-previous");
    } else if ($(".youtube-live-news-slide .swiper-slide").length <= 2) {
        var youtubeLive = ui.noNaviSlideFn(2, ".youtube-live-news-slide", ".youtube-live-news-pagination");
    }
};

// K-SHorts 슬라이드
ui.kshortsSlide = function kshortsSlide() {
    if ($(".k-shorts-slide .swiper-slide").length > 4) {
        var kShorts = ui.slideFn(4, ".k-shorts-slide", ".k-shorts-pagination", ".k-shorts-next", ".k-shorts-previous");
    } else if ($(".k-shorts-slide .swiper-slide").length <= 4) {
        var kShorts = ui.noNaviSlideFn(4, ".k-shorts-slide", ".k-shorts-pagination");
    }
};

// PremiumK 슬라이드
ui.premiumk01Slide = function premiumk01Slide() {
    if ($(".crab-slide .swiper-slide").length > 4) {
        var crab = ui.slideFn(4, ".crab-slide", ".crab-pagination", ".crab-next", ".crab-previous");
    } else if ($(".crab-slide .swiper-slide").length <= 4) {
        var crab = ui.noNaviSlideFn(4, ".crab-slide", ".crab-pagination");
    }
};

ui.premiumk02Slide = function premiumk02Slide() {
    if ($(".site-video-slide .swiper-slide").length > 4) {
        var siteVideo = ui.slideFn(4, ".site-video-slide", ".site-video-pagination", ".site-video-next", ".site-video-previous");
    } else if ($(".site-video-slide .swiper-slide").length <= 4) {
        var siteVideo = ui.noNaviSlideFn(4, ".site-video-slide", ".site-video-pagination");
    }
};

ui.premiumk03Slide = function premiumk03Slide() {
    if ($(".breaking-news-video-slide .swiper-slide").length > 4) {
        var breakingNews = ui.slideFn(4, ".breaking-news-video-slide", ".breaking-news-video-pagination", ".breaking-news-video-next", ".breaking-news-video-previous");
    } else if ($(".breaking-news-video-slide .swiper-slide").length <= 4) {
        var breakingNews = ui.noNaviSlideFn(4, ".breaking-news-video-slide", ".breaking-news-video-pagination");
    }
};

// 키워드롤
ui.keywordRoll = function keywordRoll() {
    var keywordSwiper = new Swiper(".rolling-keyword", {
        direction: "vertical",
        loop: true,
        loopAdditionalSlides: 1,
        autoplay: {
            delay: 2500,
            disableOnInteraction: false
        }
    });
};

// 툴팁 클릭
ui.tooltipClick = function tooltipClick() {
    var $btns = document.querySelectorAll(".tooltip-btn");
    var $closeBtns = document.querySelectorAll(".tooltip .close-btn");
    $btns.forEach(function ($btn) {
        if ($btn) {
            $btn.addEventListener("click", function () {
                var $tooptip = $btn.nextElementSibling;
                $tooptip.classList.toggle("on");
            });
        }
    });
    $closeBtns.forEach(function ($closeBtn) {
        if ($closeBtn) {
            $closeBtn.addEventListener("click", function () {
                var $tooptip = $closeBtn.parentElement;
                $tooptip.classList.remove("on");
            });
        }
    });
};

// 라이브 섹션 클릭 event
ui.liveClick = function liveClick() {
    var $btn = document.querySelector(".header-live .arrow-btn");
    var $aside = document.querySelector(".aside");
    if ($btn) {
        $btn.addEventListener("click", function () {
            var $headerLive = $btn.parentElement;
            $headerLive.classList.toggle("on");

            if ($headerLive.classList.contains("on")) {
                localStorage.setItem('dlive-state', true);
            } else {
                localStorage.setItem('dlive-state', false);
            }
            $aside.classList.toggle("position-change");
            footerUi.setAsidePos();
        });
    }
};

// 아시안 게임 슬라이드
ui.asianGameSlide = function asianGameSlide() {
    if ($(".asian-game-slide .swiper-slide").length > 4) {
        var crab = ui.slideFn(4, ".asian-game-slide", ".asian-game-pagination", ".asian-game-next", ".asian-game-previous");
    } else if ($(".asian-game-slide .swiper-slide").length <= 4) {
        var crab = ui.noNaviSlideFn(4, ".asian-game-slide", ".asian-game-pagination");
    }
};

// text-play-icon 을 위한 텍스트 개수 제한(글자수가 관리되는 항목이라 주석처리)
// ui.textBoxCuts = function textBoxCuts() {
//     var textCuts = document.querySelectorAll(".text-cut");
//     var maxText = 38;
//     textCuts.forEach(function (textCut) {
//         var text = textCut.innerText;
//         if (text.length > maxText) {
//             var cutText = text.substring(0, maxText);
//             text = cutText + "...";
//             textCut.innerText = text;
//         }
//     });
// };
    var footerUi = {};
var isPageLoaded = false;

window.addEventListener("load", function () {
    footerUi.selectClick();
    footerUi.asideShareClick();
    footerUi.asideTxtClick();
    footerUi.asideDarkClick();
    footerUi.asideCommentClick();
    footerUi.asideLikeClick();
    footerUi.asideOpenMenuClick();
    footerUi.topBtnClick();
    footerUi.setAsideToggle();
    var asideInterval3 = setInterval(function () {
        if (isBreakingNewsLoaded && isLiveNewsLoaded && isHeaderDisasterLoaded && isHeaderNoticeLoaded) {
            window.scrollBy(0, 5);
            window.scrollBy(0, -5);
            footerUi.asideFixed();
            footerUi.setAsidePos();
            clearInterval(asideInterval3);
        }
    }, 10)

    isPageLoaded = true;
});

window.addEventListener("resize", function () {
    if (isPageLoaded) {
        footerUi.setAsidePos();
    }
});



// 셀렉트 메뉴 클릭 event
footerUi.selectClick = function selectClick() {

    const $footerSelectBtn = $('.footer-select-btn');
    const $commonSelectLink = $('.common-select-links');

    $footerSelectBtn.on('click', function() {
        if($(this).siblings($commonSelectLink).hasClass('on')) {
            $(this).removeClass('on');
            $(this).siblings($commonSelectLink).removeClass('on');
        } else {
            $($footerSelectBtn).removeClass('on');
            $($commonSelectLink).removeClass('on');
            $(this).addClass('on');
            $(this).siblings($commonSelectLink).addClass('on');
        }
    });

    $(document).on('click', function(event) {
        if(($commonSelectLink).hasClass('on')) {
            removeOnClass(event);
        }
    });

    function removeOnClass() {
        if (!$(event.target).closest($footerSelectBtn).length) {
            $($footerSelectBtn).removeClass('on');
            $($commonSelectLink).removeClass('on');
        }
    }
};

// 사이드 메뉴 공유 메뉴 클릭 event
footerUi.asideShareClick = function asideShareClick() {
    var $btn = document.querySelector(".aside-btns-list .share-btn");
    var $closeBtn = document.querySelector(".share-menu .close-btn");
    var $dim = document.querySelector(".dim");
    var $menu = document.querySelector(".share-menu");
    var $nav = document.querySelector(".header-nav-wrapper");
    var $body = document.querySelector("body");
    if ($btn) {
        $btn.addEventListener("click", function () {
            $dim.classList.toggle("on");
            $menu.classList.toggle("on");
            $nav.classList.toggle("index-change");
            $body.classList.toggle("hidden");
        });
    }
    if ($closeBtn) {
        $closeBtn.addEventListener("click", function () {
            $dim.classList.remove("on");
            $menu.classList.remove("on");
            $nav.classList.remove("index-change");
            $body.classList.remove("hidden");
        });
    }
    if ($dim) {
        $dim.addEventListener("click", function () {
            $dim.classList.remove("on");
            $menu.classList.remove("on");
            $nav.classList.remove("index-change");
            $body.classList.remove("hidden");
        });
    }
};

// 사이드 메뉴 텍스트 메뉴 클릭 event
footerUi.asideTxtClick = function asideTxtClick() {
    var $btn = document.querySelector(".aside-btns-list .txt-btn");
    var $txtIcon = document.querySelector(".aside-btns-list .txt-btn .txt-icon");
    var $btnTxt = document.querySelector(".aside-btns-list .txt-btn .common-btn-txt");
    var $menu = document.querySelector(".aside-btns-list .txt-menu");

    // 텍스트 메뉴 펼침
    if ($btn) {
        $btn.addEventListener("click", function () {
            $btn.classList.toggle("on");
            $menu.classList.toggle("on");
        });
    }

    // 텍스트 메뉴 클릭
    $(".txt-menu-btn.large").off("click").on("click", function () {
        if (!$txtIcon.classList.contains("large")) {
            commonUi.updateChangeFontsize('large');
        }
    });
    $(".txt-menu-btn.normal").off("click").on("click", function () {
        if (!$txtIcon.classList.contains("normal")) {
            commonUi.updateChangeFontsize('normal');
        }
    });
    $(".txt-menu-btn.small").off("click").on("click", function () {
        if (!$txtIcon.classList.contains("small")) {
            commonUi.updateChangeFontsize('small');
        }
    });
};

// 사이드 메뉴 다크 클릭 event
footerUi.asideDarkClick = function asideDarkClick() {
    var $btn = document.querySelector(".dark-btn");
    var $btnTxt = document.querySelector(".dark-btn .common-btn-txt");
    var $body = document.querySelector("body");
    if ($btn) {
        $btn.addEventListener("click", function () {
            var isDark = document.documentElement.getAttribute("data-dark") === "true";

            if (isDark) {
                document.documentElement.dataset.dark = "false";
                $btnTxt.innerHTML = "\uB2E4\uD06C<br />\uBAA8\uB4DC";
                if (navigator.cookieEnabled) {
                    localStorage.setItem("dark-mode", "false");
                }
            } else {
                document.documentElement.dataset.dark = 'true';
                $btnTxt.innerHTML = "\uB77C\uC774\uD2B8<br />\uBAA8\uB4DC";
                if (navigator.cookieEnabled) {
                    localStorage.setItem("dark-mode", "true");
                }
            }
        });
    }
};

// 사이드 메뉴 댓글 클릭
footerUi.asideCommentClick = function asideCommentClick() {
    var $btn = document.querySelector(".aside-btns-list .comment-btn");
    if ($btn) {
        var $commentArea = document.querySelector(".comment-area");
        $btn.addEventListener("click", function () {
            $commentArea.scrollIntoView({
                behavior: "smooth"
            });
        });
    }
};

// 사이드 메뉴 좋아요 클릭
footerUi.asideLikeClick = function asideLikeClick() {
    var $btn = document.querySelector(".aside-btns-list .like-btn");
    if ($btn) {
        var $openMenu = document.querySelector(".like-menu.open-menu");
        $btn.addEventListener("click", function () {
            $btn.classList.toggle("on");
            $openMenu.classList.toggle("on");
        });
    }
};

// 사이드 오픈 메뉴 클릭
footerUi.asideOpenMenuClick = function asideOpenMenuClick() {
    var $btns = document.querySelectorAll(".open-menu-btn");
    $btns.forEach(function ($btn) {
        var $openMenu = $btn.parentElement.parentElement;
        var $asideBtn = $openMenu.previousElementSibling;
        if ($btn) {
            $btn.addEventListener("click", function () {
                $openMenu.classList.remove("on");
                $asideBtn.classList.remove("on");
            });
        }
    });
};

// 스크롤시 어사이드 고정 event
footerUi.asideFixed = function asideFixed() {
    var $aside = $(".aside");
    var $asideToggle = $(".aside-toggle-button");

    $(window).on("scroll", function () {
        if ($(window).scrollTop() > headerStickyTriggerPoint) {
            if ($aside) $aside.addClass("fixed");
            if ($asideToggle) $asideToggle.addClass("fixed");
        } else {
            if ($aside) $aside.removeClass("fixed");
            if ($asideToggle) $asideToggle.removeClass("fixed");
        }
    });
};

// 탑버튼 클릭
footerUi.topBtnClick = function topBtnClick() {
    var $btn = document.querySelector("#footer .top-btn");
    if ($btn) {
        $btn.addEventListener("click", function () {
            window.scrollTo({
                top: 0,
                behavior: "smooth"
            });
        });
    }
};

// 최초 어사이드 포지션 설정
footerUi.setAsidePos = function setAsidePos() {
    var $aside = document.querySelector("#footer .aside");
    var $asideToggle = document.querySelector("#footer .aside-toggle-button");
    var $contents = document.querySelector("#contents");
    var $iframe = document.querySelector("#contents .iframe-area .inr");
    var $headLine = document.querySelector("#contents .main-head-line");
    var $headerNav = document.querySelector(".header-nav");
    var $viewContentsWrapper = document.querySelector(".view-contents-wrapper");
    var $reporterInformationIntroduce = document.querySelector(".reporter-information-introduce");
    var $election2024 = document.querySelector("#contents .election-box");

    var left = 0;
    if ($headerNav) {
        left = $headerNav.getBoundingClientRect().left;
    }

    if ($aside) {
        $aside.classList.remove("hide");
        $aside.style.display = "";
        $aside.style.left = Math.max(left - 98, 0) + "px";
    }

    if ($asideToggle) {
        $asideToggle.classList.remove("show");
        $asideToggle.style.display = "";
    }

    if (window.innerWidth <= 1300) {
        if ($aside) {
            $aside.classList.add("hide");
        }
        if ($asideToggle) {
            $asideToggle.classList.add("show");
            if ($asideToggle.classList.contains("on")) {
                if ($aside) {
                    $aside.classList.remove("hide");
                }
                $asideToggle.style.left = 47 + "px";
            } else {
                $asideToggle.style.left = 0;
            }
        }
    }

    if ($iframe) {
        var top = window.scrollY + $iframe.getBoundingClientRect().top;
        if ($(".header-nav-wrapper").hasClass("fixed")) {
            top += 50;
        }
        $aside.style.top = top + "px";
        $asideToggle.style.top = top + 26 + "px";
    } else if ($election2024) { // headLine
            top = window.scrollY + $election2024.getBoundingClientRect().top;
            if ($(".header-nav-wrapper").hasClass("fixed")) {
                top += 50;
            }
            $aside.style.top = top + "px";
            $asideToggle.style.top = top + 26 + "px";
    } else {
        if ($contents) {
            top = window.scrollY + $contents.getBoundingClientRect().top + 24;
        }
        if ($(".header-nav-wrapper").hasClass("fixed")) {
            top += 50;
        }
        if ($aside) {
            $aside.style.top = top + "px";
        }
        if ($asideToggle) {
            $asideToggle.style.top = top + 26 + "px";
        }
    }
};

// 속보 생성시 어사이드 포지션 설정
footerUi.setAsidePosForBreakingNews = function setAsidePosForBreakingNews() {
    var $aside = document.querySelector("#footer .aside");
    var $asideToggle = document.querySelector("#footer .aside-toggle-button");
    var $contents = document.querySelector("#contents");
    var $iframe = document.querySelector("#contents .iframe-area .inr");
    var $headLine = document.querySelector("#contents .main-head-line");
    var $headerNav = document.querySelector(".header-nav");
    var $viewContentsWrapper = document.querySelector(".view-contents-wrapper");
    var $reporterInformationIntroduce = document.querySelector(".reporter-information-introduce");

    var left = 0;
    if ($headerNav) {
        left = $headerNav.getBoundingClientRect().left;
    }

    if ($aside) {
        $aside.style.left = Math.max(left - 98, 0) + "px";
    }

    if (window.innerWidth <= 1300) {
        if ($asideToggle) {
            if ($asideToggle.classList.contains("on")) {
                $asideToggle.style.left = 47 + "px";
            } else {
                $asideToggle.style.left = 0;
            }
        }
    }

    if ($iframe) {
        var top = window.scrollY + $iframe.getBoundingClientRect().top;
        if ($(".header-nav-wrapper").hasClass("fixed")) {
            top += 50;
        }
        if ($aside) {
            $aside.style.top = top + "px";
        }
        if ($asideToggle) {
            $asideToggle.style.top = top + 26 + "px";
        }
    } else if ($headLine) {
            if ($headLine) {
                top = window.scrollY + $headLine.getBoundingClientRect().top;
            }
            if ($(".header-nav-wrapper").hasClass("fixed")) {
                top += 50;
            }
            if ($aside) {
                $aside.style.top = top + "px";
            }
            if ($asideToggle) {
                $asideToggle.style.top = top + 26 + "px";
            }
    } else {
        if ($contents) {
            top = window.scrollY + $contents.getBoundingClientRect().top + 24;
        }
        if ($(".header-nav-wrapper").hasClass("fixed")) {
            top += 50;
        }
        if ($aside) {
            $aside.style.top = top + "px";
        }
        if ($asideToggle) {
            $asideToggle.style.top = top + 26 + "px";
        }
    }
};

footerUi.setAsideToggle = function setAsideToggle() {
    var $aside = document.querySelector("#footer .aside");
    var $asideToggle = document.querySelector("#footer .aside-toggle-button");
    if ($asideToggle) {
        $asideToggle.addEventListener("click", function () {
            if ($aside.classList.contains("hide")) {
                $aside.classList.remove("hide");
                $asideToggle.classList.add("on");
                $asideToggle.style.left = 47 + "px";
            } else {
                $aside.classList.add("hide");
                $asideToggle.classList.remove("on");
                $asideToggle.style.left = 0;
            }
        });
    }
};

    /*******************************************************
     * 공통함수 영역 [e]
     *******************************************************/

    $(function () {
      $('.aside .aside-comment').hide();
      $('.aside .aside-like').hide();
      $('.aside .aside-copy').hide();
      $('.progress-bar').hide();
    });
  </script>

  <script type="text/javascript">
    if (isMobile() && getParameterByName('mode') != 'pc') {
      var currentURL = window.location.href;
      var mobileURL = currentURL.replace('/pc/', '/mobile/');
      location.href = mobileURL;
    }
  </script>
</head>
<body id="mainPage">
  
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M7J7R5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <!-- breaking news txt area -->
<header id="header">
  <div class="before-breaking-news" style="display:none"></div>
<script>
  var speed = 20 * 1000; // 20초
var lastSokbo; // 이전 속보

$(function () {
  updateLiveOnAirNews();
  setUpdateNews();
})

function setUpdateNews() {
  setInterval(updateLiveOnAirNews, speed);
}

function updateLiveOnAirNews() {
  $.get('/sokbo/sokbo.json?d=' + dayjs().format("YYYYMMDDHHmmss"), function (ret) {
    setOnAirNewsFlash(ret);

    // 웹푸시
    checkNotification(ret);
  });
}

function setOnAirNewsFlash(liveOnAirNews) {
  var currentDate = getKoreaTime();
  var sortData = null;

  var data = [];
  if (liveOnAirNews) {
    data = liveOnAirNews.slice();
  }

  if (data && data.length) {
    if (Array.isArray(data)) {
      sortData = data.sort(function (a, b) {
        if (dayjs(a.regDate).isBefore(b.regDate)) {
          return b;
        }
      });
      sortData = sortData.filter(function (sortItem) {
        return !dayjs(currentDate).isAfter(new Date(sortItem.endDate)) && sortItem.type === "B";
      });

      // 최신 속보와 이전 속보가 다를 경우 속보를 다시 띄운다.
      if (lastSokbo != JSON.stringify(sortData)) {
        lastSokbo = JSON.stringify(sortData);

        $('.breaking-news-wrapper').remove();
        $('.rolling-breaking-news').remove();

        headerUi.setHeaderStickyTriggerPoint(); // header sticky point reset

        if (sortData.length) {

          var $div;

          sortData.sort(function (a, b) {
            var aFlashEditCode = parseInt(a.flashEditCode);
            var bFlashEditCode = parseInt(b.flashEditCode);

            if (aFlashEditCode < bFlashEditCode) {
              return 1;
            }

            if (aFlashEditCode > bFlashEditCode) {
              return -1;
            }

            return 0;
          });

          var htmlContent;

          if (sortData.length == 1) {
            htmlContent =
              '<div class="breaking-news-wrapper">' +
              '<div class="breaking-news">' +
              '<div class="news-title">' +
              '<div class="badge">속보</div>' +
              '<a class="title" href="" aria-label="속보 기사 링크"></a>' +
              '</div>' +
              '<a href="/news/pc/breaking/breaking.html" class="all-link" aria-label="속보 전체 페이지 링크">' +
              '<span class="txt">속보 및 알림 전체</span>' +
              '<span class="arrow"></span>' +
              '</a>' +
              '</div>' +
              '</div>';

            // jQuery 객체로 변환
            var $div = $(htmlContent);

            var flashEditContents = sortData[0].flashEditContents.replace('\n', ' ');
            $div.find('.breaking-news a.title').attr('href', sortData[0].url).text(flashEditContents);

            $('.before-breaking-news').after($div);
          } else {
            htmlContent =
              '<div class="rolling-breaking-news">' +
              '<div class="breaking-news-wrapper">' +
              '<div class="breaking-news rolling">' +
              '<div class="news-title">' +
              '<div class="badge">속보</div>' +
              '<div class="breaking-news-swiper swiper">' +
              '<ul class="swiper-wrapper">' +
              '<li class="swiper-slide breaking-news-list">' +
              '<a class="breaking-news-link" aria-label="속보 기사 링크"></a>' +
              '</li>' +
              '</ul>' +
              '</div>' +
              '</div>' +
              '<button type="button" class="arrow-btn" aria-label="속보 펼침 버튼"></button>' +
              '</div>' +
              '</div>' +
              '<div class="breaking-news-history-wrapper">' +
              '<div class="breaking-news-history">' +
              '<ul class="histories">' +
              '<li class="history-list">' +
              '<span class="time"></span>' +
              '<div class="txt-wrapper">' +
              '<span class="circle"></span>' +
              '<a class="txt" aria-label="속보 기사 링크"></a>' +
              '</div>' +
              '</li>' +
              '</ul>' +
              '<a href="/news/pc/breaking/breaking.html" class="all-link" aria-label="속보 기사 링크">' +
              '<span class="txt">속보 및 알림 전체</span>' +
              '<span class="arrow-btn"></span>' +
              '</a>' +
              '</div>' +
              '</div>' +
              '</div>';

            // jQuery 객체로 변환
            var $div = $(htmlContent);

            for (var i = 0; i < sortData.length; i++) {
              var flashEditContents = sortData[i].flashEditContents.replace('\n', ' ');
              var $li_slide = $div.find('.breaking-news-wrapper ul li').first().clone();
              $li_slide.find('a').html(flashEditContents);
              if (sortData[i].url) {
                $li_slide.find('a').attr('href', sortData[i].url);
              }
              $div.find('.breaking-news-wrapper ul').append($li_slide);

              var $li = $div.find('.breaking-news-history-wrapper ul li').first().clone();
              $li.find('span.time').text(dayjs(sortData[i].regDate).format("HH:mm"));
              $li.find('a.txt').text(flashEditContents);
              if (sortData[i].url) {
                $li.find('a').attr('href', sortData[i].url);
              }

              $div.find('.breaking-news-history-wrapper ul').append($li);
            }
            $div.find('.breaking-news-history-wrapper ul li').first().remove();
            $div.find('.breaking-news-wrapper ul li').first().remove();

            $('.before-breaking-news').after($div);

            var breakingNewsSwiper = headerUi.breakingNewsRolling();
            headerUi.breakingNewsClick(breakingNewsSwiper);
          }
        }

        footerUi.setAsidePosForBreakingNews();
      }
    }
  }
  isBreakingNewsLoaded = true;
}

</script>

  <!-- 헤더 탑 메뉴 -->
  <div class="header-top-menu-wrapper">
    <div class="header-top-menu">
      <div class="sns-links-menu">
        <a href="https://www.kbs.co.kr" class="kbs-link sns-link" target="_blank" title="KBS 사이트"
          aria-label="KBS 사이트 링크">KBS</a>
        <a href="https://www.youtube.com/user/NewsKBS" class="youtube-link sns-link" target="_blank"
          title="KBS 뉴스 유튜브 페이지" aria-label="KBS 뉴스 유튜브 링크"></a>
        <a href="https://www.facebook.com/kbsnews" class="facebook-link sns-link" target="_blank"
          title="KBS 뉴스 페이스북 페이지" aria-label="KBS 뉴스 페이스북 링크"></a>
        <a href="https://www.instagram.com/kbsnews/" class="instagram-link sns-link" target="_blank"
          title="KBS 뉴스 인스타그램 페이지" aria-label="KBS 뉴스 인스타그램 링크"></a>
        <a href="https://www.tiktok.com/@kbsnewsofficial" class="tiktok-link sns-link" target="_blank"
          title="KBS 뉴스 틱톡 페이지" aria-label="KBS 뉴스 틱톡 링크"></a>
        <!--                <a href="/news/light/main.html?ref=pGnb" class="text-version-link sns-link" target="_blank" title="KBS 뉴스 텍스트 버전 페이지" aria-label="KBS 뉴스 텍스트 버전 링크">텍스트 버전</a>-->
      </div>

      <div class="weather-cache-area">
        <img src="/resource/image/pc/weather/dark/sun.png" alt="날씨 캐시 이미지">
        <img src="/resource/image/pc/weather/dark/cloudy-sun.png" alt="날씨 캐시 이미지">
        <img src="/resource/image/pc/weather/dark/cloudy-sun2.png" alt="날씨 캐시 이미지">
        <img src="/resource/image/pc/weather/dark/cloudy.png" alt="날씨 캐시 이미지">
        <img src="/resource/image/pc/weather/dark/fog.png" alt="날씨 캐시 이미지">
        <img src="/resource/image/pc/weather/dark/smoge.png" alt="날씨 캐시 이미지">
        <img src="/resource/image/pc/weather/dark/cloud-lightning.png" alt="날씨 캐시 이미지">
        <img src="/resource/image/pc/weather/dark/cloud-drizzle.png" alt="날씨 캐시 이미지">
        <img src="/resource/image/pc/weather/dark/cloud-rain.png" alt="날씨 캐시 이미지">
        <img src="/resource/image/pc/weather/dark/snow.png" alt="날씨 캐시 이미지">
      </div>

      <div class="weather-login-menu">
        <p class="today"></p>
        <div class="weather swiper">
          <ul class="swiper-wrapper">
            <li class="swiper-slide weather-info-list">
              <img src="" alt="" class="weather-info-img" />
              <p class="weather-info-txt">
                <span class="city-name"></span>
                <span class="temperature"></span>
                <span class="weather-info"></span>
              </p>
            </li>
          </ul>
        </div>
        <a class="login" id="login_id" aria-label="로그인 페이지 링크">로그인</a>
        <a class="register" id="register_id" aria-label="회원가입 페이지 링크">회원가입</a>
        <a class="my-page" id="my-page-id" href="//mypage.kbs.co.kr" aria-label="마이페이지 링크">마이페이지</a>
        <a class="kbs-world" href="/special/english/main.do?bcd=0200">English</a>
      </div>
    </div>
  </div>

  <!-- 헤더 타이틀 메뉴 -->
  <div class="header-title-menu-wrapper">
    <div class="header-title-menu">

      <div class="disaster-portal-link" id="disaster-portal-link">
        <span class="siren-icon"></span>
        <a href="https://d.kbs.co.kr/" class="default-txt" target="_blank" aria-label="재난포털 페이지 링크">재난포털</a>
        <a href="" class="disaster-message" aria-label="재난포털 페이지 링크"></a>
      </div>

      <h1 class="header-logo">
        <a href="/news/pc/main/main.html?ref=pLogo" class="header-logo-link" aria-label="KBS 뉴스 메인 링크"></a>
      </h1>

      <div class="report-live-menu">
        <a href="/news/pc/report/report.html?ref=pGnb" class="report-link" aria-label="제보 페이지 링크">제보</a>
        <a href="/news/pc/news24/news24.html?ref=pGnb" class="live-link" aria-label="ON AIR 버튼">
          <span class="txt">ON AIR</span>
          <span class="red-dot"></span>
        </a>
      </div>
    </div>
  </div>

  <div class="header-nav-wrapper">
  <div class="header-nav">
    <nav class="nav-menu">
      <div class="hamburger-search-btns">
        <button
          type="button"
          class="hamburger-btn"
          onclick="hamburgerClick()"
          aria-label="전체 메뉴 펼침 버튼"
        ></button>
        <button
          type="button"
          class="search-btn"
          aria-label="검색 화면 열림 버튼"
        ></button>
      </div>
      <a href="/news/pc/main/main.html?ref=pGnb" class="nav-logo view"></a>
      <ul class="nav-links">
        <li class="nav-list">
          <a href="javascript:;" class="nav-link" aria-label="분야별">
            분야별
          </a>
        </li>
        <li class="nav-list">
          <a
            href="/news/pc/program/program.do?bcd=0001&ref=pGnb"
            class="nav-link"
            aria-label="뉴스9 페이지 링크"
          > 뉴스9 </a>
        </li>
        <li class="nav-list">
          <a href="javascript:;" class="nav-link" aria-label="TV 뉴스">
            TV 뉴스
          </a>
        </li>
        <li class="nav-list">
          <a href="javascript:;" class="nav-link" aria-label="심층취재">
            심층취재
          </a>
        </li>
        <li class="nav-list">
          <a
            href="/news/pc/sports/sports.html?ref=pGnb"
            class="nav-link"
            aria-label="스포츠"
          > 스포츠 </a>
        </li>
        <li class="nav-list">
          <a href="javascript:;" class="nav-link" aria-label="시사프로그램">
            시사프로그램
          </a>
        </li>
        <li class="nav-list">
          <a href="javascript:;" class="nav-link" aria-label="지역뉴스">
            지역뉴스
          </a>
        </li>
        <li class="nav-list">
          <a href="/news/pc/breaking/breaking.html?ref=pGnb" class="nav-link" aria-label="속보">속보</a>
        </li>
      </ul>
      
    </nav>
    <ul class="hashtag-links">
      <li class="hashtag-list">
        <a href="" class="hashtag-link" aria-label="기사 페이지 링크"></a>
      </li>
    </ul>
  </div>

  <div class="full-menu-wrapper">
    <div class="full-menu">
  <h2 class="blind">전체메뉴</h2>
  <div class="common-menu field-menu">
    <div class="full-menu-links-wrapper">
      <h3>분야별</h3>
      <div class="full-menu-links-group">
        <ul class="full-menu-links">
          <li><a href="/news/pc/category/category.do?ref=pSiteMap">전체</a></li>
          <li><a href="/news/pc/category/category.do?ctcd=0003&ref=pSiteMap">정치</a></li>
          <li><a href="/news/pc/category/category.do?ctcd=0004&ref=pSiteMap">경제</a></li>
          <li><a href="/news/pc/category/category.do?ctcd=0005&ref=pSiteMap">사회</a></li>
          <li><a href="/news/pc/category/category.do?ctcd=0008&ref=pSiteMap">문화</a></li>
          <li><a href="/news/pc/category/category.do?ctcd=0007&ref=pSiteMap">IT·과학</a></li>
          <li><a href="/news/pc/category/category.do?ctcd=0006&ref=pSiteMap">국제</a></li>
          <li><a href="/news/pc/category/category.do?ctcd=0095&ref=pSiteMap">재난·기후·환경</a></li>
          <li><a href="/news/pc/category/category.do?ctcd=0034&ref=pSiteMap">생활·건강</a></li>
          <li><a href="/news/pc/sports/sports.html?ref=pSiteMap">스포츠</a></li>
          <li><a href="/news/pc/enter/enter.html?ref=pSiteMap">연예</a></li>
          <li><a href="/news/pc/menu/listWeather.do?mcd=0048&ref=pSiteMap">날씨</a></li>
          <li><a href="/news/pc/issue/issue.html?ref=pSiteMap">이슈</a></li>
        </ul>
      </div>
    </div>

  </div>

  <div class="common-menu tv-menu">
    <div class="full-menu-links-wrapper">
      <h3>TV 뉴스</h3>
      <div class="full-menu-links-group">
        <h4>1TV 뉴스</h4>
        <ul class="full-menu-links col-2">
          <li><a href="/news/pc/program/program.do?bcd=0004&ref=pSiteMap">06:00 뉴스광장 1부</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0010&ref=pSiteMap">17:00 뉴스 5</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0003&ref=pSiteMap">07:00 뉴스광장 2부</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0011&ref=pSiteMap">19:00 뉴스 7</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0008&ref=pSiteMap">09:30 930뉴스</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0001&ref=pSiteMap">21:00 뉴스 9</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0009&ref=pSiteMap">12:00 뉴스 12</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0012&ref=pSiteMap">22:50 뉴스라인 W</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0137&ref=pSiteMap">14:00 뉴스 2</a></li>
        </ul>
      </div>
      <div class="full-menu-links-group col-2">
        <h4>2TV 뉴스</h4>
        <ul class="full-menu-links">
          <li><a href="/news/pc/program/program.do?bcd=0016&ref=pSiteMap">10:10 아침뉴스타임</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0049&ref=pSiteMap">15:00 뉴스타임</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0197&ref=pSiteMap">15:15 월드24</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0199&ref=pSiteMap">18:00 경제콘서트</a></li>
        </ul>
      </div>
      <div class="full-menu-links-group col-2">
        <h4>1TV 경인</h4>
        <ul class="full-menu-links">
          <li><a href="/news/pc/program/program.do?bcd=0060&ref=pSiteMap">뉴스광장(경인)</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0059&ref=pSiteMap">930뉴스(경인)</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0051&ref=pSiteMap">뉴스7(경인)</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0052&ref=pSiteMap">뉴스9(경인)</a></li>
        </ul>
      </div>
      <div class="full-menu-links-group">
        <h4><a href="/news/pc/program/program.do?bcd=0042&ref=pSiteMap">뉴스특보</a></h4>
      </div>
    </div>
  </div>

  <div class="common-menu premiumk-menu">
    <div class="full-menu-links-wrapper">
      <h3>심층취재</h3>
      <ul class="full-menu-links col-2">
        <li><a href="/news/pc/menu/menu.do?mcd=1127&ref=pSiteMap">심층K</a></li>
        <li><a href="/news/pc/menu/menu.do?mcd=0713&ref=pSiteMap">단독</a></li>
        <li><a href="/news/pc/menu/tamsaKList.do?mcd=1016&ref=pSiteMap">탐사K</a></li>
        <li><a href="/news/pc/menu/menu.do?mcd=1075&ref=pSiteMap">제대로 보겠습니다</a></li>
        <li><a href="/news/pc/menu/menu.do?mcd=0990&ref=pSiteMap">영상K</a></li>
        <li><a href="/news/pc/menu/menu.do?mcd=0938&ref=pSiteMap">크랩</a></li>
        <li><a href="/news/pc/menu/menu.do?mcd=1048&ref=pSiteMap">글로벌K</a></li>
        <li><a href="/news/pc/menu/menu.do?mcd=1032&ref=pSiteMap">팩트체크K</a></li>
        <li><a href="/news/pc/menu/menu.do?mcd=1039&ref=pSiteMap">스포츠K</a></li>
      </ul>
      <ul class="full-menu-links col-2">
        <li><a href="/news/pc/menu/menu.do?mcd=0795&ref=pSiteMap">취재후</a></li>
        <li><a href="/news/pc/program/program.do?bcd=0023&ref=pSiteMap">News Today</a></li>
        <li class="w100"><a href="/news/pc/menu/menu.do?mcd=1126&ref=pSiteMap">주말엔</a></li>
        <li class="w100"><a href="/news/pc/menu/menu.do?mcd=1162&ref=pSiteMap">뒷北뉴스</a></li>
        <li class="w100"><a href="/special/climatesays/2023/main.html?&ref=pSiteMap">기후는 말한다</a></li>
        <li class="w100"><a href="/news/pc/menu/menu.do?mcd=1044&ref=pSiteMap">여심야심</a></li>
      </ul>
    </div>
  </div>

  <div class="common-menu current-affairs-menu">
    <div class="full-menu-links-wrapper">
      <h3>시사프로그램</h3>
      <div class="full-menu-links-group">
        <h4>시사프로그램</h4>
        <ul class="full-menu-links">
          <li><a href="/news/pc/sisa/sisaChang.do?ref=pSiteMap">시사기획 창</a></li>
          <li><a href="/news/pc/sisa/sisa.do?bcd=0029&ref=pSiteMap">일요진단 라이브</a></li>
          <li><a href="/news/pc/sisa/sisa.do?bcd=0198&ref=pSiteMap">더 보다</a></li>
          <li><a href="/news/pc/sisa/sisa.do?bcd=0031&ref=pSiteMap">남북의 창</a></li>
          <li><a href="/news/pc/sisa/sisa.do?bcd=0072&ref=pSiteMap">특파원 보고 세계는 지금</a></li>
          <li><a href="/news/pc/sisa/sisa.do?bcd=0071&ref=pSiteMap">재난방송센터</a></li>
          <li><a href="/news/pc/sisa/sisa.do?bcd=0073&ref=pSiteMap">사사건건</a></li>
          <li><a href="/news/pc/sisa/sisa.do?bcd=0061&ref=pSiteMap">인사이드 경인</a></li>
        </ul>
      </div>
      <div class="full-menu-links-group">
        <h4>라디오</h4>
        <ul class="full-menu-links">
          <li><a href="/news/pc/radio/radio.do?mcd=1139&ref=pSiteMap">전격시사</a></li>
          <li><a href="/news/pc/radio/radio.do?mcd=1125&ref=pSiteMap">성공예감</a></li>
          <li><a href="/news/pc/radio/radio.do?mcd=1138&ref=pSiteMap">뉴스레터K</a></li>
        </ul>
      </div>
    </div>
  </div>

  <div class="common-menu region-menu">
    <div class="full-menu-links-wrapper">
      <h3>지역뉴스</h3>
      <div class="full-menu-links-group">
        <ul class="full-menu-links col-2">
          <li><a href="/news/pc/local/local.do?lscd=10&ref=pSiteMap">부산</a></li>
          <li><a href="/news/pc/local/local.do?lscd=43&ref=pSiteMap">순천</a></li>
          <li><a href="/news/pc/local/local.do?lscd=11&ref=pSiteMap">울산</a></li>
          <li><a href="/news/pc/local/local.do?lscd=50&ref=pSiteMap">전주</a></li>
          <li><a href="/news/pc/local/local.do?lscd=20&ref=pSiteMap">창원</a></li>
          <li><a href="/news/pc/local/local.do?lscd=60&ref=pSiteMap">대전</a></li>
          <li><a href="/news/pc/local/local.do?lscd=21&ref=pSiteMap">진주</a></li>
          <li><a href="/news/pc/local/local.do?lscd=70&ref=pSiteMap">청주</a></li>
          <li><a href="/news/pc/local/local.do?lscd=30&ref=pSiteMap">대구</a></li>
          <li><a href="/news/pc/local/local.do?lscd=71&ref=pSiteMap">충주</a></li>
          <li><a href="/news/pc/local/local.do?lscd=31&ref=pSiteMap">안동</a></li>
          <li><a href="/news/pc/local/local.do?lscd=80&ref=pSiteMap">춘천</a></li>
          <li><a href="/news/pc/local/local.do?lscd=32&ref=pSiteMap">포항</a></li>
          <li><a href="/news/pc/local/local.do?lscd=81&ref=pSiteMap">강릉</a></li>
          <li><a href="/news/pc/local/local.do?lscd=40&ref=pSiteMap">광주</a></li>
          <li><a href="/news/pc/local/local.do?lscd=82&ref=pSiteMap">원주</a></li>
          <li><a href="/news/pc/local/local.do?lscd=41&ref=pSiteMap">목포</a></li>
          <li><a href="/news/pc/local/local.do?lscd=90&ref=pSiteMap">제주</a></li>
        </ul>
      </div>
    </div>
  </div>

  <div class="common-menu shortcut-menu">
    <div class="full-menu-links-wrapper">
      <h3>바로가기</h3>
      <div class="full-menu-links-group">
        <ul class="full-menu-links">
          <li><a href="//mypage.kbs.co.kr">좋아요 클립</a></li>
          <li><a href="/news/pc/report/report.html?ref=pSiteMap">제보</a></li>
          <li><a href="/news/pc/breaking/breaking.html?ref=pSiteMap">속보</a></li>
          <li><a href="https://d.kbs.co.kr/" target="_blank">재난포털</a></li>
          <li><a href="/news/pc/news24/news24.html?ref=pSiteMap">ON AIR</a></li>
          <li><a href="/news/pc/newsArchive/newsArchive.html?ref=pSiteMap">뉴스 아카이브</a></li>
        </ul>
      </div>
      <div class="full-menu-links-group">
        <h3><a href="/news/pc/notice/notice.html?ref=pSiteMap">공지·정정</a></h3>
      </div>
    </div>
  </div>
</div>
  </div>

  <div class="search-most-view">
    <div class="search-wrapper">
      <div class="search">
        <div class="search-box-wrapper">
          <p class="search-title">어떤 기사를 찾으시나요?</p>

          <form name="headerSearchForm" id="headerSearchForm" role="search" method="post">
  <div class="search-box">
    <input type="text" placeholder="원하는 검색어를 입력해주세요" class="search-box-input" />
    <button type="button" class="cancel-btn" aria-label="검색어 초기화 버튼" style="display: none"></button>
    <button type="submit" class="search-btn" aria-label="검색 조회 버튼"></button>
    <ul class="recommend-search"></ul>
  </div>
</form>

<script type="text/javascript">
  (function () {
  var originalSearchWord = '';
  var originalKeyboardOnIndex = -1;

  let $wrapper,
    $searchForm,
    $recommendSearch,
    $searchInput,
    $keywordClear,
    $searchButton = null;

  $(function () {
    $wrapper = $('.header-nav-wrapper .search-box');
    $searchForm = $('.header-nav-wrapper #headerSearchForm');
    $recommendSearch = $wrapper.find('.recommend-search');
    $searchInput = $wrapper.find('.search-box-input');
    $keywordClear = $wrapper.find('.cancel-btn');
    $searchButton = $wrapper.find('.search-btn');

    handleSearchKeyword(); // 검색어 자동완성
  });

  // 검색 창
  function handleSearchKeyword() {
    $searchInput.on('focus', function (e) {
      keyword = $searchInput.val().trim();
      originalSearchWord = keyword;

      if (keyword.length >= 1) {
        $keywordClear.show();
        getKeyword(keyword);
      }
    });

    $(document).on('click', function (e) {
      const $target = $(e.target);
      const isInput = $target.hasClass('search-box-input');
      const isRecommendWord = $target.hasClass('recommend-word');

      if (!(isInput || isRecommendWord)) {
        $recommendSearch.removeClass('on');
      }
    });

    $searchInput.on('keyup', function (event) {
      var key = event.key || event.keyCode;
      var KEYCODE = {
        ENTER: 13,
        ESC: 27,
        ARROW_UP: 38,
        ARROW_DOWN: 40,
      };
      var KEY_RETURN_TIME = 80;

      if (key == KEYCODE.ARROW_UP || key == 'ArrowUp') {
        setTimeout(function () {
          var $liList = $recommendSearch.find('.recommend-search-list');
          var $activeLi = $recommendSearch.find('.recommend-search-list.on');
          var currentIndex = $liList.index($activeLi);

          if (currentIndex == -1) {
            $recommendSearch.removeClass('on');
          } else if (currentIndex == 0) {
            $searchInput.val(originalSearchWord);
            $liList.removeClass('on');
            $recommendSearch.removeClass('on');
          } else {
            $liList.removeClass('on');
            const $targetLi = $liList.eq(currentIndex - 1);
            const $button = $targetLi.find('button');

            $targetLi.addClass('on');
            $searchInput.val($button.val());

            originalKeyboardOnIndex = currentIndex - 1;
          }
        }, KEY_RETURN_TIME);
      } else if (key == KEYCODE.ARROW_DOWN || key == 'ArrowDown') {
        setTimeout(function () {
          var $liList = $recommendSearch.find('.recommend-search-list');
          var $activeLi = $recommendSearch.find('.recommend-search-list.on');
          var currentIndex = $liList.index($activeLi);

          $liList.removeClass('on');

          if ($liList.length === 0) return;

          $recommendSearch.addClass('on');

          if (currentIndex == -1) {
            const $targetLi = $liList.eq(0);
            const $button = $targetLi.find('button');

            $targetLi.addClass('on');
            $searchInput.val($button.val());

            originalKeyboardOnIndex = 0;
          } else if (currentIndex == $liList.length - 1) {
            const $targetLi = $liList.eq(0);
            const $button = $targetLi.find('button');

            $targetLi.addClass('on');
            $searchInput.val($button.val());

            originalKeyboardOnIndex = 0;
          } else {
            const $targetLi = $liList.eq(currentIndex + 1);
            const $button = $targetLi.find('button');

            $targetLi.addClass('on');
            $searchInput.val($button.val());

            originalKeyboardOnIndex = currentIndex + 1;
          }
        }, KEY_RETURN_TIME);
      } else if (key == KEYCODE.ENTER || key == 'Enter') {
        setTimeout(function () {
          $recommendSearch.removeClass('on');
        }, KEY_RETURN_TIME);
      } else if (key == KEYCODE.ESC || key == 'Escape') {
        setTimeout(function () {
          $recommendSearch.removeClass('on');
        }, KEY_RETURN_TIME);
      } else {
        var word = $(this).val().trim();

        if (word.length == 0) {
          $recommendSearch.removeClass('on');
          $keywordClear.hide();
          return;
        }

        $keywordClear.show();
        getKeyword(word);
      }
    });

    $searchForm.on('submit', function (e) {
      e.preventDefault();

      const keyword = $searchInput.val().trim();
      if (!keyword) {
        alert('검색어를 입력해 주세요.');
        return;
      }
      location.href = '/news/pc/search/search.do?query=' + encodeURIComponent(keyword);
    });

    $keywordClear.on('click', handleValueClear); // 클리어 버튼 클릭
  }

  function getKeyword(word) {
    originalSearchWord = word;
    const url = `https://reco.kbs.co.kr/v2/search/autocomplete?target=autocomplete_news&keyword=${word}&page=1&page_size=10`;
    $.get(url).done(function (res) {
      $recommendSearch.find('.recommend-search-list').remove();
      if (res.data.length > 0) {
        displayKeyword(res.data);
      }
    });
  }

  function displayKeyword(data) {
    for (var i = 0; i < data.length; i++) {
      // <li> 태그 생성
      var $li = document.createElement('li');
      $li.className = 'recommend-search-list';

      // <button> 태그 생성
      var $button = document.createElement('button');
      $button.setAttribute('type', 'button');
      $button.setAttribute('value', data[i].keyword_raw);
      $button.setAttribute('aria-label', '추천어 버튼');
      $button.className = 'recommend-word';

      var keyword = data[i].keyword;
      $button.innerHTML = keyword;

      $li.appendChild($button);
      $recommendSearch.append($li);
    }

    originalKeyboardOnIndex = -1;

    $recommendSearch.addClass('on');

    const $keywordButtons = $recommendSearch.find('.recommend-word');
    $keywordButtons.off('click').on('click', function (e) {
      const keyword = $(this).val();
      const $wrapper = $('.header-nav-wrapper .search-box');
      const $searchInput = $wrapper.find('.search-box-input');
      $searchInput.val(keyword);
      $searchForm.submit();
    });

    const $keywordList = $recommendSearch.find('.recommend-search-list');
    $keywordList.off('mouseenter').on('mouseenter', function (e) {
      $keywordList.removeClass('on');
      $(this).addClass('on');
    });

    $keywordList.on('mouseleave', function (e) {
      // 모든 <li>에서 마우스가 떠났는지 확인
      if ($recommendSearch.find('li:hover').length == 0) {
        $keywordList.removeClass('on');
        if (originalKeyboardOnIndex != -1) {
          $keywordList.eq(originalKeyboardOnIndex).addClass('on');
        }
      }
    });
  }

  function handleValueClear() {
    $keywordClear.hide();
    $recommendSearch.removeClass('on');
    $searchInput.val('');
    $searchInput.focus();
    $recommendSearch.find('.recommend-search-list').remove();
  }
})();

</script>

          <div class="recommend-keyword">
            <div class="title-wrapper">
              <p class="title">추천 인기 키워드</p>
              <p class="desc">
                현재 관심이 높아지고 있는 키워드 입니다.
              </p>
            </div>
            <ul class="keywords">
              <li class="keyword-list">
                <a href="" class="keyword-link" aria-label="키워드 링크"></a>
              </li>
            </ul>
          </div>
        </div>
        <button
          type="button"
          class="close-btn"
          aria-label="검색 화면 닫기 버튼"
        ></button>
      </div>
    </div>

    <div class="most-view-wrapper">
      <div class="most-view">
        <p class="most-view-title">많이 본 뉴스</p>
        <ul class="ranks">
          <li class="ranks-list">
            <a class="ranks-link" href="" aria-label="많이 본 뉴스 링크">
              <div class="thumbnail">
                <img
                  src=""
                  alt=""
                  class="thumbnail-img"
                  onerror="javascript:handleError(this);"
                />
                <span></span>
                <span class="rank-badge">1</span>
              </div>
              <p class="title"></p>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <!-- 프로그레스바 -->
  <div class="progress-bar"></div>

</div>

<script type="text/javascript">
  $(function () {
    // 많이 본 뉴스 불러오기
    getHeaderManyWatchingKbsNews();

    getTagData();

    getWordCloud();
});

// 검색영역 많이 본 뉴스
function getHeaderManyWatchingKbsNews() {
    getExposeData(329, getParameterByName('pubExec'), function (data) {
        if (data.length > 0) {
            for (var i = 0; i < Math.min(data.length, 6); i++) {
                var $li = $('.most-view-wrapper ul li').first().clone();
                $li.find('a').attr('href', data[i].url);
                $li.find('.thumbnail span.rank-badge').text(i + 1);
                $li.find('img').attr('src', data[i].imgUrl).attr('alt', data[i].title);
                if (data[i].vodUrl) {
                    $li.find('img').next('span').addClass('play-icon');
                }
                $li.find('p.title').text(data[i].title)

                $('.most-view-wrapper ul').append($li);
            }
            $('.most-view-wrapper ul li').first().remove();
        }
    });
}

function getTagData() {
    getExposeData(867, getParameterByName('pubExec'), function (data) {
        if (data.length > 0) {
            for (var i = 0; i < data.length; i++) {
                var $li = $('.header-nav ul.hashtag-links li').first().clone();

                // 헤더 태그 html 태그 제거
                var tag = (data[i].title).split('<span>').join('').split('</span>').join('');

                $li.find('a').text(tag).attr('href', data[i].url);
                $('.header-nav ul.hashtag-links').append($li);
            }
        }
        $('.header-nav ul.hashtag-links li').first().remove();
    });
}

function getWordCloud() {
    var $btn = document.querySelector(".hamburger-search-btns .search-btn");
    if ($btn) {
        $btn.addEventListener("click", function () {
            $.get('/expose/wordcloud.json', function (data) {
                var keys = Object.keys(data).map(function (key) {
                    return parseInt(key, 10);
                });
    
                var latestKey = Math.max.apply(null, keys);
                var latestData = data[latestKey];
    
                if (latestData !== undefined && latestData !== null) {
                    var sortedKeys = Object.entries(latestData)
                        .sort(function (a, b) {
                            return b[1] - a[1];
                        })
                        .map(function (item) {
                            return item[0];
                        });
        
                    for (var i = 0; i < Math.min(sortedKeys.length, 7); i++) {
                        var $li = $('ul.keywords li').first().clone();
                        $li.find('a').text('# ' + sortedKeys[i]);
                        $li.find('a').attr('href', "/news/pc/search/search.do?query=" + sortedKeys[i]);
                        $('ul.keywords').append($li);
                    }
                    $('ul.keywords li').first().remove();
                }
            });
        }, {once:true});
    }
}

function hamburgerClick() {
    var $btn = document.querySelector(".hamburger-btn");
    var $navMenu = document.querySelector(".header-nav");
    var $fullMenu = document.querySelector(".full-menu-wrapper");
    var $navLinks = document.querySelectorAll(".nav-link");
    var $commonMenues = document.querySelectorAll(".common-menu");

    var $dim = document.querySelector(".dim");
    var $body = document.querySelector("body");

    if ($dim) {

        if ($btn.classList.contains("on")) {
            $btn.classList.remove("on");
            $navMenu.classList.remove("on");
            $fullMenu.classList.remove("on");
            $dim.classList.remove("on");
            $body.classList.remove("hidden");
            $navLinks.forEach(function ($navLink) {
                $navLink.classList.remove("on");
            });
            $commonMenues.forEach(function ($commonMenu) {
                $commonMenu.classList.remove("on");
            });
        } else if (!$btn.classList.contains("on")) {
            $btn.classList.add("on");
            $navMenu.classList.add("on");
            $fullMenu.classList.add("on");
            $dim.classList.add("on");
            $body.classList.add("hidden");
            $body.classList.add("on");
        }
    }
}
</script>

  <div class="disaster-rolling-wrapper" style="display: none;">
    <div class="disaster-rolling">
        <div class="swiper disaster-rolling-swiper">
            <ul class="swiper-wrapper">
                <li class="swiper-slide disaster-rolling-list">
                    <p class="rolling-message">
                    </p>
                </li>
            </ul>
        </div>
        <button type="button" class="arrow-btn" aria-label="재난문자 펼침 버튼"></button>
    </div>
</div>

<script type="text/javascript">
    $(function () {
    //867.html script
    getExposeData(863, getParameterByName('pubExec'), function (data, status) {
        var list863 = data;

        if (list863[0].url != "1111") {
            $(".disaster-rolling-wrapper").css('display', 'none');
            isHeaderDisasterLoaded = true;
            return;
        } else {
            $('.disaster-rolling-wrapper').css('display', '');
            $('.rolling-message').html(list863[1].contents);
            var arr = list863[1].contents.split("\n");
            for (var i = 0; i < arr.length; i++) {
                var $li = $('.disaster-rolling-wrapper ul li').first().clone();
                $li.find('p').text(arr[i]);
                if (list863[0].subTitle != null && list863[0].subTitle) {
                    var $span = $("<span class='caution'></span>").text(list863[0].subTitle);
                    $li.find('p').prepend($span);

                }
                $('.disaster-rolling-wrapper ul').append($li);
            }

            $('.disaster-rolling-wrapper ul li').first().remove();

            headerUi.disasterRolling();

            isHeaderDisasterLoaded = true;
        }
    }, globalErrorHandler);
});

</script>


  <div class="header-notice-wrapper" style="display: none;">
    <div class="header-notice">
        <p class="notice-title">공지사항</p>
        <a href="/news/pc/popup/notice.html" target="_blank"  class="notice-txt" aria-label="공지사항 링크"></a>
    </div>
</div>

<script>
    $(function () {
    getExposeData('notice', getParameterByName('pubExec'), function (data) {
        if (data.noticeTop == 'Y') {
            $('.header-notice-wrapper').css("display", '');
            $('.header-notice-wrapper a.notice-txt').text(data.noticeTitle);
        }

        isHeaderNoticeLoaded = true;

        if (data.noticeBottom == 'Y') {
            $('.footer-notice-wrapper').css("display", '');
            $('.footer-notice-wrapper a').text(data.noticeTitle);
        }
    });
});

</script>
</header>

<script type="text/javascript">
  $(function () {
    setDate();

    if (isMobile() && getParameterByName('mode') != 'pc') {
        var currentURL = window.location.href;
        var mobileURL = currentURL.replace('/pc/', '/mobile/');
        location.href = mobileURL;
    }

    var link = document.location.href;
    var newsURL = "https://news.kbs.co.kr/news/pc/main/main.html";

    $('#login_id').prop('href', "https://sso.kbs.co.kr/SSO/KBSWeb/Logon.php?from_url=" + link);
    $('#register_id').prop('href', "https://sso.kbs.co.kr/SSO2/KBSWeb/member/MemberJoin00SN.php?from_url=" + newsURL);

    logonCheck();
    
    getAllLocalWeatherInfo(function (data) {
        if (data.length > 0) {
            for (var i = 0; i < data.length; i++) {
                var weather = data[i];
                var $li = $('.weather-login-menu .weather ul li').first().clone();

                if (weather.icon != '-') {
                    $li.find('img').attr('src', '/resource/image/pc/weather/dark/' + weather.icon + '.png').attr('alt', weather.icon);
                }
                $li.find('img').onerror = function () {
                    this.style.display = 'none';
                };
                $li.find('span.city-name').text(weather.localName);
                $li.find('span.temperature').text(weather.temperature+'℃');
                $li.find('span.weather-info').text(weather.weatherText);
                $('.weather-login-menu .weather ul').append($li);
            }

            $('.weather-login-menu .weather ul li').first().remove();

            headerUi.weatherRolling();
        } else {
            $('.weather-login-menu .weather ul').remove();
        }
    }, function (error) {
        $('.weather-login-menu .weather ul').remove();
    });

    getDisasterShortText();

    getMainAnniversaryDays();
});

function setDate() {
    const today = dayjs().locale('ko').format('YYYY.MM.DD dddd');
    $('.weather-login-menu .today').text(today);
}

// 숫자가 10 미만이면 앞에 '0'을 붙이는 함수
function padWithZero(num) {
    if (num < 10) {
        return '0' + num;
    }
    return num.toString();
}

function getDisasterShortText() {
    getExposeData('disasterShortText', getParameterByName('pubExec'), function (data) {
        var $link = $("#disaster-portal-link");
        var $links = $("#disaster-portal-link a");
        var $a = $links.last().clone();
        $links.last().remove();

        if (data.exposeYN === "Y" && data.disasterShortText) {
            $a.text(data.disasterShortText).attr("href", data.disasterShortTextURL);
            $a.attr('target', '_blank');
            $link.append($a);
        } else {
            $link.addClass('single-siren')
        }
    });
}

function getMainAnniversaryDays() {
    getExposeData('mainAnniversaryDays', getParameterByName('pubExec'), function (data) {
        var koreaDate = dayjs(getKoreaTime()).format("YYYYMMDDHHmmss");

        for (var i = 0; i < data.length; i++) {
            if (data[i].startDateTime <= koreaDate && koreaDate <= data[i].endDateTime) {
                $(".header-logo-link").addClass(data[i].className);
                break;
            }
        }
    })
}
</script>

  <main id="contents" class="has-live-wrapper">
    <script type="text/javascript" src="/resource/module/jwplayer-8.27.1/jwplayer.js" ></script>
<script type="text/javascript">
    jwplayer.key="UsFIIKTGG5dCwbpy/MFAeh8gCKNka+06Oi4PBaWF2/Rz/nk/";
</script>

<div id="live-area" class="breaking-news-video-area header-live-wrapper pd0 main-live" style="display: none">
	<div class="header-live on">
		<div class="live-video component-box live" id="live-on-air-vod" style="display: none">
			<div class="media video on" id="JW-PLAYER-LIVE"> <span class="img-box"> <span class="img-thum"> <span class="img-center"> </span> </span> </span> </div>
			<div class="txt-wrapper">
				<div class="live-txt">
					<p class="red-txt">LIVE</p>
					<span class="red-dot"></span>
				</div>
				<a class="title" href="#" aria-label="라이브 뉴스 링크"></a>
			</div>
		</div>
		<button type="button" class="arrow-btn" aria-label="라이브 방송 펼침 버튼"></button>
	</div>
</div>

<script type="text/javascript">
	var _liveOnAir_timer = null;
var liveOnAirPlay = false;
var liveVodItem = null;

$(document).ready(function () {
  var link = window.location.href;

  startLiveOnAirVodTimer();
});

//주기적으로 스크립트를 재호출하는 타이머를 작동시킨다. 30초에 한번씩
function startLiveOnAirVodTimer() {
  clearTimeout(_liveOnAir_timer); // clear timer

  getExposeData(
    '870',
    getParameterByName('pubExec'),
    function (data, status) {
      if (data[1].subTitle != '1111') {
        $('#live-area').hide();
        isLiveNewsLoaded = true;
        return;
      }

      var state = localStorage.getItem('dlive-state');
      var endTimeStr = localStorage.getItem('dlive-end-time');
      var currentDate = dayjs().format('YYYYMMDDHHmm');

      if (state !== '' && state !== 'true' && endTimeStr && dayjs(endTimeStr, 'YYYYMMDDHHmm').valueOf() >= dayjs(currentDate, 'YYYYMMDDHHmm').valueOf()) {
        $('.header-live').removeClass('on');
      }

      setLiveOnAirBar(data[0]);
    },
    function () {}
  );

  _liveOnAir_timer = setTimeout('startLiveOnAirVodTimer()', 30000); // timer-on : 10000 - 10s  , 5000 - 5s
}

function setLiveOnAirBar(data) {
  var barState = $('#live-area').attr('status');

  var currentDate = new Date();
  var iCurrentDate = parseInt(currentDate.format('yyyyMMddHHmm'));
  var startTime = data.subTitle;
  var endTime = data.subUrl;
  var vodTitle = '';
  var vodNewsUrl = '';
  var vodYn = '';
  var imgYn = '';
  var imgUrl = '';
  var liveGubun = '';
  var vod_url = '';
  var current = dayjs(getKoreaTime());
  var start = dayjs(startTime, 'YYYYMMDDHHmm');
  var end = dayjs(endTime, 'YYYYMMDDHHmm');

  if (current.isAfter(start) && current.isBefore(end)) {
    vodTitle = data.title;
    vodNewsUrl = data.url;
    vodYn = 'Y';
    imgYn = 'Y';
    imgUrl = data.imgUrl;
    liveGubun = data.imgDesc;
    vod_url = data.vodUrl;
    vodNewsUrl = data.url;

    if (liveGubun == '24news') vodNewsUrl = '/news/news24.do';

    if (barState == 'mini') {
      $('#JW-PLAYER-LIVE').hide();
      if (vodNewsUrl != null && vodNewsUrl != '') {
        $('#live-on-air-vod').find('a').attr('href', vodNewsUrl);
        if (liveGubun == 'youtube') {
          $('#live-on-air-vod').find('a').attr('target', '_blank');
        }
      }
      $('#live-on-air-vod').find('.title').text(vodTitle);
    } else {
      // $("#JW-PLAYER-LIVE").show();
      $('#JW-PLAYER-LIVE img').attr('src', imgUrl);
      $('#JW-PLAYER-LIVE img').attr('alt', vodTitle);

      if (vodNewsUrl != null && vodNewsUrl != '') {
        $('#live-on-air-vod').find('a').attr('href', vodNewsUrl);
        if (liveGubun == 'youtube') {
          $('#live-on-air-vod').find('a').attr('target', '_blank');
        }
      }
      $('#live-on-air-vod').find('.title').text(vodTitle);

      if (vodYn == 'Y') {
        playVod_live(liveGubun, vod_url);
      }
    }

    localStorage.setItem('dlive-end-time', endTime);
    $('#live-on-air-vod').show();
    $('#live-area').show();

    isLiveNewsLoaded = true;
  } else {
    if (navigator.cookieEnabled) {
      if (typeof localStorage !== 'undefined') {
        localStorage.removeItem('dlive-state');
        localStorage.removeItem('dlive-end-time');
      }
    }
    $('#live-on-air-vod').hide();
    $('#live-area').hide();

    isLiveNewsLoaded = true;
  }
}

function getCDN(vod_url) {
  $.ajax({
    url: application.rootUrlPrefix + '/api/getNews24VodUrlNew',
    type: 'POST',
    async: false,
    data: { cdnVodUrl: vod_url },
    dataType: 'json',
    success: function (data, status) {
      vodUrl = data.ontime;
    },
    error: function (request, status, error) {
      vodUrl = null;
    },
  });

  if (isEmpty(vodUrl)) {
    popAlert('E', '정보를 가지고 오는데 실패하였습니다.');
    return null;
  }

  return vodUrl;
}

function getNoAuth(vod_url) {
  var noAuthHtml = vod_url;
  $('#JW-PLAYER-LIVE').empty(); //초기화
  /*youtoube api function end*/
  if (noAuthHtml.indexOf('youtube') > -1) {
    $.getScript('https://www.youtube.com/iframe_api', function () {
      loadVideo(vod_url);
    });
  } else if (noAuthHtml.indexOf('iframe') > -1) {
    $('#JW-PLAYER-LIVE').append(noAuthHtml); //iframe 삽입
    var iframeSrc = $('#JW-PLAYER-LIVE').find('iframe').attr('src');
    $('#JW-PLAYER-LIVE').find('iframe').attr('src', iframeSrc);
    $('#JW-PLAYER-LIVE').find('iframe').width(210);
    $('#JW-PLAYER-LIVE').find('iframe').height(118);
  } else {
    //외부 스트리밍 주소
    //https://www.radiantmediaplayer.com/media/bbb-360p.mp4
  }
}

function loadVideo(vod_url) {
  var oParams = getUrlParams(vod_url);
  var youtubeId = oParams.v;
  var player;
  var done = false;
  window.YT.ready(function () {
    player = new window.YT.Player('JW-PLAYER-LIVE', {
      height: '118',
      width: '210',
      videoId: youtubeId,
      playerVars: { autoplay: 1, controls: 0, 'disablekb:': 1, 'fs:': 0, 'modestbranding:': 1 },
      events: {
        onReady: onPlayerReady,
      },
    });
  });

  function onPlayerReady(event) {
    event.target.setVolume(0);
    event.target.playVideo();
  }
}

function getUrlParams(urls) {
  var params = {};
  urls.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (str, key, value) {
    params[key] = value;
  });
  return params;
}

/*youtoube api function end*/

function playVod_live(liveGubun, vod_url) {
  var vodUrl = null;
  var img_url = '';
  if (liveGubun == '24news') {
    vodUrl = getKBSLiveStreamUrl();
    img_url = '/resource/image/common/24_news.png';
  } else if (liveGubun == '1tv') {
    vodUrl = getKBSLiveStreamUrl('1tv');
  } else if (liveGubun == '2tv') {
    vodUrl = getKBSLiveStreamUrl('2tv');
  } else if (liveGubun == 'dokdo') {
    vodUrl = getKBSLiveStreamUrl('dokdo');
  } else if (liveGubun == 'youtube') {
    getNoAuth(vod_url); //20191107
    return;
  } else if (liveGubun == 'cctv') {
    vodUrl = getCDN(vod_url);
  } else if (liveGubun == 'etc') {
    vodUrl = vod_url;
  }

  if (vodUrl == null) return;

  var vodParam = {
    playlist: [
      {
        skin: 'kbs',
        image: img_url,
        file: vodUrl,
      },
    ],
    autostart: 'true', //자동시작
    mute: 'true',
    controls: 'false',
    height: 118,
    width: 210,
  };

  liveOnAirPlay = true;
  jwPlayerPlay(vodParam, 'JW-PLAYER-LIVE'); //동영상 재생
}

	var jwplayerStartTime;
var jwplayerEndTime;
var jwplayerPauseStartTime = null;
var jwplayerPausedTime = 0;
var jwplayerWatchTime = 0;
var jwplayerIntervalId;
var jwplayerStateCode = 'S';
var jwplayerFirstStart = true;

$(window).on('unload', function () {
    clearInterval(jwplayerIntervalId);

    var playerId = null;
    var param4 = 'on air';
    if (location.href.indexOf('ncd') > 0) {
        param4 = getParameterByName('ncd');
    }

    if ($('.landing-box').find('#JW_PLAYER').length > 0) {
        playerId = 'JW_PLAYER';
    } else {
        playerId = $('.landing-box').find('.jwplayer').attr('id');
    }

    if (!isEmpty(playerId) && jwplayerStateCode !== 'C') {
        jwplayerStateCode = 'B';
        jwplayerFirstStart = true;
        jwplayerPausedTime = 0;
        sendVodWatchLog(param4, playerId);
    }
});

var getKBSHlsVodUrlList = function (vodUrl) {
    if (isEmpty(vodUrl)) {
        return null;
    }

    // CDN 조회
    var cdnYn = 'N', duty = 'N', blockingYn = 'N';

    if (vodUrl.indexOf('|') == 0) {
        var vodInfos = vodUrl.split('|');
        duty = vodInfos[1];
        cdnYn = vodInfos[2];
        blockingYn = vodInfos[3];
        vodUrl = vodInfos[4];
    }

    cdnYn = 'Y';	//무조건 cdn으로 실행

    if (vodUrl.indexOf("/") == 0) {
        vodUrl = vodUrl.substr(1);
    }

    if (duty.indexOf('^') >= 0) {
        var dutyInfos = duty.split('^');

        dutyYn = dutyInfos[0];

        if (dutyYn == 'Y') {
            return null;
        }
    }

    if ("Y" == blockingYn) {
        var blocking = '';
        $.ajax({
            url: application.rootUrlPrefix+ '/api/getIpInfo',
            type: "POST",
            async: false,
            dataType: 'json',
            success: function (data, status) {
                if (!isEmpty(data.isAbroadIp)) {
                    blocking = data.isAbroadIp; //해외 IP 확인
                }
            },
            error: function (request, status, error) {
                blocking = 'N';
            }
        });
        if ("N" == blocking) {
            return null;
        }
    }

    var vodExt = vodUrl.substring(vodUrl.length - 3);

    var hlsUrl = null;

    if (cdnYn == 'Y') {
        $.ajax({
            url: application.rootUrlPrefix+ '/api/getHlsNewsVodUrl',
            type: "POST",
            async: false,
            dataType: 'json',
            data: {vodUrl: vodUrl},
            success: function (data, status) {
                if (data && data.success) {
                    hlsUrl = data.data.streamUrl;
                } else {
                    hlsUrl = null;
                    // alert(data.message);
                }

            },
            error: function (request, status, error) {
                hlsUrl = null;
                // popAlert('E', 'VOD Url 정보를 가지고 오는데 실패하였습니다. >> ['+error+']');
            }
        });
    }

    return hlsUrl;
};

var getKBSHlsVodUrl = function (vodUrl) {
    if (isEmpty(vodUrl)) {
        popAlert('E', 'VOD URL 정보가 없습니다!.');
        return null;
    }

    var cdnYn = 'N', duty = 'N', blockingYn = 'N';

    if (vodUrl.indexOf('|') == 0) {
        var vodInfos = vodUrl.split('|');
        duty = vodInfos[1];
        cdnYn = vodInfos[2];
        blockingYn = vodInfos[3];
        vodUrl = vodInfos[4];
    }

    cdnYn = 'Y';	//무조건 cdn으로 실행

    if (duty.indexOf('^') >= 0) {

        var dutyInfos = duty.split('^');
        dutyYn = dutyInfos[0];

        if (dutyYn == 'Y') {
            duty_code = dutyInfos[1];

            if (!isEmpty(duty_code)) {
                var dutyMsg = '';

                $.ajax({
                    url: application.contextPath + '/news/getVodDutyCodeMsg.do',
                    type: "POST",
                    async: false,
                    dataType: 'json',
                    data: {dutyCode: duty_code},
                    success: function (data, status) {
                        if (!isEmpty(data.dutyMsg) && data.dutyMsg.resultcode == 1) {
                            dutyMsg = data.dutyMsg.duty_msg;
                        } else {
                            dutyMsg = '저작권 관련 서비스 사용이 불가합니다.';
                        }
                    },
                    error: function (request, status, error) {
                        dutyMsg = '저작권 관련 서비스 사용이 불가합니다.';
                    }
                });

                popAlert('I', dutyMsg);
                return null;
            }
        }
    } else {
        dutyYn = duty;
    }

    if (dutyYn == 'Y') {
        popAlert('I', '저작권 관련 서비스 사용이 불가합니다.');
        return null;
    }

    if ("Y" == blockingYn) {
        var blocking = '';

        $.ajax({
            url: application.rootUrlPrefix+ '/api/getIpInfo',
            type: "POST",
            async: false,
            dataType: 'json',
            success: function (data, status) {
                if (!isEmpty(data.isAbroadIp)) {
                    blocking = data.isAbroadIp; //해외 IP 확인
                }
            },
            error: function (request, status, error) {
                blocking = 'N';
            }
        });

        if ("N" == blocking) {
            popAlert('I', '저작권 관련 서비스 사용이 불가합니다.');
            return;
        }
    }

    // VOD URL 조회
    if (isEmpty(vodUrl)) {
        popAlert('E', 'VOD URL 정보가 없습니다.');
        return null;
    }

    if (vodUrl.indexOf("/") == 0) {
        vodUrl = vodUrl.substr(1);
    }

    var vodExt = vodUrl.substring(vodUrl.length - 3);

    var hlsUrl = null;

    if (cdnYn == 'Y') {
        $.ajax({
            url: application.rootUrlPrefix+ '/api/getHlsNewsVodUrl',
            type: "POST",
            async: false,
            dataType: 'json',
            data: {vodUrl: vodUrl},
            success: function (data, status) {
                if (data.success) {
                    hlsUrl = data.data.streamUrl;
                } else {
                    hlsUrl = null;
                    alert(data.message);
                }

            },
            error: function (request, status, error) {
                hlsUrl = null;
                popAlert('E', 'VOD Url 정보를 가지고 오는데 실패하였습니다. >> [' + error + ']');
            }
        });
    }

    return hlsUrl;
};

var getKBSLiveStreamUrl = function (channel) {
    var vodUrl = null;
    if (channel == null) {
        channel = "news24";
    }

    $.ajax({
        url: application.rootUrlPrefix + '/api/getNewsLiveStreamUrl',
        type: "POST",
        async: false,
        data: {channel: channel},
        dataType: 'json',
        success: function (data, status) {
            vodUrl = data.data.streamUrl;
        },
        error: function (request, status, error) {
            vodUrl = null;
        }
    });

    if (isEmpty(vodUrl)) {
        popAlert('E', '정보를 가지고 오는데 실패하였습니다.');
        return null;
    }

    return vodUrl;
};

var getKBS24VodUrlNew = function () {
    var cdn_vod_url = "";
    if (navigator.appVersion.indexOf("iPhone") > -1 || navigator.appVersion.indexOf("iPad") > -1) {
        cdn_vod_url = "http://news24kbs-2.gscdn.com/sec_news24_300/_definst_/sec_news24_300.stream/playlist.m3u8";
    } else if (navigator.appVersion.indexOf("Android") != -1) {
        cdn_vod_url = "http://news24kbs-2.gscdn.com/sec_news24_300/_definst_/sec_news24_300.stream/playlist.m3u8";
    } else if (navigator.appVersion.indexOf("Safari") > -1) {
        cdn_vod_url = "http://news24kbs-2.gscdn.com/sec_news24_300/_definst_/sec_news24_300.stream/playlist.m3u8";
    } else if (navigator.appVersion.indexOf("Chrome") > -1) {
        cdn_vod_url = "http://news24kbs-2.gscdn.com/sec_news24_800/_definst_/sec_news24_800.stream/playlist.m3u8";
    } else if (navigator.appName.indexOf("Netscape") > -1) {
        cdn_vod_url = "http://news24kbs-2.gscdn.com/sec_news24_800/_definst_/sec_news24_800.stream/playlist.m3u8";
    } else if (navigator.appVersion.indexOf("Trident/7.0") > -1 && navigator.appVersion.indexOf("rv:11") > -1) {
        cdn_vod_url = "http://news24kbs-2.gscdn.com/sec_news24_800/_definst_/sec_news24_800.stream/playlist.m3u8";
    } else {
        cdn_vod_url = "rtmp://news24kbs-2.gscdn.com/news24_home_800/_definst_/news24_home_800.stream";
    }

    var vodUrl = null;
    var vodAuth = "";
    $.ajax({
        url: application.rootUrlPrefix+ '/api/getNews24VodUrlNew.do',
        type: "POST",
        async: false,
        data: {cdnVodUrl: cdn_vod_url},
        dataType: 'json',
        success: function (data, status) {
            vodUrl = data.ontime;
        },
        error: function (request, status, error) {
            vodUrl = null;
        }
    });

    if (isEmpty(vodUrl)) {
        popAlert('E', '정보를 가지고 오는데 실패하였습니다.');
        return null;
    }

    return vodUrl;
};

var getKBS1TvVodUrl500 = function () {
    var cdn_vod_url = "http://hls.live.kbskme.gscdn.com/www_1tv/_definst_/1tv_3.stream/playlist.m3u8";

    var vodUrl = null;
    var vodAuth = "";
    $.ajax({
        url: application.rootUrlPrefix+ '/api/getNews24VodUrlNew.do',
        type: "POST",
        async: false,
        data: {cdnVodUrl: cdn_vod_url},
        dataType: 'json',
        success: function (data, status) {
            vodUrl = data.ontime;
        },
        error: function (request, status, error) {
            vodUrl = null;
        }
    });

    if (isEmpty(vodUrl)) {
        popAlert('E', '정보를 가지고 오는데 실패하였습니다.');
        return null;
    }

    return vodUrl;
};

var getKBS1TvVodUrl1500 = function () {
    var cdn_vod_url = "http://hls.live.kbskme.gscdn.com/www_1tv/_definst_/1tv_5.stream/playlist.m3u8";

    var vodUrl = null;
    var vodAuth = "";
    $.ajax({
        url: application.rootUrlPrefix+ '/api/getNews24VodUrlNew.do',
        type: "POST",
        async: false,
        data: {cdnVodUrl: cdn_vod_url},
        dataType: 'json',
        success: function (data, status) {
            vodUrl = data.ontime;
        },
        error: function (request, status, error) {
            vodUrl = null;
        }
    });

    if (isEmpty(vodUrl)) {
        popAlert('E', '정보를 가지고 오는데 실패하였습니다.');
        return null;
    }

    return vodUrl;
};

var getKBSVodUrl = function (_vodUrl) {
    var vodUrl = _vodUrl;

    if (isEmpty(vodUrl)) {
        popAlert('E', 'VOD URL 정보가 없습니다!.');
        return null;
    }

    var cdnYn = 'N', duty = 'N', blockingYn = 'N';

    if (vodUrl.indexOf('|') == 0) {
        var vodInfos = vodUrl.split('|');
        duty = vodInfos[1];
        cdnYn = vodInfos[2];
        blockingYn = vodInfos[3];
        vodUrl = vodInfos[4];
    }
    //cdnYn = 'N' VOD 전환
    cdnYn = 'Y';	//무조건 cdn으로 실행

    if (duty.indexOf('^') >= 0) {
        var dutyInfos = duty.split('^');
        dutyYn = dutyInfos[0];
        if (dutyYn == 'Y') {
            duty_code = dutyInfos[1];
            if (!isEmpty(duty_code)) {
                var dutyMsg = '';

                $.ajax({
                    url: application.rootUrlPrefix+ '/api/getVodDutyCodeMsg.do',
                    type: "POST",
                    async: false,
                    dataType: 'json',
                    data: {dutyCode: duty_code},
                    success: function (data, status) {
                        if (!isEmpty(data.dutyMsg) && data.dutyMsg.resultcode == 1) {
                            dutyMsg = data.dutyMsg.duty_msg;
                        } else {
                            dutyMsg = '저작권 관련 서비스 사용이 불가합니다.';
                        }
                    },
                    error: function (request, status, error) {
                        dutyMsg = '저작권 관련 서비스 사용이 불가합니다.';
                    }
                });

                popAlert('I', dutyMsg);
                return null;
            }
        }
    } else {
        dutyYn = duty;
    }

    if (dutyYn == 'Y') {
        popAlert('I', '저작권 관련 서비스 사용이 불가합니다.');
        return null;
    }

    if ("Y" == blockingYn) {
        var blocking = '';

        $.ajax({
            url: application.rootUrlPrefix+ '/api/getBlockingIp.do',
            type: "POST",
            async: false,
            dataType: 'json',
            success: function (data, status) {
                if (!isEmpty(data.blocking) && data.blocking.resultcode == 1) {
                    blocking = data.blocking.blockingYn;
                }
            },
            error: function (request, status, error) {
                blocking = 'N';
            }
        });

        if ("N" == blocking) {
            popAlert('I', '저작권 관련 서비스 사용이 불가합니다.');
            return;
        }
    }

    // VOD URL 조회
    if (isEmpty(vodUrl)) {
        popAlert('E', 'VOD URL 정보가 없습니다.');
        return null;
    }

    if (vodUrl.indexOf("/") == 0) {
        vodUrl = vodUrl.substr(1);
    }

    var vodExt = vodUrl.substring(vodUrl.length - 3);

    //logPrint( vodUrl + ' // ' + vodExt );
    var cdn_main_url = "newsvod.kbsmp4.kbs.gscdn.com/newsvod/_definst_/" + vodExt + ":";
    var cdn_vod_url = "";
    if (navigator.appVersion.indexOf("iPhone") > -1 || navigator.appVersion.indexOf("iPad") > -1) {
        cdn_vod_url = "http://" + cdn_main_url + vodUrl + "/playlist.m3u8";
        vodUrl = "http://mobilenews.kbs.co.kr:1935/news/_definst_/" + vodExt + ":" + vodUrl + "/playlist.m3u8";
    } else if (navigator.appVersion.indexOf("Android") != -1) {
        cdn_vod_url = "http://" + cdn_main_url + vodUrl + "/playlist.m3u8";
        vodUrl = "http://mobilenews.kbs.co.kr:1935/news/_definst_/" + vodExt + ":" + vodUrl + "/playlist.m3u8";
    } else if (navigator.appVersion.indexOf("Safari") > -1) {
        cdn_vod_url = "http://" + cdn_main_url + vodUrl + "/playlist.m3u8";
        vodUrl = "http://mobilenews.kbs.co.kr:1935/news/_definst_/" + vodExt + ":" + vodUrl + "/playlist.m3u8";
    } else if (navigator.appVersion.indexOf("Trident/7.0") > -1 && navigator.appVersion.indexOf("rv:11") > -1) {
        cdn_vod_url = "http://" + cdn_main_url + vodUrl + "/playlist.m3u8";
        vodUrl = "http://mobilenews.kbs.co.kr:1935/news/_definst_/" + vodExt + ":" + vodUrl + "/playlist.m3u8";
    } else if (navigator.appName.indexOf("Netscape") > -1) {
        cdn_vod_url = "http://" + cdn_main_url + vodUrl + "/playlist.m3u8";
        vodUrl = "http://mobilenews.kbs.co.kr:1935/news/_definst_/" + vodExt + ":" + vodUrl + "/playlist.m3u8";
    } else {
        cdn_vod_url = "rtmp://" + cdn_main_url + vodUrl;
        vodUrl = "rtmp://newsvod.kbs.co.kr/news/_definst_/" + vodExt + ":" + vodUrl;
    }

    //logPrint( vodUrl + ' // ' + vodExt );

    if (cdnYn == 'Y') {
        vodUrl = null;
        $.ajax({
            url: application.rootUrlPrefix+ '/api/getHlsNewsVodUrl',
            type: "POST",
            async: false,
            dataType: 'json',
            data: {vodUrl: (_vodUrl[0] == '/' ? _vodUrl.substring(1) : _vodUrl)},
            success: function (data, status) {
                if (data.success) {
                    vodUrl = data.data.streamUrl;
                } else {
                    vodUrl = null;
                    alert(data.message);
                }
            },
            error: function (request, status, error) {
                vodUrl = null;
                popAlert('E', 'VOD Url 정보를 가지고 오는데 실패하였습니다. >> [' + error + ']');
            }
        });
    }

    return vodUrl;
};

var getPlayBtnNm = function (vodUrl, isMobile, btnImg) {
    var duty = 'N', blockingYn = 'N', cdnYn = '';
    var playBtnImg = "";
    if (!isEmpty(btnImg)) {
        playBtnImg = btnImg;
    }
    if (isEmpty(vodUrl)) {
        return btnImg;
    }

    var blYn = false;
    if (vodUrl.indexOf('|') == 0) {
        var vodInfos = vodUrl.split('|');
        duty = vodInfos[1];
        cdnYn = vodInfos[2];
        blockingYn = vodInfos[3];
    }

    if (duty.indexOf('^') >= 0) {
        var dutyInfos = duty.split('^');

        dutyYn = dutyInfos[0];

        if (dutyYn == 'Y') {
            if (!isEmpty(dutyInfos[1])) {
                duty_code = dutyInfos[1];
            } else {
                duty_code = '3';
            }

            switch (duty_code) {
                case '1':
                    playBtnImg = application.resourcesPath + "/images/common/btn_duty_code1.png";
                    break;
                case '2':
                    playBtnImg = application.resourcesPath + "/images/common/btn_duty_code2.png";
                    break;
                case '3':
                    playBtnImg = application.resourcesPath + "/images/common/btn_duty_code3.png";
                    break;
                case '4':
                    playBtnImg = application.resourcesPath + "/images/common/btn_duty_code4.png";
                    break;
                case '5':
                    playBtnImg = application.resourcesPath + "/images/common/btn_duty_code5.png";
                    break;
                case '6':
                    playBtnImg = application.resourcesPath + "/images/common/btn_duty_code3.png";
                    break;
                default: {
                    if (isMobile == 'Y') {
                        playBtnImg = application.resourcesPath + "/images/common/btn/btn_play_04.png";
                    } else {
                        playBtnImg = application.resourcesPath + "/images/common/btn/btn_play_04.png";
                    }

                    if (!isEmpty(btnImg)) {
                        playBtnImg = btnImg;
                    }
                }
                    break;
            }
        } else {
            if (isMobile == 'Y') {
                playBtnImg = application.resourcesPath + "/images/common/btn/btn_play_04.png";
            } else {
                playBtnImg = application.resourcesPath + "/images/common/btn/btn_play_04.png";
            }
            if (!isEmpty(btnImg)) {
                playBtnImg = btnImg;
            }
        }
    }

    if ("Y" == blockingYn) {
        var blocking = '';
        $.ajax({
            url: application.rootUrlPrefix+ '/api/getBlockingIp.do',
            type: "POST",
            async: false,
            dataType: 'json',
            success: function (data, status) {
                if (!isEmpty(data.blocking) && data.blocking.resultcode == 1) {
                    blocking = data.blocking.blockingYn;
                }
            },
            error: function (request, status, error) {
                blocking = 'N';
            }
        });
        if ("N" == blocking) {
            //popAlert('I', '저작권 관련 서비스 사용이 불가합니다.');
            playBtnImg = application.resourcesPath + "/images/common/btn_duty_code3.png";
        }
    }

    if (isMobile == 'Y') {
        playBtnImg = "mobile/" + playBtnImg;
    }
    return playBtnImg;
};

var getPlayBtnDesc = function (btnImg) {
    var msg = "취재원 보호를 위해 기사와 영상 다시보기 서비스를 중단합니다. 이용에 불편을 드려 죄송합니다.";

    if (application.resourcesPath + "/images/common/btn_duty_code1.png" == btnImg) {
        msg = "취재원 보호를 위해 기사와 영상 다시보기 서비스를 중단합니다. 이용에 불편을 드려 죄송합니다.";
        return msg;
    }
    if (application.resourcesPath + "/images/common/btn_duty_code2.png" == btnImg) {
        msg = "방송 내용과 관련한 법적 분쟁으로 인해 기사와 영상 다시보기 서비스를 중단합니다. 이용에 불편을 드려 죄송합니다.";
        return msg;
    }
    if (application.resourcesPath + "/images/common/btn_duty_code3.png" == btnImg) {
        msg = "방송 영상의 인터넷 저작권/전송권 문제로 다시보기 서비스를 하지 않습니다. 이용에 불편을 드려 죄송합니다.";
        return msg;
    }
    if (application.resourcesPath + "/images/common/btn_duty_code4.png" == btnImg) {
        msg = "동영상 내용상의 문제로 인해 다시보기 서비스를 중단합니다. 이용에 불편을 드려 죄송합니다.";
        return msg;
    }
    if (application.resourcesPath + "/images/common/btn_duty_code5.png" == btnImg) {
        msg = "방송된 기사의 오류로 인해 다시보기 서비스를 종료합니다. 이용에 불편을 드려 죄송합니다.";
        return msg;
    }
    return msg;
};


//VOD 경로를 조회한다. -없거나 재생불가는 null 리턴
var getKBSVodUrlList = function (_vodUrl) {
    var vodUrl = _vodUrl;

    if (isEmpty(vodUrl)) {
        return null;
    }

    // CDN 조회
    var cdnYn = 'N', duty = 'N', blockingYn = 'N';

    if (vodUrl.indexOf('|') == 0) {
        var vodInfos = vodUrl.split('|');
        duty = vodInfos[1];
        cdnYn = vodInfos[2];
        blockingYn = vodInfos[3];
        vodUrl = vodInfos[4];
    }

    cdnYn = 'Y';	//무조건 cdn으로 실행

    if (vodUrl.indexOf("/") == 0) {
        vodUrl = vodUrl.substr(1);
    }

    if (duty.indexOf('^') >= 0) {
        var dutyInfos = duty.split('^');

        dutyYn = dutyInfos[0];

        if (dutyYn == 'Y') {
            return null;
        }
    }

    if ("Y" == blockingYn) {
        var blocking = '';
        $.ajax({
            url: application.rootUrlPrefix+ '/api/getBlockingIp.do',
            type: "POST",
            async: false,
            dataType: 'json',
            success: function (data, status) {
                if (!isEmpty(data.blocking) && data.blocking.resultcode == 1) {
                    blocking = data.blocking.blockingYn;
                }
            },
            error: function (request, status, error) {
                blocking = 'N';
            }
        });
        if ("N" == blocking) {
            return null;
        }
    }

    var vodExt = vodUrl.substring(vodUrl.length - 3);

    var cdn_main_url = "newsvod.kbsmp4.kbs.gscdn.com/newsvod/_definst_/" + vodExt + ":";
    var cdn_vod_url = "";
    if (navigator.appVersion.indexOf("iPhone") > -1 || navigator.appVersion.indexOf("iPad") > -1) {
        cdn_vod_url = "http://" + cdn_main_url + vodUrl + "/playlist.m3u8";
        vodUrl = "http://mobilenews.kbs.co.kr:1935/news/_definst_/" + vodExt + ":" + vodUrl + "/playlist.m3u8";
    } else if (navigator.appVersion.indexOf("Android") != -1) {
        cdn_vod_url = "http://" + cdn_main_url + vodUrl + "/playlist.m3u8";
        vodUrl = "http://mobilenews.kbs.co.kr:1935/news/_definst_/" + vodExt + ":" + vodUrl + "/playlist.m3u8";
    } else if (navigator.appVersion.indexOf("Safari") > -1) {
        cdn_vod_url = "http://" + cdn_main_url + vodUrl + "/playlist.m3u8";
        vodUrl = "http://mobilenews.kbs.co.kr:1935/news/_definst_/" + vodExt + ":" + vodUrl + "/playlist.m3u8";
    } else {
        cdn_vod_url = "rtmp://" + cdn_main_url + vodUrl;
        vodUrl = "rtmp://newsvod.kbs.co.kr/news/_definst_/" + vodExt + ":" + vodUrl;
    }

    if (cdnYn == 'Y') {
        vodUrl = null;
        $.ajax({
            url: application.rootUrlPrefix+ '/api/getHlsNewsVodUrl',
            type: "POST",
            async: false,
            dataType: 'json',
            data: {vodUrl: _vodUrl},
            success: function (data, status) {
                if (data.success) {
                    vodUrl = data.data.streamUrl;
                } else {
                    vodUrl = null;
                    alert(data.message);
                }
            },
            error: function (request, status, error) {
                vodUrl = null;
            }
        });
    }

    return vodUrl;
};

//VOD 재생 로그
function jwPlayerIncreaseNewsVodHits(newsCode) {
}

//PLAY
function jwPlayerPlay(vodParam, playerId, mobileGubun, playType) {
    var vodPlayListInfo = vodParam.vodPlayListInfo;

    //css 스킨
    vodParam.skin = "kbs";

    vodParam.wmode = "transparent";

    vodParam.abouttext = "KBS NEWS Online";

    //쿠키에 저장된 볼륨값, 캡션 여부를 확인해서 세팅한다.
    setCookie


    if (isEmpty(playerId)) {
        playerId = "JW_PLAYER";
    }

    if (!isEmpty(vodPlayListInfo)) {
        var tempPlayList = vodParam.playlist;
        var playList = [];

        if (isEmpty(vodParam.sharing)) {
            if (tempPlayList.length == vodPlayListInfo.length)//플레이리스트와 세부정보 리스트 갯수가 동일할 경우( 저작권 동영상 없음 )
            {

                var newsCode = '';
                for (var i = 0; i < tempPlayList.length; i++) {
                    newsCode = vodPlayListInfo[i].newscode;
                    if (isEmpty(tempPlayList[i].tracks))//자막 여부
                    {
                        playList.push({image: tempPlayList[i].image, file: tempPlayList[i].file, mediaid: newsCode});
                    } else {
                        playList.push({
                            image: tempPlayList[i].image,
                            file: tempPlayList[i].file,
                            tracks: tempPlayList[i].tracks,
                            mediaid: newsCode
                        });
                    }
                }
            } else//플레이리스트와 세부정보 리스트가 다를경우 ( 목록중 저작권 동영상이 있음 )
            {
                var newsCode = '';
                for (var i = 0; i < tempPlayList.length; i++) {
                    for (var j = 0; j < vodPlayListInfo.length; j++)//기사 코드 찾기
                    {
                        if (vodPlayListInfo[j].vodIndex == i) {
                            newsCode = vodPlayListInfo[j].newscode;
                            break;
                        }
                    }
                    if (isEmpty(tempPlayList[i].tracks))//자막 여부
                    {
                        playList.push({image: tempPlayList[i].image, file: tempPlayList[i].file, mediaid: newsCode});
                    } else {
                        playList.push({
                            image: tempPlayList[i].image,
                            file: tempPlayList[i].file,
                            tracks: tempPlayList[i].tracks,
                            mediaid: newsCode
                        });
                    }
                }
            }
            vodParam.playlist = playList;
            //vodParam.sharing = { 'link':'http://news.kbs.co.kr/news/view.do?ncd=MEDIAID', code:'','heading':'공유'};
            vodParam.sharing = {
                sites: ['facebook', 'twitter'],
                'link': 'http://news.kbs.co.kr/news/view.do?ncd=MEDIAID',
                code: '',
                'heading': '공유'
            };
        }
    } else {
        if (isEmpty(vodParam.sharing)) {
            vodParam.sharing = [];
        }
    }

    var chk = "0";

    if (!isEmpty(vodPlayListInfo)) //뉴스코드가 있을경우 재생로그 기록
    {
        vodParam.events = {
            onTime: function (event) {
                var duration = Math.round(event.duration);//동영상 총길이
                var time = Math.round(event.position); //재생시간

                var idx = this.getPlaylistIndex();
                var newsCode = "";

                if (vodPlayListInfo.length == 1) {
                    newsCode = vodPlayListInfo[0].newscode;
                } else {
                    for (var i = 0; i < vodPlayListInfo.length; i++) {
                        if (vodPlayListInfo[i].vodIndex == idx) {
                            newsCode = vodPlayListInfo[i].newscode;
                            break;
                        }
                    }
                }

                if (time == Math.round(duration * 0.25)) {
                    if (chk == "0") {
                        chk = "1";
                        setTimeout(function () {
                            chk = "0";
                        }, 1000);
                        //vodPlayLog( newsCode, mobileGubun, '1' );
                    }
                } else if (time == Math.round(duration * 0.5)) {
                    if (chk == "0") {
                        chk = "1";
                        setTimeout(function () {
                            chk = "0";
                        }, 1000);
                        //vodPlayLog( newsCode, mobileGubun, '2' );
                    }
                } else if (time == Math.round(duration * 0.75)) {
                    if (chk == "0") {
                        chk = "1";
                        setTimeout(function () {
                            chk = "0";
                        }, 1000);
                        //vodPlayLog( newsCode, mobileGubun, '3' );
                    }
                }
            },
            onComplete: function (event)//플레이 완료
            {
                var idx = this.getPlaylistIndex();
                var newsCode = "";

                if (vodPlayListInfo.length == 1) {
                    newsCode = vodPlayListInfo[0].newscode;
                } else {
                    for (var i = 0; i < vodPlayListInfo.length; i++) {
                        if (vodPlayListInfo[i].vodIndex == idx) {
                            newsCode = vodPlayListInfo[i].newscode;
                        }
                    }
                }
                if (chk == "0") {
                    chk = "1";
                    setTimeout(function () {
                        chk = "0";
                    }, 1000);
                    //vodPlayLog( newsCode, mobileGubun, '4' );
                }
            }
        };
    }

    if (navigator.appVersion.indexOf("Android") != -1)//안드로이드일 경우 옵션 추가
    {
        vodParam.androidhls = true;
        vodParam.primary = 'flash';
    }

    if (!isEmpty(mobileGubun)) //모바일 처리
    {
        vodParam.sharing = null; //공유버튼 제거
    }

    //쿠키 값에 다른 디폴트 상태 세팅
    if (vodParam.captions != undefined && vodParam.captions != null) {
        if (getCookie('userCaption') == '1') {
            vodParam.captions.state = true;
        } else {
            vodParam.captions.state = false;
        }
    }

    if (getCookie('userVolume') != '') {
        vodParam.volume = getCookie('userVolume');
    }

    vodParam.visualplaylist = false;
    jwplayer(playerId).setup(vodParam); //플레이어 재생

    //볼륨 변경 시 이벤트 -- 쿠키에 값을 세팅한다.
    jwplayer(playerId).on('volume', function () {
        var volume = jwplayer(playerId).getVolume();
        setCookie('userVolume', volume);
    });

    jwplayer(playerId).on('captionsChanged', function () {
        setCookie('userCaption', jwplayer(playerId).getCurrentCaptions());
    });

    //풀스크린리스너
    jwplayer(playerId).on('fullscreen', function (obj) {
        if (window.androidApp) {
            if (obj.fullscreen) {
                //세로잠금해제
                window.androidApp.setOrientationChange(false);
            } else {
                //세로잠금처리
                window.androidApp.setOrientationChange(true);
            }
        } else {
            //if( obj.fullscreen )
            //{
            $('#container').css('z-index', '99999');
            $('#' + playerId).css('z-index', '99999');
            //}
            /*else
			{
				$( '#container' ).css('z-index', '90' );
				$( '#'+playerId ).css('z-index', '1000' );
			}*/
        }
    });

    if ($('div.wrap_vod').length == 1) {
        $('div.wrap_vod').focus();
    }

    var vodLogChk = false;

    if (!isEmpty(mobileGubun)) //모바일 처리
    {
        if (!isEmpty(playType)) {
            if ("news" == playType) {
                jwplayer(playerId).on('ready', function () {
                    setTimeout(function () {
                        kbsNewsUi.uiAction.pl_loading_off('.news-media-area');//player loading end
                        $('.news-media-area').append('<a id="btnMainPlay" class="palayer-ico" href="javascript:playVodStart();"><span class="blind">동영상 플레이 버튼</span></a>');

                        $("#ico_loading").remove();
                        $("#btnMainPlay").removeClass('hide');
                        if (navigator.appVersion.indexOf("iPhone") > -1 || navigator.appVersion.indexOf("iPad") > -1) {
                            $("#btnMainFull").addClass('hide');
                        } else {
                            $("#btnMainFull").removeClass('hide');
                        }
                        $('#' + playerId).removeClass('');
                        $('#' + playerId).addClass('sec_video');
                        jwplayer(playerId).stop();
                    }, 1000);
                });
            } else if ("24news" == playType) {
                var i = document.getElementById(playerId);
                // 아이폰이 아닌 경우에만 전체화면 버튼 추가함
                if (i.requestFullscreen || i.webkitRequestFullscreen || i.mozRequestFullScreen || i.msRequestFullscreen) {
                    //
                    jwplayer(playerId).addButton(
                        "/resources/images/full_on.png",
                        "전체화면",
                        function () {
                            if (jwplayer(playerId).getFullscreen()) {
                                //일반화면 전환
                                if (document.exitFullscreen) {
                                    document.exitFullscreen();
                                } else if (document.webkitExitFullscreen) {
                                    document.webkitExitFullscreen();
                                } else if (document.mozCancelFullScreen) {
                                    document.mozCancelFullScreen();
                                } else if (document.msExitFullscreen) {
                                    document.msExitFullscreen();
                                }
                            } else {
                                //전체화면 전환(iOs에서는 작동안함)
                                var i = document.getElementById(playerId);
                                // go full-screen
                                if (i.requestFullscreen) {
                                    i.requestFullscreen();
                                } else if (i.webkitRequestFullscreen) {
                                    i.webkitRequestFullscreen();
                                } else if (i.mozRequestFullScreen) {
                                    i.mozRequestFullScreen();
                                } else if (i.msRequestFullscreen) {
                                    i.msRequestFullscreen();
                                }
                            }
                        },
                        "fullScreenButton"
                    );
                    //
                }

                jwplayer(playerId).on('ready', function () {
                    setTimeout(function () {
                        $("#btnMainPlay").removeClass('hide');
                        if (navigator.appVersion.indexOf("iPhone") > -1 || navigator.appVersion.indexOf("iPad") > -1) {
                            $("#btnMainFull").addClass('hide');
                        } else {
                            $("#btnMainFull").removeClass('hide');
                        }

                        $('#' + playerId).removeClass('');
                        jwplayer(playerId).stop();
                    }, 1000);
                });
            } else if ("quiz" == playType) {
                jwplayer(playerId).on('ready', function () {
                    setTimeout(function () {
                        $("#btn" + playerId).removeClass('hide');
                        $('#' + playerId).removeClass('');
                        jwplayer(playerId).stop();
                    }, 1000);
                });
            } else if ("sport" == playType) {

                jwplayer(playerId).on('ready', function () {
                    setTimeout(function () {
                        //$( "#btn" + playerId ).removeClass( 'hide' );
                        $('#' + playerId).removeClass('');
                        jwplayer(playerId).stop();
                    }, 1000);
                });

                vodLogChk = false;
            } else {
                jwplayer(playerId).on('ready', function () {
                    $('#' + playerId).removeClass('');
                });

                if (!isEmpty(vodPlayListInfo)) //뉴스코드가 있을경우 재생로그 기록
                {
                    vodLogChk = true;
                }
            }
        }

        jwplayer().on('fullscreen', function () {
            var i = document.getElementById(playerId);

            if (jwplayer(playerId).getFullscreen()) {
                // 아이폰일 경우 풀스크린이 안되므로 버튼 추가 안함
                if (!(i.requestFullscreen || i.webkitRequestFullscreen || i.mozRequestFullScreen || i.msRequestFullscreen)) {
                    return;
                }

                jwplayer(playerId).addButton(
                    "/resources/images/full_on.png",
                    "전체화면",
                    function () {
                        if (jwplayer(playerId).getFullscreen()) {
                            //일반화면 전환
                            if (document.exitFullscreen) {
                                document.exitFullscreen();
                            } else if (document.webkitExitFullscreen) {
                                document.webkitExitFullscreen();
                            } else if (document.mozCancelFullScreen) {
                                document.mozCancelFullScreen();
                            } else if (document.msExitFullscreen) {
                                document.msExitFullscreen();
                            }
                        } else {
                            //전체화면 전환(iOs에서는 작동안함)
                            var i = document.getElementById(playerId);
                            // go full-screen
                            if (i.requestFullscreen) {
                                i.requestFullscreen();
                            } else if (i.webkitRequestFullscreen) {
                                i.webkitRequestFullscreen();
                            } else if (i.mozRequestFullScreen) {
                                i.mozRequestFullScreen();
                            } else if (i.msRequestFullscreen) {
                                i.msRequestFullscreen();
                            }
                        }
                    },
                    "fullScreenButton"
                );

            } else {
                if ("24news" != playType) {
                    jwplayer(playerId).removeButton("fullScreenButton");
                }

            }

        });
    } else {
        if (!isEmpty(vodPlayListInfo)) //뉴스코드가 있을경우 재생로그 기록
        {
            vodLogChk = true;
        }
    }

    if (vodLogChk) //뉴스코드가 있을경우 재생로그 기록
    {
        //플레이목록 선택시 재생로그 추가
        jwplayer(playerId).on('playlistItem', function (obj) {
            var idx = obj.index;
            var strUrl = "";
            var newsCode = "";

            if (vodPlayListInfo.length == 1) {
                newsCode = vodPlayListInfo[0].newscode;
            } else {
                for (var i = 0; i < vodPlayListInfo.length; i++) {
                    if (vodPlayListInfo[i].vodIndex == idx) {
                        newsCode = vodPlayListInfo[i].newscode;
                    }
                }
            }
            //vodPlayLog( newsCode, mobileGubun, '0' );
        });
    }
}


function vodPlayLog(newsCode, mobileGubun, hits) {
    var strUrl = "";
    var rtn = "";

    $("#container").ajaxStop(function () {
        return false;
    });
}


//PLAY
function jwPlayerPlayMobile(vodParam, playerId, mobileGubun, playType) {
    var vodPlayListInfo = vodParam.vodPlayListInfo;

    //css 스킨
    vodParam.skin = "kbsnoon";

    vodParam.wmode = "transparent";

    vodParam.abouttext = "KBS NEWS Online";

    if (isEmpty(playerId)) {
        playerId = "JW_PLAYER";
    }

    if (!isEmpty(vodPlayListInfo)) {
        var tempPlayList = vodParam.playlist;
        var playList = [];

        if (isEmpty(vodParam.sharing)) {
            if (tempPlayList.length == vodPlayListInfo.length)//플레이리스트와 세부정보 리스트 갯수가 동일할 경우( 저작권 동영상 없음 )
            {

                var newsCode = '';
                for (var i = 0; i < tempPlayList.length; i++) {
                    newsCode = vodPlayListInfo[i].newscode;
                    if (isEmpty(tempPlayList[i].tracks))//자막 여부
                    {
                        playList.push({image: tempPlayList[i].image, file: tempPlayList[i].file, mediaid: newsCode});
                    } else {
                        playList.push({
                            image: tempPlayList[i].image,
                            file: tempPlayList[i].file,
                            tracks: tempPlayList[i].tracks,
                            mediaid: newsCode
                        });
                    }
                }
            } else//플레이리스트와 세부정보 리스트가 다를경우 ( 목록중 저작권 동영상이 있음 )
            {
                var newsCode = '';
                for (var i = 0; i < tempPlayList.length; i++) {
                    for (var j = 0; j < vodPlayListInfo.length; j++)//기사 코드 찾기
                    {
                        if (vodPlayListInfo[j].vodIndex == i) {
                            newsCode = vodPlayListInfo[j].newscode;
                            break;
                        }
                    }
                    if (isEmpty(tempPlayList[i].tracks))//자막 여부
                    {
                        playList.push({image: tempPlayList[i].image, file: tempPlayList[i].file, mediaid: newsCode});
                    } else {
                        playList.push({
                            image: tempPlayList[i].image,
                            file: tempPlayList[i].file,
                            tracks: tempPlayList[i].tracks,
                            mediaid: newsCode
                        });
                    }
                }
            }
            vodParam.playlist = playList;
            //vodParam.sharing = { 'link':'http://news.kbs.co.kr/news/view.do?ncd=MEDIAID', code:'','heading':'공유'};
            vodParam.sharing = {
                sites: ['facebook', 'twitter'],
                'link': 'http://news.kbs.co.kr/news/view.do?ncd=MEDIAID',
                code: '',
                'heading': '공유'
            };
        }
    } else {
        if (isEmpty(vodParam.sharing)) {
            vodParam.sharing = [];
        }
    }

    var chk = "0";

    if (!isEmpty(vodPlayListInfo)) //뉴스코드가 있을경우 재생로그 기록
    {
        vodParam.events = {
            onTime: function (event) {
                var duration = Math.round(event.duration);//동영상 총길이
                var time = Math.round(event.position); //재생시간

                var idx = this.getPlaylistIndex();
                var newsCode = "";

                if (vodPlayListInfo.length == 1) {
                    newsCode = vodPlayListInfo[0].newscode;
                } else {
                    for (var i = 0; i < vodPlayListInfo.length; i++) {
                        if (vodPlayListInfo[i].vodIndex == idx) {
                            newsCode = vodPlayListInfo[i].newscode;
                            break;
                        }
                    }
                }

                if (time == Math.round(duration * 0.25)) {
                    if (chk == "0") {
                        chk = "1";
                        setTimeout(function () {
                            chk = "0";
                        }, 1000);
                        //vodPlayLog( newsCode, mobileGubun, '1' );
                    }
                } else if (time == Math.round(duration * 0.5)) {
                    if (chk == "0") {
                        chk = "1";
                        setTimeout(function () {
                            chk = "0";
                        }, 1000);
                        //vodPlayLog( newsCode, mobileGubun, '2' );
                    }
                } else if (time == Math.round(duration * 0.75)) {
                    if (chk == "0") {
                        chk = "1";
                        setTimeout(function () {
                            chk = "0";
                        }, 1000);
                        //vodPlayLog( newsCode, mobileGubun, '3' );
                    }
                }
            },
            onComplete: function (event)//플레이 완료
            {
                var idx = this.getPlaylistIndex();
                var newsCode = "";

                if (vodPlayListInfo.length == 1) {
                    newsCode = vodPlayListInfo[0].newscode;
                } else {
                    for (var i = 0; i < vodPlayListInfo.length; i++) {
                        if (vodPlayListInfo[i].vodIndex == idx) {
                            newsCode = vodPlayListInfo[i].newscode;
                        }
                    }
                }
                if (chk == "0") {
                    chk = "1";
                    setTimeout(function () {
                        chk = "0";
                    }, 1000);
                    //vodPlayLog( newsCode, mobileGubun, '4' );
                }
            }
        };
    }

    if (navigator.appVersion.indexOf("Android") != -1)//안드로이드일 경우 옵션 추가
    {
        vodParam.androidhls = true;
        vodParam.primary = 'flash';
    }

    if (!isEmpty(mobileGubun)) //모바일 처리
    {
        vodParam.sharing = null; //공유버튼 제거
    }

    //쿠키 값에 다른 디폴트 상태 세팅
    if (vodParam.captions != undefined && vodParam.captions != null) {
        if (getCookie('userCaption') == '1') {
            vodParam.captions.state = true;
        } else {
            vodParam.captions.state = false;
        }
    }

    if (getCookie('userVolume') != '') {
        vodParam.volume = getCookie('userVolume');
    }

    vodParam.visualplaylist = false;
    jwplayer(playerId).setup(vodParam); //플레이어 재생

    //볼륨 변경 시 이벤트 -- 쿠키에 값을 세팅한다.
    jwplayer(playerId).on('volume', function () {
        var volume = jwplayer(playerId).getVolume();
        setCookie('userVolume', volume);
    });

    jwplayer(playerId).on('captionsChanged', function () {
        setCookie('userCaption', jwplayer(playerId).getCurrentCaptions());
    });

    jwplayer(playerId).on('play', function () {
        $("#vodSeroTitleArea").css("z-index", "-1");

        clearInterval(jwplayerIntervalId);

        var param4 = 'on air';
        if (location.href.indexOf('ncd') > 0) {
            param4 = getParameterByName('ncd');
        }

        if (jwplayerFirstStart) {
            jwplayerStartTime = dayjs();
            jwplayerFirstStart = false;
        }

        // Pause 후 Seek을 이동할 경우 seek 후 play가 동작.
        // 1.중복 호출 방지 2. play 이벤트를 막는 이유 : 이동 전 위치값을 가지고 있어 param3이 잘못됨
        if (jwplayerStateCode !== 'M') {
            sendVodWatchLog(param4, playerId);
        }
        jwplayerIntervalId = sendVodWatchLogInterval(param4, playerId);
    });

    jwplayer(playerId).on('seek', function (e) {
        clearInterval(jwplayerIntervalId);

        var param4 = 'on air';
        if (location.href.indexOf('ncd') > 0) {
            param4 = getParameterByName('ncd');
        }

        jwplayerStateCode = 'M';
        // e.offset : 이동한 플레이어 위치
        sendVodWatchLog(param4, playerId, e.offset);
        jwplayerIntervalId = sendVodWatchLogInterval(param4, playerId);
    });

    jwplayer(playerId).on('pause', function () {
        $(".news-media-area.vertical .title").css("z-index", "10001");
        $(".jw-controls").css("z-index", "10002");
        $(".jw-overlays").css("z-index", "10002");

        clearInterval(jwplayerIntervalId);

        var param4 = 'on air';
        if (location.href.indexOf('ncd') > 0) {
            param4 = getParameterByName('ncd');
        }

        jwplayerPauseStartTime = dayjs();
        sendVodWatchLog(param4, playerId);
    });

    jwplayer(playerId).on('complete', function () {
        clearInterval(jwplayerIntervalId);

        var param4 = 'on air';
        if (location.href.indexOf('ncd') > 0) {
            param4 = getParameterByName('ncd');
        }

        sendVodWatchLog(param4, playerId);
    });

    //풀스크린리스너
    jwplayer(playerId).on('fullscreen', function (obj) {
        if (window.androidApp) {
            if (obj.fullscreen) {
                //세로잠금해제
                window.androidApp.setOrientationChange(false);
            } else {
                //세로잠금처리
                window.androidApp.setOrientationChange(true);
            }
        } else {
            $('#container').css('z-index', '99999');
            $('#' + playerId).css('z-index', '99999');
        }
        var orientation = window.orientation;

        if (orientation != null && orientation != undefined) {
            var jw_width = jwplayer().getWidth();
            var jw_height = jwplayer().getHeight();

            if (jw_height > jw_width) {
                rotate(this, 90);
            }
        }
    });

    if ($('div.wrap_vod').length == 1) {
        $('div.wrap_vod').focus();
    }

    var vodLogChk = false;

    if (!isEmpty(playType)) {
        if ("news" == playType) {
            jwplayer(playerId).on('ready', function () {
                kbsNewsUi.uiAction.pl_loading_off('.news-media-area');//player loading end
                $('.news-media-area').append('<a id="btnMainPlay" class="palayer-ico" href="javascript:playVodStart();"><span class="blind">동영상 플레이 버튼</span></a>');

                $("#ico_loading").remove();
                $("#btnMainPlay").removeClass('hide');
                if (navigator.appVersion.indexOf("iPhone") > -1 || navigator.appVersion.indexOf("iPad") > -1) {
                    $("#btnMainFull").addClass('hide');
                } else {
                    $("#btnMainFull").removeClass('hide');
                }
                $('#' + playerId).removeClass('');
                $('#' + playerId).addClass('sec_video');
            });
        } else if ("24news" == playType) {
            var i = document.getElementById(playerId);
            // 아이폰이 아닌 경우에만 전체화면 버튼 추가함
            if (i.requestFullscreen || i.webkitRequestFullscreen || i.mozRequestFullScreen || i.msRequestFullscreen) {
                //
                jwplayer(playerId).addButton(
                    "/resources/images/full_on.png",
                    "전체화면",
                    function () {
                        if (jwplayer(playerId).getFullscreen()) {
                            //일반화면 전환
                            if (document.exitFullscreen) {
                                document.exitFullscreen();
                            } else if (document.webkitExitFullscreen) {
                                document.webkitExitFullscreen();
                            } else if (document.mozCancelFullScreen) {
                                document.mozCancelFullScreen();
                            } else if (document.msExitFullscreen) {
                                document.msExitFullscreen();
                            }
                        } else {
                            //전체화면 전환(iOs에서는 작동안함)
                            var i = document.getElementById(playerId);
                            // go full-screen
                            if (i.requestFullscreen) {
                                i.requestFullscreen();
                            } else if (i.webkitRequestFullscreen) {
                                i.webkitRequestFullscreen();
                            } else if (i.mozRequestFullScreen) {
                                i.mozRequestFullScreen();
                            } else if (i.msRequestFullscreen) {
                                i.msRequestFullscreen();
                            }
                        }
                    },
                    "fullScreenButton"
                );
            }

            jwplayer(playerId).on('ready', function () {
                setTimeout(function () {
                    $("#btnMainPlay").removeClass('hide');
                    if (navigator.appVersion.indexOf("iPhone") > -1 || navigator.appVersion.indexOf("iPad") > -1) {
                        $("#btnMainFull").addClass('hide');
                    } else {
                        $("#btnMainFull").removeClass('hide');
                    }

                    $('#' + playerId).removeClass('');
                    //jwplayer( playerId ).stop();

                    $('#JW_PLAYER').css("top", "0px");
                    $('#btnMainPlay').remove();
                    $('#imgMainPlay').addClass('hide');
                    if (window.innerHeight > 1000) {
                        scroll.vodFix();
                    } else {
                        $('#JW_PLAYER').removeClass('fix');
                        $('.jwplayer').css('position', 'relative');
                        $('.sec_share').removeAttr('style');
                        $('.news_title').css({marginTop: 0});
                    }
                }, 1000);
            });
        } else if ("quiz" == playType) {
            jwplayer(playerId).on('ready', function () {
                setTimeout(function () {
                    $("#btn" + playerId).removeClass('hide');
                    $('#' + playerId).removeClass('');
                    jwplayer(playerId).stop();
                }, 1000);
            });
        } else if ("sport" == playType) {

            jwplayer(playerId).on('ready', function () {
                setTimeout(function () {
                    //$( "#btn" + playerId ).removeClass( 'hide' );
                    $('#' + playerId).removeClass('');
                    jwplayer(playerId).stop();
                }, 1000);
            });

            vodLogChk = false;
        } else {
            jwplayer(playerId).on('ready', function () {
                $('#' + playerId).removeClass('');
            });

            if (!isEmpty(vodPlayListInfo)) //뉴스코드가 있을경우 재생로그 기록
            {
                vodLogChk = true;
            }
        }
    }

    jwplayer().on('fullscreen', function () {
        var i = document.getElementById(playerId);

        if (jwplayer(playerId).getFullscreen()) {
            // 아이폰일 경우 풀스크린이 안되므로 버튼 추가 안함
            if (!(i.requestFullscreen || i.webkitRequestFullscreen || i.mozRequestFullScreen || i.msRequestFullscreen)) {
                return;
            }

            jwplayer(playerId).addButton(
                "/resources/images/full_on.png",
                "전체화면",
                function () {
                    if (jwplayer(playerId).getFullscreen()) {
                        //일반화면 전환
                        if (document.exitFullscreen) {
                            document.exitFullscreen();
                        } else if (document.webkitExitFullscreen) {
                            document.webkitExitFullscreen();
                        } else if (document.mozCancelFullScreen) {
                            document.mozCancelFullScreen();
                        } else if (document.msExitFullscreen) {
                            document.msExitFullscreen();
                        }
                    } else {
                        //전체화면 전환(iOs에서는 작동안함)
                        var i = document.getElementById(playerId);
                        // go full-screen
                        if (i.requestFullscreen) {
                            i.requestFullscreen();
                        } else if (i.webkitRequestFullscreen) {
                            i.webkitRequestFullscreen();
                        } else if (i.mozRequestFullScreen) {
                            i.mozRequestFullScreen();
                        } else if (i.msRequestFullscreen) {
                            i.msRequestFullscreen();
                        }
                    }
                },
                "fullScreenButton"
            );

        } else {
            if ("24news" != playType) {
                jwplayer(playerId).removeButton("fullScreenButton");
            }

        }

    });

    if (vodLogChk) //뉴스코드가 있을경우 재생로그 기록
    {
        //플레이목록 선택시 재생로그 추가
        jwplayer(playerId).on('playlistItem', function (obj) {
            var idx = obj.index;
            var strUrl = "";
            var newsCode = "";

            if (vodPlayListInfo.length == 1) {
                newsCode = vodPlayListInfo[0].newscode;
            } else {
                for (var i = 0; i < vodPlayListInfo.length; i++) {
                    if (vodPlayListInfo[i].vodIndex == idx) {
                        newsCode = vodPlayListInfo[i].newscode;
                    }
                }
            }
        });
    }
}

function rotate(el, degs) {
    iedegs = degs / 90;
    if (iedegs < 0) iedegs += 4;
    transform = 'rotate(' + degs + 'deg)';
    iefilter = 'progid:DXImageTransform.Microsoft.BasicImage(rotation=' + iedegs + ')';
    styles = {
        transform: transform,
        '-webkit-transform': transform,
        '-moz-transform': transform,
        '-o-transform': transform,
        filter: iefilter,
        '-ms-filter': iefilter
    };
    $(el).css(styles);
}

var getPlayButtonNumberText = function (vodUrl, isMobile, btnImg) {
    var duty = 'N', blockingYn = 'N', cdnYn = '';
    var playBtnImg = "";
    if (!isEmpty(btnImg)) {
        playBtnImg = btnImg;
    }
    if (isEmpty(vodUrl)) {
        return playBtnImg;
    }

    var blYn = false;
    if (vodUrl.indexOf('|') == 0) {
        var vodInfos = vodUrl.split('|');
        duty = vodInfos[1];
        cdnYn = vodInfos[2];
        blockingYn = vodInfos[3];
    }

    if (duty.indexOf('^') >= 0) {
        var dutyInfos = duty.split('^');

        dutyYn = dutyInfos[0];

        if (dutyYn == 'Y') {
            if (!isEmpty(dutyInfos[1])) {
                duty_code = dutyInfos[1];
            } else {
                duty_code = '3';
            }

            switch (duty_code) {
                case '1':
                    playBtnImg = "<p>취재원 보호를 위해 기사와 영상 다시보기 서비스를 중단합니다.</p><p>이용에 불편을 드려 죄송합니다.</p>";
                    break;
                case '2':
                    playBtnImg = "<p>방송 내용과 관련한 법적 분쟁으로 인해 기사와 영상 다시보기 서비스를 중단합니다.</p><p>이용에 불편을 드려 죄송합니다.</p>";
                    break;
                case '3':
                    playBtnImg = "<p>방송 영상의 인터넷 저작권/전송권 문제로 다시보기 서비스를 하지 않습니다. </p><p>이용에 불편을 드려 죄송합니다.</p>";
                    break;
                case '4':
                    playBtnImg = "<p>동영상 내용상의 문제로 인해 다시보기 서비스를 중단합니다.</p><p>이용에 불편을 드려 죄송합니다.</p>";
                    break;
                case '5':
                    playBtnImg = "<p>방송된 기사의 오류로 인해 다시보기 서비스를 종료합니다.</p><p>이용에 불편을 드려 죄송합니다.</p>";
                    break;
                case '6':
                    playBtnImg = "<p>방송 영상의 인터넷 저작권/전송권 문제로 다시보기 서비스를 하지 않습니다. </p><p>이용에 불편을 드려 죄송합니다.</p>";
                    break;
                default: {
                    if (isMobile == 'Y') {
                        playBtnImg = application.resourcesPath + "/images/common/btn/btn_play_04.png";
                    } else {
                        playBtnImg = application.resourcesPath + "/images/common/btn/btn_play_04.png";
                    }

                    if (!isEmpty(btnImg)) {
                        playBtnImg = btnImg;
                    }
                }
                    break;
            }
        } else {
            if (isMobile == 'Y') {
                playBtnImg = application.resourcesPath + "/images/common/btn/btn_play_04.png";
            } else {
                playBtnImg = application.resourcesPath + "/images/common/btn/btn_play_04.png";
            }
            if (!isEmpty(btnImg)) {
                playBtnImg = btnImg;
            }
        }
    }

    if ("Y" == blockingYn) {
        var blocking = '';
        $.ajax({
            url: application.rootUrlPrefix+ '/api/getBlockingIp.do',
            type: "POST",
            async: false,
            dataType: 'json',
            success: function (data, status) {
                if (!isEmpty(data.blocking) && data.blocking.resultcode == 1) {
                    blocking = data.blocking.blockingYn;
                }
            },
            error: function (request, status, error) {
                blocking = 'N';
            }
        });
        if ("N" == blocking) {
            //popAlert('I', '저작권 관련 서비스 사용이 불가합니다.');
            playBtnImg = "<p>방송 영상의 인터넷 저작권/전송권 문제로 다시보기 서비스를 하지 않습니다. </p><p>이용이 불편을 드려 죄송합니다.</p>";
            ;
        }
    }

    if (isMobile == 'Y') {
        playBtnImg = "mobile/" + playBtnImg;
    }
    return playBtnImg;
};


var playerDustyInfo = function (vodUrl, dutyYn, dutyCode, isMobile, btnImg) {
    var duty = 'N', blockingYn = 'N', cdnYn = '';
    var playBtnImg = "";

    if (!isEmpty(btnImg)) {
        playBtnImg = btnImg;
    }
    if (isEmpty(vodUrl)) {
        return playBtnImg;
    }

    var blYn = false;
    if (vodUrl.indexOf('|') == 0) {
        var vodInfos = vodUrl.split('|');
        duty = vodInfos[1];
        cdnYn = vodInfos[2];
        blockingYn = vodInfos[3];
    }

    if (dutyYn == "Y") {
        switch (dutyCode) {
            case '1':
                playBtnImg = "<p>취재원 보호를 위해 기사와 영상 다시보기 서비스를 중단합니다.</p><p>이용에 불편을 드려 죄송합니다.</p>";
                break;
            case '2':
                playBtnImg = "<p>방송 내용과 관련한 법적 분쟁으로 인해 기사와 영상 다시보기 서비스를 중단합니다.</p><p>이용에 불편을 드려 죄송합니다.</p>";
                break;
            case '3':
                playBtnImg = "<p>방송 영상의 인터넷 저작권/전송권 문제로 다시보기 서비스를 하지 않습니다. </p><p>이용에 불편을 드려 죄송합니다.</p>";
                break;
            case '4':
                playBtnImg = "<p>동영상 내용상의 문제로 인해 다시보기 서비스를 중단합니다.</p><p>이용에 불편을 드려 죄송합니다.</p>";
                break;
            case '5':
                playBtnImg = "<p>방송된 기사의 오류로 인해 다시보기 서비스를 종료합니다.</p><p>이용에 불편을 드려 죄송합니다.</p>";
                break;
            case '6':
                playBtnImg = "<p>방송 영상의 인터넷 저작권/전송권 문제로 다시보기 서비스를 하지 않습니다. </p><p>이용에 불편을 드려 죄송합니다.</p>";
                break;
            default: {
                if (isMobile == 'Y') {
                    playBtnImg = application.resourcesPath + "/images/common/btn/btn_play_04.png";
                } else {
                    playBtnImg = application.resourcesPath + "/images/common/btn/btn_play_04.png";
                }

                if (!isEmpty(btnImg)) {
                    playBtnImg = btnImg;
                }
            }
                break;
        }
    }

    if (isMobile == 'Y') {
        playBtnImg = "mobile/" + playBtnImg;
    }
    return playBtnImg;
};


function jwPlayerPlayNew(vodParam, playerId, mobileGubun, playType) {
    var vodPlayListInfo = vodParam.vodPlayListInfo;

    vodParam.wmode = "transparent";

    vodParam.abouttext = "KBS NEWS Online";

    //쿠키에 저장된 볼륨값, 캡션 여부를 확인해서 세팅한다.
    setCookie


    if (isEmpty(playerId)) {
        playerId = "JW_PLAYER";
    }

    if (!isEmpty(vodPlayListInfo)) {
        var tempPlayList = vodParam.playlist;
        var playList = [];

        if (isEmpty(vodParam.sharing)) {
            if (tempPlayList.length == vodPlayListInfo.length)//플레이리스트와 세부정보 리스트 갯수가 동일할 경우( 저작권 동영상 없음 )
            {

                var newsCode = '';
                for (var i = 0; i < tempPlayList.length; i++) {
                    newsCode = vodPlayListInfo[i].newscode;
                    if (isEmpty(tempPlayList[i].tracks))//자막 여부
                    {
                        playList.push({image: tempPlayList[i].image, file: tempPlayList[i].file, mediaid: newsCode});
                    } else {
                        playList.push({
                            image: tempPlayList[i].image,
                            file: tempPlayList[i].file,
                            tracks: tempPlayList[i].tracks,
                            mediaid: newsCode
                        });
                    }
                }
            } else//플레이리스트와 세부정보 리스트가 다를경우 ( 목록중 저작권 동영상이 있음 )
            {
                var newsCode = '';
                for (var i = 0; i < tempPlayList.length; i++) {
                    for (var j = 0; j < vodPlayListInfo.length; j++)//기사 코드 찾기
                    {
                        if (vodPlayListInfo[j].vodIndex == i) {
                            newsCode = vodPlayListInfo[j].newscode;
                            break;
                        }
                    }
                    if (isEmpty(tempPlayList[i].tracks))//자막 여부
                    {
                        playList.push({image: tempPlayList[i].image, file: tempPlayList[i].file, mediaid: newsCode});
                    } else {
                        playList.push({
                            image: tempPlayList[i].image,
                            file: tempPlayList[i].file,
                            tracks: tempPlayList[i].tracks,
                            mediaid: newsCode
                        });
                    }
                }
            }
            vodParam.playlist = playList;
            vodParam.sharing = {
                sites: ['facebook', 'twitter'],
                'link': 'http://news.kbs.co.kr/news/view.do?ncd=MEDIAID',
                code: '',
                'heading': '공유'
            };
        }
    } else {
        if (isEmpty(vodParam.sharing)) {
            vodParam.sharing = [];
        }
    }

    var chk = "0";

    if (!isEmpty(vodPlayListInfo)) //뉴스코드가 있을경우 재생로그 기록
    {
        vodParam.events = {
            onTime: function (event) {
                var duration = Math.round(event.duration);//동영상 총길이
                var time = Math.round(event.position); //재생시간

                var idx = this.getPlaylistIndex();
                var newsCode = "";

                if (vodPlayListInfo.length == 1) {
                    newsCode = vodPlayListInfo[0].newscode;
                } else {
                    for (var i = 0; i < vodPlayListInfo.length; i++) {
                        if (vodPlayListInfo[i].vodIndex == idx) {
                            newsCode = vodPlayListInfo[i].newscode;
                            break;
                        }
                    }
                }
            },
            onComplete: function (event)//플레이 완료
            {
                var idx = this.getPlaylistIndex();
                var newsCode = "";

                if (vodPlayListInfo.length == 1) {
                    newsCode = vodPlayListInfo[0].newscode;
                } else {
                    for (var i = 0; i < vodPlayListInfo.length; i++) {
                        if (vodPlayListInfo[i].vodIndex == idx) {
                            newsCode = vodPlayListInfo[i].newscode;
                        }
                    }
                }
            }
        };
    }

    if (navigator.appVersion.indexOf("Android") != -1)//안드로이드일 경우 옵션 추가
    {
        vodParam.androidhls = true;
        vodParam.primary = 'flash';
    }

    if (!isEmpty(mobileGubun)) //모바일 처리
    {
        vodParam.sharing = null; //공유버튼 제거
    }

    //쿠키 값에 다른 디폴트 상태 세팅
    if (vodParam.captions != undefined && vodParam.captions != null) {
        if (getCookie('userCaption') == '1') {
            vodParam.captions.state = true;
        } else {
            vodParam.captions.state = false;
        }
    }

    if (getCookie('userVolume') != '') {
        vodParam.volume = getCookie('userVolume');
    }

    vodParam.visualplaylist = false;
    //플레이어 재생
    jwplayer(playerId).setup(vodParam).on('ready', function () {
        jwplayer(playerId).getContainer().focus();
        var controls = document.getElementsByClassName("jw-controls")[0];
        controls.addEventListener("click", function () {
            setTimeout(function () {
                jwplayer(playerId).getContainer().focus();
            }, 200);
        });
        $(".vod-wrap > #JW_PLAYER").focusin(function () {
            if (!jwplayer("JW_PLAYER").getControls()) {
                jwplayer(playerId).setControls(true);
                setTimeout(function () {
                    if (jwplayer(playerId).getState() == 'playing') {
                        jwplayer(playerId).setControls(false);
                    }
                }, 6000);
            }
        });

        jwplayer(playerId).on('pause', function () {
            jwplayer(playerId).setControls(true);

            clearInterval(jwplayerIntervalId);

            var param4 = 'on air';
            if (location.href.indexOf('ncd') > 0) {
                param4 = getParameterByName('ncd');
            }

            jwplayerPauseStartTime = dayjs();
            sendVodWatchLog(param4, playerId);
        });

        jwplayer(playerId).on('play', function () {
            setTimeout(function () {
                if (jwplayer(playerId).getState() == 'playing') {
                    jwplayer(playerId).setControls(false);
                }
            }, 6000);

            clearInterval(jwplayerIntervalId);

            var param4 = 'on air';
            if (location.href.indexOf('ncd') > 0) {
                param4 = getParameterByName('ncd');
            }

            if (jwplayerFirstStart) {
                jwplayerStartTime = dayjs();
                jwplayerFirstStart = false;
            }
            // Pause 후 Seek을 이동할 경우 seek 후 play가 동작.
            // 1.중복 호출을 막고, 2.play 이벤트에서는 이동하기 전 jwplayer의 위치값을 가지고 있어 혼동되므로 play 이벤트를 막는다
            if (jwplayerStateCode !== 'M') {
                sendVodWatchLog(param4, playerId);
            }
            jwplayerIntervalId = sendVodWatchLogInterval(param4, playerId);
        });

        jwplayer(playerId).on('seek', function (e) {
            clearInterval(jwplayerIntervalId);

            var param4 = 'on air';
            if (location.href.indexOf('ncd') > 0) {
                param4 = getParameterByName('ncd');
            }

            // 예외 케이스. 상태를 jwplayer에서 받을 수 없어 이벤트핸들러에서 강제 부여
            jwplayerStateCode = 'M';
            // e.offset : 이동한 플레이어 위치
            sendVodWatchLog(param4, playerId, e.offset);
            jwplayerIntervalId = sendVodWatchLogInterval(param4, playerId);
        });
    });

    //볼륨 변경 시 이벤트 -- 쿠키에 값을 세팅한다.
    jwplayer(playerId).on('volume', function () {
        var volume = jwplayer(playerId).getVolume();
        setCookie('userVolume', volume);
    });

    jwplayer(playerId).on('captionsChanged', function () {
        setCookie('userCaption', jwplayer(playerId).getCurrentCaptions());
    });

    jwplayer(playerId).on('complete', function () {
        jwplayer(playerId).setControls(true);

        clearInterval(jwplayerIntervalId);

        var param4 = 'on air';
        if (location.href.indexOf('ncd') > 0) {
            param4 = getParameterByName('ncd');
        }

        sendVodWatchLog(param4, playerId);
    });

    $(".vod-wrap").bind('mouseover', function () {
        if (jwplayer(playerId).getState() == 'playing') {
            $(".vod-wrap").bind('mousemove', function () {
                jwplayer(playerId).setControls(true);
            });
        } else if (jwplayer(playerId).getState() == 'paused') {
            jwplayer(playerId).setControls(true);
        } else if (jwplayer(playerId).getState() == 'complete') {
            jwplayer(playerId).setControls(true);
        }
    });

    $(".vod-wrap").bind('mouseleave', function () {
        if (jwplayer(playerId).getState() == 'playing') {
            jwplayer(playerId).setControls(false);
        } else if (jwplayer(playerId).getState() == 'paused') {
            jwplayer(playerId).setControls(true);
        } else if (jwplayer(playerId).getState() == 'complete') {
            jwplayer(playerId).setControls(true);
        }
    });

    $(".vod-wrap").bind('blur', function () {
        if (jwplayer(playerId).getState() == 'paused') {
            jwplayer(playerId).setControls(true);
        } else if (jwplayer(playerId).getState() == 'complete') {
            jwplayer(playerId).setControls(true);
        } else if (jwplayer(playerId).getState() == 'playing') {
            jwplayer(playerId).setControls(false);
        }
    });

    //풀스크린리스너
    jwplayer(playerId).on('fullscreen', function (obj) {
        if (window.androidApp) {
            if (obj.fullscreen) {
                //세로잠금해제
                window.androidApp.setOrientationChange(false);
            } else {
                //세로잠금처리
                window.androidApp.setOrientationChange(true);
            }
        } else {
            $('#container').css('z-index', '99999');
            $('#' + playerId).css('z-index', '99999');
        }
    });

    if ($('div.wrap_vod').length == 1) {
        $('div.wrap_vod').focus();
    }
    if ($('div.vod-wrap').length == 1) {
        $('div.vod-wrap').focus();
    }

    var vodLogChk = false;

    if (!isEmpty(mobileGubun)) //모바일 처리
    {
        if (!isEmpty(playType)) {
            if ("news" == playType) {
                jwplayer(playerId).on('ready', function () {
                    setTimeout(function () {
                        kbsNewsUi.uiAction.pl_loading_off('.news-media-area');//player loading end
                        $('.news-media-area').append('<a id="btnMainPlay" class="palayer-ico" href="javascript:playVodStart();"><span class="blind">동영상 플레이 버튼</span></a>');

                        $("#ico_loading").remove();
                        $("#btnMainPlay").removeClass('hide');
                        if (navigator.appVersion.indexOf("iPhone") > -1 || navigator.appVersion.indexOf("iPad") > -1) {
                            $("#btnMainFull").addClass('hide');
                        } else {
                            $("#btnMainFull").removeClass('hide');
                        }
                        $('#' + playerId).removeClass('');
                        $('#' + playerId).addClass('sec_video');
                        jwplayer(playerId).stop();
                    }, 1000);
                });
            } else if ("24news" == playType) {
                var i = document.getElementById(playerId);
                // 아이폰이 아닌 경우에만 전체화면 버튼 추가함
                if (i.requestFullscreen || i.webkitRequestFullscreen || i.mozRequestFullScreen || i.msRequestFullscreen) {
                    //
                    jwplayer(playerId).addButton(
                        "/resources/images/full_on.png",
                        "전체화면",
                        function () {
                            if (jwplayer(playerId).getFullscreen()) {
                                //일반화면 전환
                                if (document.exitFullscreen) {
                                    document.exitFullscreen();
                                } else if (document.webkitExitFullscreen) {
                                    document.webkitExitFullscreen();
                                } else if (document.mozCancelFullScreen) {
                                    document.mozCancelFullScreen();
                                } else if (document.msExitFullscreen) {
                                    document.msExitFullscreen();
                                }
                            } else {
                                //전체화면 전환(iOs에서는 작동안함)
                                var i = document.getElementById(playerId);
                                // go full-screen
                                if (i.requestFullscreen) {
                                    i.requestFullscreen();
                                } else if (i.webkitRequestFullscreen) {
                                    i.webkitRequestFullscreen();
                                } else if (i.mozRequestFullScreen) {
                                    i.mozRequestFullScreen();
                                } else if (i.msRequestFullscreen) {
                                    i.msRequestFullscreen();
                                }
                            }
                        },
                        "fullScreenButton"
                    );
                    //
                }

                jwplayer(playerId).on('ready', function () {
                    setTimeout(function () {
                        $("#btnMainPlay").removeClass('hide');
                        if (navigator.appVersion.indexOf("iPhone") > -1 || navigator.appVersion.indexOf("iPad") > -1) {
                            $("#btnMainFull").addClass('hide');
                        } else {
                            $("#btnMainFull").removeClass('hide');
                        }

                        $('#' + playerId).removeClass('');
                        jwplayer(playerId).stop();
                    }, 1000);
                });
            } else if ("quiz" == playType) {
                jwplayer(playerId).on('ready', function () {
                    setTimeout(function () {
                        $("#btn" + playerId).removeClass('hide');
                        $('#' + playerId).removeClass('');
                        jwplayer(playerId).stop();
                    }, 1000);
                });
            } else if ("sport" == playType) {

                jwplayer(playerId).on('ready', function () {
                    setTimeout(function () {
                        $('#' + playerId).removeClass('');
                        jwplayer(playerId).stop();
                    }, 1000);
                });

                vodLogChk = false;
            } else {
                jwplayer(playerId).on('ready', function () {
                    $('#' + playerId).removeClass('');
                });

                if (!isEmpty(vodPlayListInfo)) //뉴스코드가 있을경우 재생로그 기록
                {
                    vodLogChk = true;
                }
            }
        }

        jwplayer().on('fullscreen', function () {
            var i = document.getElementById(playerId);

            if (jwplayer(playerId).getFullscreen()) {
                // 아이폰일 경우 풀스크린이 안되므로 버튼 추가 안함
                if (!(i.requestFullscreen || i.webkitRequestFullscreen || i.mozRequestFullScreen || i.msRequestFullscreen)) {
                    return;
                }

                jwplayer(playerId).addButton(
                    "/resources/images/full_on.png",
                    "전체화면",
                    function () {
                        if (jwplayer(playerId).getFullscreen()) {
                            //일반화면 전환
                            if (document.exitFullscreen) {
                                document.exitFullscreen();
                            } else if (document.webkitExitFullscreen) {
                                document.webkitExitFullscreen();
                            } else if (document.mozCancelFullScreen) {
                                document.mozCancelFullScreen();
                            } else if (document.msExitFullscreen) {
                                document.msExitFullscreen();
                            }
                        } else {
                            //전체화면 전환(iOs에서는 작동안함)
                            var i = document.getElementById(playerId);
                            // go full-screen
                            if (i.requestFullscreen) {
                                i.requestFullscreen();
                            } else if (i.webkitRequestFullscreen) {
                                i.webkitRequestFullscreen();
                            } else if (i.mozRequestFullScreen) {
                                i.mozRequestFullScreen();
                            } else if (i.msRequestFullscreen) {
                                i.msRequestFullscreen();
                            }
                        }
                    },
                    "fullScreenButton"
                );

            } else {
                if ("24news" != playType) {
                    jwplayer(playerId).removeButton("fullScreenButton");
                }

            }

        });
    } else {
        if (!isEmpty(vodPlayListInfo)) //뉴스코드가 있을경우 재생로그 기록
        {
            vodLogChk = true;
        }
    }

    if (vodLogChk) //뉴스코드가 있을경우 재생로그 기록
    {
        //플레이목록 선택시 재생로그 추가
        jwplayer(playerId).on('playlistItem', function (obj) {
            var idx = obj.index;
            var strUrl = "";
            var newsCode = "";

            if (vodPlayListInfo.length == 1) {
                newsCode = vodPlayListInfo[0].newscode;
            } else {
                for (var i = 0; i < vodPlayListInfo.length; i++) {
                    if (vodPlayListInfo[i].vodIndex == idx) {
                        newsCode = vodPlayListInfo[i].newscode;
                    }
                }
            }
        });
    }
}

var sendVodWatchLog = function (param4, playerId, offset) {
    if (!offset) {
        offset = null
    }

    if (typeof playerId !== 'undefined') {
        try {
            var param2 = 0;
            var param3 = 0;
            var param12 = 1;
            jwplayerEndTime = dayjs();
            if (!isEmpty(jwplayerStartTime)) {
                // 내림으로 설정 : 반올림 시 동영상 길이보다 시청 길이가 길게 나오는 경우 발생
                jwplayerWatchTime = Math.floor(dayjs.duration(jwplayerEndTime.diff(jwplayerStartTime)).asSeconds());
            }

            // 이전 코드 사용(jwplayerStateCode) : 코드가 P이고 jwplayerPauseStartTime 빈값이 아닐 때 jwplayerPausedTime을 증가
            if (!isEmpty(jwplayerPauseStartTime) && (jwplayerStateCode == 'P' || jwplayerStateCode == 'M')) {
                jwplayerPausedTime += Math.round(dayjs.duration(jwplayerEndTime.diff(jwplayerPauseStartTime)).asSeconds());
                jwplayerPauseStartTime = null;
            }

            // jwplayerPausedTime이 빈값이 아닐 경우 watchTime에서 제외
            if (!isEmpty(jwplayerPausedTime)) {
                jwplayerWatchTime = jwplayerWatchTime - jwplayerPausedTime;
            }

            param2 = Math.round(jwplayer().getDuration());
            param3 = Math.floor(jwplayer().getPosition());

            if (!isEmpty(offset)) {
                param3 = Math.floor(offset);
            }

            // 현재 코드 변경 (jwplayerStateCode)
            // S : start
            // P : pause
            // M : move (seek)
            // C : complete
            // B : beforeunload (unload)
            if (jwplayerStateCode != 'B') {
                switch (jwplayer().getState()) {
                    case 'playing':
                        // play 중 seek bar  이동
                        if (jwplayerStateCode == 'M') {
                            break;
                        }
                        jwplayerStateCode = 'S';
                        break;
                    case 'paused':
                        // pause 중 seek bar  이동
                        if (jwplayerStateCode == 'M') {
                            break;
                        }
                        jwplayerStateCode = 'P';
                        break;
                    case 'complete':
                        jwplayerStateCode = 'C';
                        jwplayerFirstStart = true;
                        jwplayerPausedTime = 0;
                        break;
                }
            }

            var param12 = 1;
            // try를 하나로 묶으면 weblog 초기 호출 시 전송실패 발생으로 분리
            try {
                // 1개 JW_PLAYER / 2개 이상 player_contentsTag_0 ~ 개수
                if (playerId.startsWith('player')) {
                    // 기사에 동영상이 몇개가 들어갈지 알 수 없어 가변적으로 적용
                    param12 = parseInt(playerId.substr(playerId.lastIndexOf('_') + 1)) + 1;
                }
            } catch (ex) {
                console.error('sendVodWatchLog function param12 parse error', ex.message);
            }

            // param4가 on air일 경우(24시 뉴스 / 방송뉴스 / 지역뉴스) 영상의 길이가 없으므로 0입력
            if (param4.startWith('on')) {
                param2 = '0';
            } else {
                if (param2 * 2 <= jwplayerWatchTime) {
                    jwplayerWatchTime = param2;
                }
            }

            window._add_rte('watch', 'VOD', param2, param3, param4, '', jwplayerWatchTime, jwplayerStateCode, '', '', '', '', param12);
        } catch (e) {
            // 새로고침 시 플레이어가 생성되기 전 발생
            console.error('sendVodWatchLog : ', e.message);
        }
    }
};

var sendVodWatchLogInterval = function (param4, playerId) {
    var param12 = 1;
    try {
        if (playerId.startsWith('player')) {
            param12 = parseInt(playerId.substr(playerId.lastIndexOf('_') + 1)) + 1;
        }
    } catch (ex) {
        console.error('sendVodWatchLogInterval function param12 parse error', ex.message);
    }

    jwplayerEndTime = dayjs();
    jwplayerWatchTime = Math.floor(dayjs.duration(jwplayerEndTime.diff(jwplayerStartTime)).asSeconds());

    if (!isEmpty(jwplayerPausedTime)) {
        jwplayerWatchTime = jwplayerWatchTime - jwplayerPausedTime;
    }

    switch (jwplayer().getState()) {
        case 'playing':
            jwplayerStateCode = 'S';
            break;
        case 'paused':
            // pause 중 seek bar  이동
            if (jwplayerStateCode == 'M') {
                break;
            }
            jwplayerStateCode = 'P';
            break;
        case 'complete':
            jwplayerStateCode = 'C';
            jwplayerFirstStart = true;
            jwplayerPausedTime = 0;
            break;
    }

    var id = setInterval(function () {
        jwplayerWatchTime = jwplayerWatchTime + 30;

        // param4가 on air일 경우(24시 뉴스 / 방송뉴스 / 지역뉴스) 영상의 길이가 없으므로 0입력
        var param2 = Math.round(jwplayer().getDuration());
        if (param4.startWith('on')) {
            param2 = '0';
        } else {
            // 동영상 기사에서 시청시간이 동영상 시간의 2배보다 길 경우 : 시청시간을 동영상 길이로 변경 후 interval 종료
            if (param2 * 2 <= jwplayerWatchTime) {
                jwplayerWatchTime = param2;
                jwplayerStateCode = 'C';
                jwplayerFirstStart = true;
                jwplayerPausedTime = 0;
                clearInterval(id);
            }
        }

        window._add_rte('watch', 'VOD', param2, Math.floor(jwplayer().getPosition()), param4, '', jwplayerWatchTime, jwplayerStateCode, '', '', '', '', param12);
    }, 30000);

    return id;
}

var getLocalKBSVodUrl = function (vodUrl) {
    $.ajax({
        url: application.rootUrlPrefix+ '/api/getCdnNewsVodUrl',
        type: "POST",
        async: false,
        dataType: 'json',
        data: {cdnVodUrl: vodUrl},
        success: function (data, status) {
            if (!isEmpty(data.onetime_url)) {
                vodUrl = data.onetime_url;
            } else {
                vodUrl = null;
                popAlert('E', 'VOD Url 정보를 가지고 오는데 실패하였습니다.');
            }
        },
        error: function (request, status, error) {
            vodUrl = null;
            popAlert('E', 'VOD Url 정보를 가지고 오는데 실패하였습니다. >> [' + error + ']');
        }
    });

    return vodUrl;
};

var getLocalNewsVodUrl = function (vodUrl, startTime, endTime) {

    var localDuration = endTime - startTime;
    var arrUrl = vodUrl.split('|');
    var cdn_url = "http://kbsmp4.kbs.gscdn.com/koreanet/_definst_/mp4:KBS_CMS_LC/" + arrUrl[arrUrl.length - 1] + "/playlist.m3u8";

    $.ajax({
        url: application.rootUrlPrefix+ '/api/getCdnNewsVodUrl',
        type: "POST",
        async: false,
        dataType: 'json',
        data: {cdnVodUrl: cdn_url},
        success: function (data, status) {
            if (!isEmpty(data.onetime_url)) {
                vodUrl = data.onetime_url + "&wowzaplaystart=" + startTime + "&wowzaplayduration=" + localDuration;
            } else {
                vodUrl = null;
                popAlert('E', 'VOD Url 정보를 가지고 오는데 실패하였습니다.');
            }
        },
        error: function (request, status, error) {
            vodUrl = null;
            popAlert('E', 'VOD Url 정보를 가지고 오는데 실패하였습니다. >> [' + error + ']');
        }
    });

    return vodUrl;
};

var getPlayBtnNmLocal = function (vodUrl, duty, blockingYn) {
    var playBtnImg = "";

    if (duty == 'Y') {
        playBtnImg = "<p>방송 영상의 인터넷 저작권/전송권 문제로 다시보기 서비스를 하지 않습니다. </p><p>이용에 불편을 드려 죄송합니다.</p>";
    }

    if ("Y" == blockingYn) {
        var blocking = '';
        $.ajax({
            url: application.rootUrlPrefix+ '/api/getBlockingIp.do',
            type: "POST",
            async: false,
            dataType: 'json',
            success: function (data, status) {
                if (!isEmpty(data.blocking) && data.blocking.resultcode == 1) {
                    blocking = data.blocking.blockingYn;
                }
            },
            error: function (request, status, error) {
                blocking = 'N';
            }
        });

        if ("N" == blocking) {

            playBtnImg = "<p>방송 영상의 인터넷 저작권/전송권 문제로 다시보기 서비스를 하지 않습니다. </p><p>이용이 불편을 드려 죄송합니다.</p>";
            ;
        }
    }

    if (playBtnImg == 'undefined' || playBtnImg == '') {
        $('.btn-play').show('hide');
        $('#btnDuty').addClass('hide');
    } else {
        $('.btn-play').hide();
        $('#btnDuty').append(playBtnImg);
        $('#btnDuty').removeClass('hide');
    }
};

</script>










<div class="box head-line main-head-line main-page-head-line">
    <div class="box-contents">
        <div class="main-news-wrapper">

            <a href="/news/pc/view/view.do?ncd&#x3D;8363602" class="main-news box-content" aria-label="헤드라인 링크">
                <div class="thumbnail width-612">
                    <img class="img" src="/data/layer/904/2025/09/20250922_orX6Nn.jpg" alt="이 대통령 “통화 스와프 없이 미국 요구 수용하면 금융 위기” 기사 이미지" onerror="javascript:handleError(this);"/>
                    <span class="play-icon large"></span>
                </div>
                <div class="txt-wrapper">
                    <p class="title">
                        이 대통령 “통화 스와프 없이 미국 요구 수용하면 금융 위기”
                    </p>
                    <p class="news-txt">
                        유엔총회를 앞두고 이재명 대통령이 외신과의 인터뷰에 나섰습니다. 미국과의 관세 문제를 가능한 조속히 해결하려는 목표를 갖고 있다면서도, 미국의 요구를 통화 스와프 없이...
                    </p>
                </div>
            </a>
        </div>
        <div class="small-sub-news-wrapper">
            
            <a href="/news/pc/view/view.do?ncd&#x3D;8363429" class="box-content" aria-label="헤드라인 링크">
                <div class="thumbnail">
                    <img src="/data/layer/904/2025/09/20250922_uMVwaQ.jpg" alt="김정은 “트럼프에 좋은 추억…비핵화 절대 없어” 기사 이미지" class="img" onerror="javascript:handleError(this);"/>
                    <span class="play-icon"></span>
                </div>
                <div class="txt-wrapper">
                    <p class="title">
                        김정은 “트럼프에 좋은 추억…비핵화 절대 없어”
                    </p>
                </div>
            </a>
            
            <a href="/news/pc/view/view.do?ncd&#x3D;8363390" class="box-content" aria-label="헤드라인 링크">
                <div class="thumbnail">
                    <img src="/data/layer/904/2025/09/20250922_3mNdQF.jpg" alt="“윤석열 구속 취소 왜 수용했나” …심우정 전 총장 특검 소환 기사 이미지" class="img" onerror="javascript:handleError(this);"/>
                    <span class="play-icon"></span>
                </div>
                <div class="txt-wrapper">
                    <p class="title">
                        “윤석열 구속 취소 왜 수용했나” …심우정 전 총장 특검 소환
                    </p>
                </div>
            </a>
            
            <a href="/news/pc/view/view.do?ncd&#x3D;8363391" class="box-content" aria-label="헤드라인 링크">
                <div class="thumbnail">
                    <img src="/data/layer/904/2025/09/20250922_6ZuKNt.jpg" alt="‘김건희 청탁’ 한학자 총재 오늘 구속 갈림길 기사 이미지" class="img" onerror="javascript:handleError(this);"/>
                    <span class="play-icon"></span>
                </div>
                <div class="txt-wrapper">
                    <p class="title">
                        ‘김건희 청탁’ 한학자 총재 오늘 구속 갈림길
                    </p>
                </div>
            </a>
            
            <a href="/news/pc/view/view.do?ncd&#x3D;8363396" class="box-content" aria-label="헤드라인 링크">
                <div class="thumbnail">
                    <img src="/data/layer/904/2025/09/20250922_lcaoWc.jpg" alt="오늘부터 2차 소비쿠폰 신청·&lt;br&gt;지급…상위 10% 제외 기사 이미지" class="img" onerror="javascript:handleError(this);"/>
                    <span class="play-icon"></span>
                </div>
                <div class="txt-wrapper">
                    <p class="title">
                        오늘부터 2차 소비쿠폰 신청·<br>지급…상위 10% 제외
                    </p>
                </div>
            </a>
            
            <a href="/news/pc/view/view.do?ncd&#x3D;8363399" class="box-content" aria-label="헤드라인 링크">
                <div class="thumbnail">
                    <img src="/data/layer/904/2025/09/20250922_j4jzv7.jpg" alt="미국 ‘ESTA’ 수수료 2배로…“전문직 비자 100배 인상은 신규만” 기사 이미지" class="img" onerror="javascript:handleError(this);"/>
                    <span class="play-icon"></span>
                </div>
                <div class="txt-wrapper">
                    <p class="title">
                        미국 ‘ESTA’ 수수료 2배로…“전문직 비자 100배 인상은 신규만”
                    </p>
                </div>
            </a>
            
            <a href="/news/pc/view/view.do?ncd&#x3D;8363527" class="box-content" aria-label="헤드라인 링크">
                <div class="thumbnail">
                    <img src="/data/fckeditor/new/image/2025/09/22/n00131758493791158.jpg" alt="‘팔레스타인 국가 인정’ 으로 돌아서는 미국 우방들…한국의 선택은? 기사 이미지" class="img" onerror="javascript:handleError(this);"/>
                    <span class=""></span>
                </div>
                <div class="txt-wrapper">
                    <p class="title">
                        ‘팔레스타인 국가 인정’ 으로 돌아서는 미국 우방들…한국의 선택은?
                    </p>
                </div>
            </a>
            
        </div>
    </div>
</div>


<div class="issue-main-video half-box-wrapper">
  
  <div class="box half-box no-padding issue has-tab multi">
    <div class="box-title space-between has-side-padding">
      <h4 class="title">‘특검 수사’ 본격화</h4>
    </div>
    <ul class="tab-contents" id="issue">
      
      <li class="tab-contents-list on">
        <div class="box-contents has-padding">
          <a href="/news/view.do?ncd&#x3D;8363381" class="box-content" aria-label="이슈 기사 링크">
            <div class="thumbnail width-286">
              <img class="img" src="/data/news/2025/09/22/20250922_QylQD8.jpg" alt="‘집사게이트’ 핵심 인물 김예성, 오늘 재판 시작" onerror="javascript:handleError(this);">
              
            </div>
            <div class="txt-wrapper">
              <p class="title normal-weight">‘집사게이트’ 핵심 인물 김예성, 오늘 재판 시작</p>
            </div>
          </a>
          <a href="/news/view.do?ncd&#x3D;8363159" class="box-content" aria-label="이슈 기사 링크">
            <div class="thumbnail width-286">
              <img class="img" src="/data/fckeditor/new/image/2025/09/21/316891758341814933.jpg" alt="안귀령에 총 겨눈 군인…“종북세력 막으러 갔더니”" onerror="javascript:handleError(this);">
              
              <span class="play-icon"></span>
              
            </div>
            <div class="txt-wrapper">
              <p class="title normal-weight">안귀령에 총 겨눈 군인…“종북세력 막으러 갔더니”</p>
            </div>
          </a>
        </div>
        <div class="look-more-wrapper">
          <a href="https://news.kbs.co.kr/news/pc/issue/issueList.do?icd&#x3D;19708#1" class="look-more" aria-label="이슈 링크">
            <span class="txt">더보기</span>
            <span class="plus-btn"></span>
          </a>
        </div>
      </li>
      
    </ul>
  </div>

  

  <div class="box half-box no-padding main-video">
    <div class="box-title has-side-padding">
      <h4 class="title">주요영상</h4>
    </div>
    <div class="main-video-slide swiper has-padding">
      <ul class="swiper-wrapper">
        <li class="swiper-slide">
          <a class="box-content" aria-label="이슈 기사 링크" href="" role="button">
            <div class="thumbnail width-286">
              <img class="img" src="" alt="" onerror="javascript:handleError(this);">
              <span class=""></span>
            </div>
            <div class="txt-wrapper">
              <p class="title normal-weight"></p>
            </div>
          </a>
        </li>
      </ul>
    </div>

    <div class="pagination-group-wrapper">
      <div class="pagination-group">
        <button type="button" class="previous main-video-previous" aria-label="슬라이드 이전 버튼">
          <span class="txt">이전</span>
        </button>
        <span class="main-video-pagination pagination"></span>
        <button type="button" class="next main-video-next" aria-label="슬라이드 다음 버튼">
          <span class="txt">다음</span>
        </button>
      </div>
    </div>

  </div>
</div>

<script type="text/javascript">
  var issueTypeList = ['multi', 'list', 'one', 'live', 'dandok', 'custom'];
var isIssueDataFetched = false;
var isMainVideoDataFetched = false;

$(function () {
	// getMainIssueNews();
	getTodayTopNews();
});

// 이슈
function getMainIssueNews() {
	getExposeData('mainIssueNews', getParameterByName('pubExec'), function (data) {
		// 이슈 타입 인덱스(0: 2개 이미지/타이틀, 1: 4개 타이틀, 2: 1개 이미지/타이틀, 3: ISSUE LIVE, 4: 단독보도, 5: 취재K)
		var issueTypeIndex = issueTypeList.indexOf(data.displayType);

		// $('.issue-main-video .half-box').eq(issueTypeIndex).css('display', 'block');

		if (issueTypeIndex == 0) {
			// multi
			for (var i = 0; i < data.multiIssue.length; i++) {
				var $tag_li = $('.issue-main-video .half-box').eq(issueTypeIndex).find('.box-title ul li').first().clone();
				$tag_li.find('button').html(data.multiIssue[i].issueName);
				$('.issue-main-video .half-box').eq(issueTypeIndex).find('.box-title ul').append($tag_li);

				var $a0 = $('#issue li').eq(i).find('div:eq(0) a:eq(0)');
				var $a1 = $('#issue li').eq(i).find('div:eq(0) a:eq(1)');

				$a0.attr('href', data.multiIssue[i].firstArticleUrl);
				$a0.find('img').attr('src', data.multiIssue[i].firstImageUrl)

				if (data.multiIssue[i].firstArticleText) {
					$a0.find('img').attr('alt', data.multiIssue[i].firstArticleText);
				} else {
					$a0.find('img').attr('alt', "KBS 뉴스 이미지");
				}

				if (data.multiIssue[i].firstArticleVodUrl) {
					$a0.find('img').next('span').addClass('play-icon');
				}
				$a0.find('p.title').text(data.multiIssue[i].firstArticleText);


				$a1.attr('href', data.multiIssue[i].secondArticleUrl);
				$a1.find('img').attr('src', data.multiIssue[i].secondImageUrl);

				if (data.multiIssue[i].secondArticleText) {
					$a1.find('img').attr('alt', data.multiIssue[i].secondArticleText);
				} else {
					$a1.find('img').attr('alt', "KBS 뉴스 이미지");
				}

				if (data.multiIssue[i].secondArticleVodUrl) {
					$a1.find('img').next('span').addClass('play-icon');
				}
				$a1.find('p.title').text(data.multiIssue[i].secondArticleText);

				$('#issue li').eq(i).find('a.look-more').attr('href', data.multiIssue[i].moreUrl);
			}

			$('.issue-main-video .half-box').eq(issueTypeIndex).find('.box-title ul li').first().remove();
			$('.issue-main-video .half-box').eq(issueTypeIndex).find('.box-title ul li').first().addClass('on');
			// $('#issue>div').first().remove();
			// $('#issue>div:not(:first)').css('display', 'none');
		} else if (issueTypeIndex == 1) {
			// list
			for (var i = 0; i < Math.min(data.listIssue.length, 2); i++) {
				var $tag_li = $('.issue-main-video .half-box').eq(issueTypeIndex).find('.box-title ul li').first().clone();
				$tag_li.find('button').html(data.listIssue[i].issueName);
				$('.issue-main-video .half-box').eq(issueTypeIndex).find('.box-title ul').append($tag_li);

				var $li = $('#issue-02 li').first().clone();

				$li.find('a').eq(0).attr('href', data.listIssue[i].firstArticleUrl).find('p.title').text(data.listIssue[i].firstArticleText);
				$li.find('a').eq(1).attr('href', data.listIssue[i].secondArticleUrl).find('p.title').text(data.listIssue[i].secondArticleText);
				$li.find('a').eq(2).attr('href', data.listIssue[i].thirdArticleUrl).find('p.title').text(data.listIssue[i].thirdArticleText);
				$li.find('a').eq(3).attr('href', data.listIssue[i].fourthArticleUrl).find('p.title').text(data.listIssue[i].fourthArticleText);

				$li.find('.look-more').attr('href', data.listIssue[i].moreUrl);

				$('#issue-02').append($li);
			}

			$('.issue-main-video .half-box').eq(issueTypeIndex).find('.box-title ul li').first().remove();
			$('.issue-main-video .half-box').eq(issueTypeIndex).find('.box-title ul li').first().addClass('on');
			$('#issue-02 li').first().remove();
		} else if (issueTypeIndex == 2) {
			// one
			$('.issue-main-video .half-box').eq(issueTypeIndex).find('a').attr('href', data.oneIssue[0].articleUrl);
			$('.issue-main-video .half-box').eq(issueTypeIndex).find('a img').attr('src', data.oneIssue[0].imageUrl);

			if (data.oneIssue[0].articleText) {
				$('.issue-main-video .half-box').eq(issueTypeIndex).find('a img').attr('alt', data.oneIssue[0].articleText);
			} else {
				$('.issue-main-video .half-box').eq(issueTypeIndex).find('a img').attr('alt', "KBS 뉴스 이미지");
			}

			if (data.oneIssue[0].articleVodUrl) {
				$('.issue-main-video .half-box').eq(issueTypeIndex).find('a img').nextAll('span').first().addClass('play-icon');
				$('.issue-main-video .half-box').eq(issueTypeIndex).find('.overlay-txt').first().addClass('video');
			}
			$('.issue-main-video .half-box').eq(issueTypeIndex).find('a p.title').text(data.oneIssue[0].articleText);
		} else if (issueTypeIndex == 3) {
			// live
			$('.issue-main-video .half-box').eq(issueTypeIndex).find('a').attr('href', data.liveIssue[0].articleUrl);
			$('.issue-main-video .half-box').eq(issueTypeIndex).find('a img').attr('src', data.liveIssue[0].imageUrl);

			if (data.liveIssue[0].articleText) {
				$('.issue-main-video .half-box').eq(issueTypeIndex).find('a img').attr('alt', data.liveIssue[0].articleText);
			} else {
				$('.issue-main-video .half-box').eq(issueTypeIndex).find('a img').attr('alt', "KBS 뉴스 이미지");
			}

			if (data.liveIssue[0].articleVodUrl) {
				$('.issue-main-video .half-box').eq(issueTypeIndex).find('a img').nextAll('span').first().addClass('play-icon');
				$('.issue-main-video .half-box').eq(issueTypeIndex).find('.overlay-txt').first().addClass('video');
			}
			$('.issue-main-video .half-box').eq(issueTypeIndex).find('a p.title').text(data.liveIssue[0].articleText);
		} else if (issueTypeIndex == 4) {
			// dandok
			$('.issue-main-video .half-box').eq(issueTypeIndex).find('a').attr('href', data.dandokIssue[0].articleUrl);
			$('.issue-main-video .half-box').eq(issueTypeIndex).find('a img').attr('src', data.dandokIssue[0].imageUrl)

			if (data.dandokIssue[0].articleText) {
				$('.issue-main-video .half-box').eq(issueTypeIndex).find('a img').attr('alt', data.dandokIssue[0].articleText);
			} else {
				$('.issue-main-video .half-box').eq(issueTypeIndex).find('a img').attr('alt', "KBS 뉴스 이미지");
			}

			if (data.dandokIssue[0].articleVodUrl) {
				$('.issue-main-video .half-box').eq(issueTypeIndex).find('a img').nextAll('span').first().addClass('play-icon');
				$('.issue-main-video .half-box').eq(issueTypeIndex).find('.overlay-txt').first().addClass('video');
			}
			$('.issue-main-video .half-box').eq(issueTypeIndex).find('a p.title').text(data.dandokIssue[0].articleText);
		} else if (issueTypeIndex == 5) {
			// custom
			$('.issue-main-video .half-box').eq(issueTypeIndex).find('h4.title').html(data.customIssue[0].pcTitle);

			$('.issue-main-video .half-box').eq(issueTypeIndex).find('a.box-content:eq(0)').attr('href', data.customIssue[0].firstArticleUrl).find('p.title').text(data.customIssue[0].firstArticleText);
			$('.issue-main-video .half-box').eq(issueTypeIndex).find('a.box-content:eq(1)').attr('href', data.customIssue[0].secondArticleUrl).find('p.title').text(data.customIssue[0].secondArticleText);
			$('.issue-main-video .half-box').eq(issueTypeIndex).find('a.box-content:eq(2)').attr('href', data.customIssue[0].thirdArticleUrl).find('p.title').text(data.customIssue[0].thirdArticleText);
			$('.issue-main-video .half-box').eq(issueTypeIndex).find('a.box-content:eq(3)').attr('href', data.customIssue[0].fourthArticleUrl).find('p.title').text(data.customIssue[0].fourthArticleText);
			$('.issue-main-video .half-box').eq(issueTypeIndex).find('a.box-content:eq(4)').attr('href', data.customIssue[0].fifthArticleUrl).find('p.title').text(data.customIssue[0].fifthArticleText);

			if (data.customIssue[0].titleUrl) {
				$('.issue-main-video .half-box').eq(issueTypeIndex).find('.look-more').show()
				$('.issue-main-video .half-box').eq(issueTypeIndex).find('.look-more').attr('href', data.customIssue[0].titleUrl);
			}
		}

		isIssueDataFetched = true;
	});
}

// 주요 영상
function getTodayTopNews() {
	getExposeData(603, getParameterByName('pubExec'), function (data) {
		// data.length가 홀수면 하나를 지우는 로직
		var length = data.length;
		if (length >= 2) {
			var remainder = length % 2;
			data = data.slice(0, length - remainder);
		}

		for (var a = 0; a < data.length; a++) {
			var $li = $('.main-video ul li').first().clone();
			$li.find('a').attr('href', data[a].url);
			$li.find('img').attr('src', data[a].imgUrl);

			if (data[a].title) {
				$li.find('img').attr('alt', data[a].title);
			} else {
				$li.find('img').attr('alt', "KBS 뉴스 이미지");
			}

			if (data[a].vodUrl) {
				$li.find('img').next('span').addClass('play-icon');
			}
			$li.find('p.title').html(data[a].title);
			$('.main-video ul').append($li);
		}

		$('.main-video ul li').first().remove();

		ui.mainVideoSlide();

		isMainVideoDataFetched = true;
	});
}

</script>

<!-- banner -->

<div class="main-banners-wrapper">
  <a class="main-banner" href="https://news.kbs.co.kr/news/pc/issue/issueList.do?icd&#x3D;19708#1" aria-label="메인 배너 링크">
    <img class="img" src="/images/banner/mainBannerPc/20250814_20250714_20250704_KakaoTalk_20250704_191714962_03.png" alt="KBS 뉴스 이미지"/>
    <p class="main-banner-text">바로가기</p>
  </a>
  <a class="main-banner" href="https://news.kbs.co.kr/news/pc/issue/issueList.do?icd&#x3D;19710#1" aria-label="메인 배너 링크">
    <img class="img" src="/images/banner/mainBannerPc/20250907_KakaoTalk_20250906_163541968_01.png" alt="KBS 뉴스 이미지"/>
    <p class="main-banner-text">바로가기</p>
  </a>
</div>



<div class="box k-recommend-news">
    <div class="box-title">
        <h4 class="title">이 시각 추천 뉴스</h4>
    </div>
    <div class="box-contents">
        <div class="recommend-list">
            <a href="/news/pc/view/view.do?ncd&#x3D;8363417" class="box-content" aria-label="이 시각 추천 뉴스 링크">
                <div class="thumbnail width-400">
                    <img class="img" src="/data/layer/602/2025/09/20250922_rBXmRI.jpg" alt="“집값 띄우기는 오해?”…서울 아파트 거래취소 분석해 보니 기사 이미지" onerror="javascript:handleError(this);"/>
                    <span class="play-icon"></span>
                </div>
                <div class="txt-wrapper">
                    <p class="title">
                        “집값 띄우기는 오해?”…서울 아파트 거래취소 분석해 보니
                    </p>
                </div>
            </a>
            <a href="/news/pc/view/view.do?ncd&#x3D;8363380" class="box-content sub-content" aria-label="이 시각 추천 뉴스 링크">
                <div class="thumbnail">
                    <img class="img" src="/data/news/2025/09/22/20250922_32ckau.jpg" alt="이 대통령, 오늘 유엔총회 참석 위해 방미…기조연설·안보리 토의 주재 기사 이미지" onerror="javascript:handleError(this);"/>
                </div>
                <div class="txt-wrapper">
                    <p class="title normal-weight">
                        이 대통령, 오늘 유엔총회 참석 위해 방미…기조연설·안보리 토의 주재
                    </p>
                </div>
            </a>
            <a href="/news/pc/view/view.do?ncd&#x3D;8363397" class="box-content sub-content" aria-label="이 시각 추천 뉴스 링크">
                <div class="thumbnail">
                    <img class="img" src="/data/news/title_image/newsmp4/newsplaza_p1/2025/09/22/90_8363397.jpg" alt="“무단 소액결제 피해지역 더 있다”…KT “확인에 시간 걸렸을 뿐” 기사 이미지" onerror="javascript:handleError(this);"/>
                </div>
                <div class="txt-wrapper">
                    <p class="title normal-weight">
                        “무단 소액결제 피해지역 더 있다”…KT “확인에 시간 걸렸을 뿐”
                    </p>
                </div>
            </a>
        </div>
        <div class="recommend-list">
            <a href="/news/pc/view/view.do?ncd&#x3D;8363410" class="box-content" aria-label="이 시각 추천 뉴스 링크">
                <div class="thumbnail width-400">
                    <img class="img" src="/data/layer/602/2025/09/20250922_ycCRet.jpg" alt="“달릴수록 손해”…기로에 선 마을버스 환승할인 기사 이미지" onerror="javascript:handleError(this);"/>
                    <span class="play-icon"></span>
                </div>
                <div class="txt-wrapper">
                    <p class="title">
                        “달릴수록 손해”…기로에 선 마을버스 환승할인
                    </p>
                </div>
            </a>
            <a href="/news/pc/view/view.do?ncd&#x3D;8363395" class="box-content sub-content" aria-label="이 시각 추천 뉴스 링크">
                <div class="thumbnail">
                    <img class="img" src="/data/news/2025/09/22/20250922_pKCLoV.png" alt="여 “내란 세력에 무관용…국힘, 대선 불복 장외 투정” 기사 이미지" onerror="javascript:handleError(this);"/>
                </div>
                <div class="txt-wrapper">
                    <p class="title normal-weight">
                        여 “내란 세력에 무관용…국힘, 대선 불복 장외 투정”
                    </p>
                </div>
            </a>
            <a href="/news/pc/view/view.do?ncd&#x3D;8363403" class="box-content sub-content" aria-label="이 시각 추천 뉴스 링크">
                <div class="thumbnail">
                    <img class="img" src="/data/news/title_image/newsmp4/newsplaza_p1/2025/09/22/150_8363403.jpg" alt="심야 다세대주택서 화재…40대 어머니 끝내 숨져 기사 이미지" onerror="javascript:handleError(this);"/>
                </div>
                <div class="txt-wrapper">
                    <p class="title normal-weight">
                        심야 다세대주택서 화재…40대 어머니 끝내 숨져
                    </p>
                </div>
            </a>
        </div>
        <div class="recommend-list">
            <a href="/news/pc/view/view.do?ncd&#x3D;8363416" class="box-content" aria-label="이 시각 추천 뉴스 링크">
                <div class="thumbnail width-400">
                    <img class="img" src="/data/layer/602/2025/09/20250922_O2bR6c.jpg" alt="“K라면만 죄다 찾으니까”…반성문 쓴 일본 라면 회사들 기사 이미지" onerror="javascript:handleError(this);"/>
                    <span class="play-icon"></span>
                </div>
                <div class="txt-wrapper">
                    <p class="title">
                        “K라면만 죄다 찾으니까”…반성문 쓴 일본 라면 회사들
                    </p>
                </div>
            </a>
            <a href="/news/pc/view/view.do?ncd&#x3D;8363315" class="box-content sub-content" aria-label="이 시각 추천 뉴스 링크">
                <div class="thumbnail">
                    <img class="img" src="/data/news/2025/09/21/20250921_qUhdhl.png" alt="중국 “하룻밤에 차 대리점 70곳 폐업”…중국 화웨이도 ‘중저가’ 차량 출시 기사 이미지" onerror="javascript:handleError(this);"/>
                </div>
                <div class="txt-wrapper">
                    <p class="title normal-weight">
                        중국 “하룻밤에 차 대리점 70곳 폐업”…중국 화웨이도 ‘중저가’ 차량 출시
                    </p>
                </div>
            </a>
            <a href="/news/pc/view/view.do?ncd&#x3D;8363400" class="box-content sub-content" aria-label="이 시각 추천 뉴스 링크">
                <div class="thumbnail">
                    <img class="img" src="/data/news/title_image/newsmp4/newsplaza_p1/2025/09/22/120_8363400.jpg" alt="찰리 커크 추모식에 10만 인파…미 우파 인사 총집결 기사 이미지" onerror="javascript:handleError(this);"/>
                </div>
                <div class="txt-wrapper">
                    <p class="title normal-weight">
                        찰리 커크 추모식에 10만 인파…미 우파 인사 총집결
                    </p>
                </div>
            </a>
        </div>
    </div>
</div>

<script>
    $(function () {
    // getExposeData(867, getParameterByName('pubExec'), function (data) {
    // });
});

</script>
<!-- headline middle -->

<div class="box news-9 no-padding" style="display: none">
    <div class="box-title space-between has-side-padding">
        <h4 class="title">방송 다시보기</h4>
        <a href="" class="look-more">
            <span class="txt">더보기</span>
            <span class="plus-btn"></span>
        </a>
    </div>
    <div class="news-9-slide swiper has-padding">
        <ul class="swiper-wrapper">
            <li class="swiper-slide">
                <a class="box-content" href="" role="button" aria-label="뉴스9 기사 링크">
                    <div class="thumbnail width-294">
                        <img class="img" src="" alt="" onerror="javascript:handleError(this);"/>
                        <span class=""></span>
                        <span class="play-time"></span>
                    </div>
                    <div class="txt-wrapper">
                        <p class="title normal-weight"></p>
                    </div>
                </a>
            </li>
        </ul>
    </div>
    <div class="pagination-group-wrapper">
        <div class="pagination-group">
            <button type="button" class="previous news-9-previous" aria-label="슬라이드 이전 버튼">
                <span class="txt">이전</span>
            </button>
            <span class="news-9-pagination pagination"></span>
            <button type="button" class="next news-9-next" aria-label="슬라이드 다음 버튼">
                <span class="txt">다음</span>
            </button>
        </div>
    </div>
</div>

<script type="text/javascript">
    var result = {};
var currentTime = getKoreaTime();

$(function () {
	getProgramTimeTable();
});

// 프로그램 시간표
function getProgramTimeTable() {
	$.get('/expose/programTimeTable.json', function (data) {
		if (data.length > 0) {
			var currentHour = ("0" + currentTime.getHours()).slice(-2);
			var currentMinute = ("0" + currentTime.getMinutes()).slice(-2);
			var currentHHMM = currentHour + currentMinute;


			for (var i = 0; i < data.length + 1; i++) {
				if (i == data.length) {
					$('.news-9').css('display', 'none');
					break;
				}
				var startTime = data[i].subTitle; // 시작시간
				var endTime = data[i].subUrl; // 끝 시간

				if (startTime <= currentHHMM && currentHHMM <= endTime) {
					result = data[i];
					getPreNextBroadDate();
					break;
				}
			}
		}
	});
}

function getPreNextBroadDate() {
	var yesterday = currentTime;
	yesterday.setDate(yesterday.getDate() - 1);

	// code 값을 넣을 컬럼이 없어서 result.imgDesc 컬럼에 넣은것 오류 아님
	$.get('https://news.kbs.co.kr/api/getPreNextBroadDate?broadCode=' + result.imgDesc + '&broadDate=' + formatDateTime(yesterday).substring(0, 8), function (data) {
		 if (data && data.data && data.data.nextDate) {
			// code 값을 넣을 컬럼이 없어서 result.imgDesc 컬럼에 넣은것 오류 아님
			$.get('https://news.kbs.co.kr/api/getNewsList?currentPageNo=1&exceptPhotoYn=Y&rowsPerPage=48&broadCode=' + result.imgDesc + '&broadDate=' + formatDateTime(getKoreaTime()).substring(0, 8) + '&orderBy=broadDate_desc%2CbroadOrder_asc', function (newsData) {
				if (newsData && newsData.data && newsData.data.length > 0) {
					var currentTime = getKoreaTime();
					var today = formatDateTime(currentTime).substring(0, 8);
					$('.news-9 h4.title').html(result.title + ' 방송 다시보기<span class="date">(' + today.replace(/(\d{4})(\d{2})(\d{2})/, '$1.$2.$3') + ')</span>');

					// code 값을 넣을 컬럼이 없어서 result.imgDesc 컬럼에 넣은것 오류 아님
					$('.news-9 a.look-more').first().attr('href', '/news/pc/program/program.do?bcd=' + result.imgDesc + '&' + formatDateTime(getKoreaTime()).substring(0, 8)+ '&1');
					for (var i = 0; i < newsData.data.length; i++) {
						var $li = $('.news-9 .news-9-slide ul li').first().clone();
						$li.find('a').attr('href', "/news/pc/view/view.do?ncd=" + newsData.data[i].newsCode);
						$li.find('a span.play-time').text(newsData.data[i].vodDuration);
						$li.find('a img').attr('src', newsData.data[i].imgUrl)

						$li.find('a img').attr('alt', newsData.data[i].newsTitle);

						if (newsData.data[i].vodYn == 'Y') {
							$li.find('a img').next('span').addClass('play-icon');
						}
						$li.find('a p.title').html(newsData.data[i].newsTitle);

						$('.news-9 .news-9-slide ul').append($li);
					}
					$('.news-9 .news-9-slide ul li').first().remove();

					ui.nineSlide();

					$('.news-9').show();
				}
			})
		}
	});
}

</script>

<div class="shorts-youtube half-box-wrapper">

  <!-- youtube-live-news -->
  <div class="youtube-live-news box half-box no-padding">
    <div class="box-title has-side-padding">
      <h4 class="title">유튜브 라이브</h4>
      <p class="sub-title">실시간으로 전하는 생생한 현장 소식</p>
    </div>
    <div class="youtube-live-news-slide swiper has-padding data">
      <ul class="swiper-wrapper">
        <li class="swiper-slide">
          <a class="box-content" href="" role="button" target="_blank" aria-label="유튜브 라이브 링크">
            <div class="thumbnail width-286">
              <img class="img" src="" alt="" onerror="javascript:handleError(this);"/>
              <span class=""></span>
            </div>
            <div class="txt-wrapper">
              <p class="title normal-weight"></p>
            </div>
          </a>
        </li>
      </ul>
    </div>
    <div class="pagination-group-wrapper data">
      <div class="pagination-group">
        <button type="button" class="previous youtube-live-news-previous">
          <span class="txt">이전</span>
        </button>
        <span class="youtube-live-news-pagination pagination"></span>
        <button type="button" class="next youtube-live-news-next">
          <span class="txt">다음</span>
        </button>
      </div>
    </div>
    <div class="no-data" style="display: none;">
      <p class="txt">준비중입니다.</p>
    </div>
  </div>

  <!-- k-shorts -->
  <div class="k-shorts box half-box no-padding">
    <div class="box-title has-side-padding">
      <h4 class="title">오늘의 쇼츠</h4>
      <p class="sub-title">짧지만 임팩트 있는 숏폼 뉴스</p>
    </div>
    <div class="k-shorts-slide swiper has-padding data">
      <ul class="swiper-wrapper"></ul>
    </div>
    <div class="pagination-group-wrapper data">
      <div class="pagination-group">
        <button type="button" class="previous k-shorts-previous">
          <span class="txt">이전</span>
        </button>
        <span class="k-shorts-pagination pagination"></span>
        <button type="button" class="next k-shorts-next">
          <span class="txt">다음</span>
        </button>
      </div>
    </div>
  </div>

</div>

<script>
  var isYoutubeDataFetched = false;
var isShortDataFetched = false;

$(function () {
	getYoutubeLiveNews();
	getShorts();

	var youTubeInterval = setInterval(function () {
		if (isYoutubeDataFetched && isShortDataFetched) {
			$('.shorts-youtube').show();
			clearInterval(youTubeInterval);
		}
	}, 100);
});

function getYoutubeLiveNews() {
	$.get('/youtube/youtubeLiveInformation.json', function (data) {
		if (data) {
			// 시청자수 내림차순 정렬
			data.items.sort(function (a, b) {
				var aViewers = parseInt(a.concurrentViewers);
				var bViewers = parseInt(b.concurrentViewers);
	
				if (aViewers < bViewers) {
					return 1;
				}
	
				if (aViewers > bViewers) {
					return -1;
				}
	
				return 0;
			});
	
			if (data.items.length > 0) {
				for (var i = 0; i < data.items.length; i++) {
					var $li = $('.youtube-live-news ul li').first().clone();
					$li.find('a').attr('href', 'https://www.youtube.com/watch?v=' + data.items[i].id.videoId);
					$li.find('img').attr('src', data.items[i].snippet.thumbnails.medium.url);
	
					$li.find('img').attr('alt', data.items[i].snippet.title);
	
					$li.find('img').next('span').addClass('play-icon');
					$li.find('p.title').html(data.items[i].snippet.title);
					$('.youtube-live-news ul').append($li);
				}
				$('.youtube-live-news ul li').first().remove();
	
				ui.youtubeLiveNewsSlide();
	
				isYoutubeDataFetched = true;
			} else {
				$('.youtube-live-news .no-data').css('display', 'block');
				$('.youtube-live-news .data').css('display', 'none');
	
				isYoutubeDataFetched = true;
			}
		}
	});
}

function getShorts() {
	$.ajax({
		url: application.rootUrlPrefix + '/youtube/youtubeShortsInformation.json',
		type: 'get',
		dataType: 'json',
		success: function (res) {
			try {
				var data = res.items;
				displayKShorts(data);

			} catch (e) {
				displayKShortsNoData();
				globalErrorHandler(e);
			}
		},
		error: function (error) {
			displayKShortsNoData();
			globalErrorHandler(error);
		}
	});
}

function displayKShorts(data) {
	$(".k-shorts").removeAttr("no-data");
	$(".k-shorts .no-data").remove();
	$('.k-shorts .data').show();

	if( !data || !data.length ) {
		displayKShortsNoData();
		isShortDataFetched = true;
		return;
	}

	const $ul = $('.k-shorts .k-shorts-slide ul');
	data.forEach( item => {
		const { videoId } = item.id;
		const $HTML = `
			<li class="swiper-slide">
				<a class="box-content" href="https://www.youtube.com/shorts/${videoId}" target="_blank" title="유튜브 쇼츠 링크 - 새 창 열림">
					<div class="thumbnail">
						<img class="img" src="https://i.ytimg.com/vi/${videoId}/oar2.jpg" alt="쇼츠 섬네일 이미지" onerror="javascript:handleError(this);">
						<span class="play-icon"></span>
					</div>
				</a>
			</li>
		`;
		$ul.append($HTML);
	});

	ui.kshortsSlide();
	isShortDataFetched = true;
}

function displayKShortsNoData() {
	$(".k-shorts").attr("no-data", true);
	$('.k-shorts .data').css('display', 'none');

	const $noData = `
		<div class="no-data">
			<div class="txt ico-note">오늘의 쇼츠 업데이트 예정입니다.</div>
		</div>
	`;
	$(".k-shorts").append($noData);
}
</script>


<!-- banner -->

<div class="main-banners-wrapper">
  <a class="main-banner" href="https://news.kbs.co.kr/special/sinkholemap2025/main.html" aria-label="메인 배너 링크">
    <img class="img" src="/images/banner/mainBannerPc/20250814_pc(628)_배너.png" alt="KBS 뉴스 이미지"/>
    <p class="main-banner-text">바로가기</p>
  </a>
  <a class="main-banner" href="https://news.kbs.co.kr/news/pc/menu/menu.do?mcd&#x3D;0713&amp;ref&#x3D;pSiteMap#202508&amp;1" aria-label="메인 배너 링크">
    <img class="img" src="/images/banner/mainBannerPc/20250402_1111X.png" alt="KBS 뉴스 이미지"/>
    <p class="main-banner-text">바로가기</p>
  </a>
</div>

<!-- latest-new & most viewed  -->
<div class="recent-most-viewed half-box-wrapper">
  <div class="box half-box recent-news">
    <div class="box-title">
      <h4 class="title">최신 뉴스</h4>
    </div>
    <div class="box-contents has-border-contents">
      <a href="" class="box-content has-border" aria-label="최신 뉴스 기사 링크">
        <div class="txt-wrapper">
          <p class="title one-line"></p>
        </div>
      </a>
    </div>
  </div>

  <div class="box half-box most-viewed">
    <div class="box-title space-between">
      <div class="title-wrapper has-tooltip">
        <h4 class="title">많이 본 뉴스</h4>
        <div class="tooltip-wrapper">
          <button type="button" class="tooltip-btn" aria-label="많이 본 뉴스 설명 펼침 버튼"></button>
          <div class="tooltip">
            <span class="triangle"></span>
            <p class="tooltip-txt">
              각 플랫폼에서 최근 1시간<br/>
              동안 많이 본 KBS 기사를<br/>
              제공합니다.
            </p>
            <button type="button" class="close-btn" aria-label="많이 본 뉴스 설명 닫기 버튼"></button>
          </div>
        </div>
      </div>
      <ul class="tab-btns textbtn" data-tab-contents="main-most-viewed">
        <li class="tab-btns-list on">
          <button type="button" class="tab-btn" role="tab" aria-controls="mmv-panel-0" aria-selected="true">KBS</button>
        </li>
        <li class="tab-btns-list">
          <button type="button" class="tab-btn" role="tab" aria-controls="mmv-panel-1" aria-selected="false">포털</button>
        </li>
        <li class="tab-btns-list">
          <button type="button" class="tab-btn" role="tab" aria-controls="mmv-panel-2" aria-selected="false">유튜브</button>
        </li>
      </ul>
    </div>
    <ul class="tab-contents" id="main-most-viewed">
      <li class="tab-contents-list on" role="tabpanel" id="mmv-panel-0">
        <div class="box-contents has-wrap data">
          <a href="" class="box-content" aria-label="KBS 많이 본 뉴스 기사 링크">
            <div class="thumbnail">
              <img class="img" src="" alt="" onerror="javascript:handleError(this);">
              <span></span>
              <span class="rank-badge"></span>
            </div>
            <div class="txt-wrapper">
              <p class="title normal-weight small-font">
              </p>
            </div>
          </a>
        </div>
        <div class="no-data" style="display: none">
          <p class="txt">준비중입니다.</p>
        </div>
      </li>
      <li class="tab-contents-list" role="tabpanel" id="mmv-panel-1">
        <div class="box-contents has-wrap data">
          <a href="#" class="box-content" aria-label="포털 많이 본 뉴스 기사 링크">
            <div class="thumbnail">
              <img class="img" src="" alt="" onerror="javascript:handleError(this);">
              <span></span>
              <span class="rank-badge"></span>
            </div>
            <div class="txt-wrapper">
              <p class="title normal-weight small-font">
              </p>
            </div>
          </a>
        </div>
        <div class="no-data" style="display: none">
          <p class="txt">준비중입니다.</p>
        </div>
      </li>
      <li class="tab-contents-list" role="tabpanel" id="mmv-panel-2">
        <div class="box-contents has-wrap data">
          <a href="#" class="box-content" aria-label="유튜브 많이 본 뉴스 기사 링크">
            <div class="thumbnail">
              <img class="img" src="" alt="" onerror="javascript:handleError(this);">
              <span></span>
              <span class="rank-badge"></span>
            </div>
            <div class="txt-wrapper">
              <p class="title normal-weight small-font">
              </p>
            </div>
          </a>
        </div>
        <div class="no-data" style="display: none">
          <p class="txt">준비중입니다.</p>
        </div>
      </li>
    </ul>
  </div>
</div>

<script>
	$(function () {
	getNewestList();
	getManyWatchingNews();
});

function getNewestList() {
	var url = '/api/getNewestList';
	var param = {'count': 7};

	$.get(`${url}`, function (result) {
		var data = result.data;		
		if (result.success && data.length > 0) {
			for (var i = 0; i < Math.min(data.length, 6); i++) {
				var $a = $('.recent-most-viewed .recent-news a.box-content').first().clone();
				$a.attr('href', '/news/pc/view/view.do?ncd=' + data[i].newsCode).attr('title', data[i].newsTitle);
				$a.find('p').text(data[i].newsTitle);
				$('.recent-most-viewed .recent-news div.box-contents').append($a);
			}
			$('.recent-most-viewed .recent-news a.box-content').first().remove();
		}		
	})
}

function getManyWatchingKbsNews() {
	getExposeData(329, getParameterByName('pubExec'), function (data) {
		if (data.length > 0) {
			for (var i = 0; i < Math.min(data.length, 6); i++) {
				var $a = $('#main-most-viewed li:eq(0) .box-contents a').first().clone();
				$a.attr('href', data[i].url);
				$a.find('.rank-badge').text(i+1);
				$a.find('img').attr('src', data[i].imgUrl);

				$a.find('img').attr('alt', data[i].title);

				if (data[i].vodUrl) {
					$a.find('img').next('span').addClass('play-icon');
				}
				$a.find('.txt-wrapper p').text(data[i].title)
				$('#main-most-viewed li:eq(0) .box-contents').append($a);
			}
			$('#main-most-viewed li:eq(0) .box-contents a').first().remove();
		} else {
			$('#main-most-viewed li:eq(0) .data').css('display', 'none');
			$('#main-most-viewed li:eq(0) .no-data').css('display', 'block');
		}
	});
}

function getManyWatchingPortalNews() {
	$.get('https://news.kbs.co.kr/ranking/portal.json', function (data) {
		// 이미지 없을 경우 제외
		data = data.filter(function(v){ return v.data.imgListUrl });

		if (data.length > 0) {
			for (var i = 0; i < Math.min(data.length, 6); i++) {
				var $a = $('#main-most-viewed li:eq(1) .box-contents a').first().clone();
				$a.attr('href', '/news/view.do?ncd=' + data[i].data.newsCode);
				$a.find('.rank-badge').text(i+1);
				$a.find('img').attr('src', data[i].data.imgListUrl)

				$a.find('img').attr('alt', data[i].data.newsTitle);

				if (data[i].data.vodYn == "Y") {
					$a.find('img').next('span').addClass('play-icon');
				}
				$a.find('.txt-wrapper p').text(data[i].data.newsTitle)
				$('#main-most-viewed li:eq(1) .box-contents').append($a);
			}
			$('#main-most-viewed li:eq(1) .box-contents a').first().remove();
		} else {
			$('#main-most-viewed li:eq(1) .data').css('display', 'none');
			$('#main-most-viewed li:eq(1) .no-data').css('display', 'block');
		}
	}).fail(function(jqXHR, textStatus, errorThrown) {
		console.error('jqXHR', jqXHR);
		console.error('textStatus', textStatus);
		console.error('errorThrown', errorThrown);
		$('#main-most-viewed li:eq(1) .data').css('display', 'none');
		$('#main-most-viewed li:eq(1) .no-data').css('display', 'block');
	});
}

function getManyWatchingYoutubeNews() {
	$.get('https://news.kbs.co.kr/ranking/youtube.json', function (data) {
		// onair news24 풀영상은 제외
		if (data && data.length > 0) {
			if (Array.isArray(data)) {
				data = data.filter(function(v){ return v.title.indexOf('[🔴이슈]') < 0 && v.title.indexOf('[LIVE]') < 0 && v.title.indexOf('[풀영상]') < 0; })
			}
		}

		if (data.length > 0) {
			for (var i = 0; i < Math.min(data.length, 6); i++) {
				var $a = $('#main-most-viewed li:eq(2) .box-contents a').first().clone();
				$a.attr('href', data[i].url);
				$a.attr('target', '_blank');
				$a.find('.rank-badge').text(i+1);
				$a.find('img').attr('src', data[i].thumbnail);

				$a.find('img').attr('alt', data[i].title);

				$a.find('img').next('span').addClass('play-icon');
				$a.find('.txt-wrapper p').text(data[i].title)

				$('#main-most-viewed li:eq(2) .box-contents').append($a);
			}
			$('#main-most-viewed li:eq(2) .box-contents a').first().remove();
		} else {
			$('#main-most-viewed li:eq(2) .data').css('display', 'none');
			$('#main-most-viewed li:eq(2) .no-data').css('display', 'block');
		}
	});
}

function getManyWatchingNews() {
	getManyWatchingKbsNews();
	getManyWatchingPortalNews();
	getManyWatchingYoutubeNews();
}

</script>
<div class="news-category">
  <div class="kbs-txt"></div>
  <ul class="news-category-links">
    <li class="news-category-list">
      <a href="/news/pc/category/category.do?ctcd=0003&ref=pMiddleBar" class="news-category-link" aria-label="정치 페이지 링크">
        <span class="img politics-img"></span>
        <p class="txt">정치</p>
      </a>
    </li>
    <li class="news-category-list">
      <a href="/news/pc/category/category.do?ctcd=0004&ref=pMiddleBar" class="news-category-link" aria-label="경제 페이지 링크">
        <span class="img economy-img"></span>
        <p class="txt">경제</p>
      </a>
    </li>
    <li class="news-category-list">
      <a href="/news/pc/category/category.do?ctcd=0005&ref=pMiddleBar" class="news-category-link" aria-label="사회 페이지 링크">
        <span class="img society-img"></span>
        <p class="txt">사회</p>
      </a>
    </li>
    <li class="news-category-list">
      <a href="/news/pc/category/category.do?ctcd=0008&ref=pMiddleBar" class="news-category-link" aria-label="문화 페이지 링크">
        <span class="img culture-img"></span>
        <p class="txt">문화</p>
      </a>
    </li>
    <li class="news-category-list">
      <a href="/news/pc/category/category.do?ctcd=0007&ref=pMiddleBar" class="news-category-link" aria-label="IT·과학 페이지 링크">
        <span class="img it-img"></span>
        <p class="txt">IT·과학</p>
      </a>
    </li>
    <li class="news-category-list">
      <a href="/news/pc/category/category.do?ctcd=0006&ref=pMiddleBar" class="news-category-link" aria-label="국제 페이지 링크">
        <span class="img international-img"></span>
        <p class="txt">국제</p>
      </a>
    </li>
    <li class="news-category-list">
      <a href="/news/pc/category/category.do?ctcd=0095&ref=pMiddleBar" class="news-category-link" aria-label="재난·환경 페이지 링크">
        <span class="img environment-img"></span>
        <p class="txt">재난·환경</p>
      </a>
    </li>
    <li class="news-category-list">
      <a href="/news/pc/category/category.do?ctcd=0034&ref=pMiddleBar" class="news-category-link" aria-label="생활·건강 페이지 링크">
        <span class="img life-img"></span>
        <p class="txt">생활·건강</p>
      </a>
    </li>
    <li class="news-category-list">
      <a href="/news/pc/sports/sports.html?ref=pMiddleBar" class="news-category-link" aria-label="스포츠 페이지 링크">
        <span class="img sports-img"></span>
        <p class="txt">스포츠</p>
      </a>
    </li>
    <li class="news-category-list">
      <a href="/news/pc/enter/enter.html?ref=pMiddleBar" class="news-category-link" aria-label="연예 페이지 링크">
        <span class="img entertainments-img"></span>
        <p class="txt">연예</p>
      </a>
    </li>
    <li class="news-category-list">
      <a href="/news/pc/notice/notice.html?ref=pMiddleBar" class="news-category-link" aria-label="정정·반론 페이지 링크">
        <span class="img notice-img"></span>
        <p class="txt">정정·반론</p>
      </a>
    </li>
  </ul>
</div>


<div class="premium-k-wrapper half-box-wrapper" style="display: none;">
  <div class="premium-k box no-padding">
    <div class="box-title space-between has-side-padding">
      <div class="title-wrapper">
        <h4 class="title">심층취재</h4>
        <p class="sub-title"></p>
      </div>
      <div class="tab-btns-look-more">
        <ul class="tab-btns textbtn" data-tab-contents="main-premium-k">
          <li class="tab-btns-list on">
            <button type="button" class="tab-btn" role="tab" aria-controls="mpk-panel-0" aria-selected="true">크랩</button>
          </li>
          <li class="tab-btns-list">
            <button type="button" class="tab-btn" role="tab" aria-controls="mpk-panel-1" aria-selected="false">영상K</button>
          </li>
          <li class="tab-btns-list">
            <button type="button" class="tab-btn" role="tab" aria-controls="mpk-panel-2" aria-selected="false">글로벌K</button>
          </li>
        </ul>
        <a href="javascript:goPage()" class="look-more" aria-label="심층취재 더보기 링크">
          <span class="txt">더보기</span>
          <span class="plus-btn"></span>
        </a>
      </div>
    </div>
    <ul class="tab-contents" id="main-premium-k">
      <li class="tab-contents-list on" id="mpk-panel-0">
        <div class="premium-k-slide crab-slide swiper has-padding data">
          <ul class="swiper-wrapper">
            <li class="swiper-slide">
              <a class="box-content" href="" role="button" aria-label="심층취재 기사 링크">
                <div class="thumbnail">
                  <img class="img" src="" alt="" onerror="javascript:handleError(this);"/>
                  <span class=""></span>
                </div>
                <div class="txt-wrapper">
                  <p class="title normal-weight"></p>
                </div>
              </a>
            </li>
          </ul>
        </div>
        <div class="pagination-group-wrapper data">
          <div class="pagination-group">
            <button type="button" class="previous crab-previous" aria-label="슬라이드 이전 버튼">
              <span class="txt">이전</span>
            </button>
            <span class="crab-pagination pagination"></span>
            <button type="button" class="next crab-next" aria-label="슬라이드 다음 버튼">
              <span class="txt">다음</span>
            </button>
          </div>
        </div>
        <div class="no-data" style="display: none">
          <p class="txt">준비중입니다.</p>
        </div>
      </li>
      <li class="tab-contents-list" id="mpk-panel-1">
        <div class="premium-k-slide site-video-slide swiper has-padding data">
          <ul class="swiper-wrapper">
            <li class="swiper-slide">
              <a class="box-content" href="" role="button" aria-label="심층취재 기사 링크">
                <div class="thumbnail">
                  <img class="img" src="" alt="" onerror="javascript:handleError(this);"/>
                  <span class=""></span>
                </div>
                <div class="txt-wrapper">
                  <p class="title normal-weight">
                  </p>
                </div>
              </a>
            </li>
          </ul>
        </div>
        <div class="pagination-group-wrapper data">
          <div class="pagination-group">
            <button type="button" class="previous site-video-previous" aria-label="슬라이드 이전 버튼">
              <span class="txt">이전</span>
            </button>
            <span class="site-video-pagination pagination"></span>
            <button type="button" class="next site-video-next" aria-label="슬라이드 다음 버튼">
              <span class="txt">다음</span>
            </button>
          </div>
        </div>
        <div class="no-data" style="display: none">
          <p class="txt">준비중입니다.</p>
        </div>
      </li>
      <li class="tab-contents-list" id="mpk-panel-2">
        <div class="premium-k-slide breaking-news-video-slide swiper has-padding data">
          <ul class="swiper-wrapper">
            <li class="swiper-slide">
              <a class="box-content" href="" role="button" aria-label="심층취재 기사 링크">
                <div class="thumbnail">
                  <img class="img" src="" alt="" onerror="javascript:handleError(this);"/>
                  <span class=""></span>
                </div>
                <div class="txt-wrapper">
                  <p class="title normal-weight">
                  </p>
                </div>
              </a>
            </li>
          </ul>
        </div>
        <div class="pagination-group-wrapper data">
          <div class="pagination-group">
            <button type="button" class="previous breaking-news-video-previous" aria-label="슬라이드 이전 버튼">
              <span class="txt">이전</span>
            </button>
            <span class="breaking-news-video-pagination pagination"></span>
            <button type="button" class="next breaking-news-video-next" aria-label="슬라이드 다음 버튼">
              <span class="txt">다음</span>
            </button>
          </div>
        </div>
        <div class="no-data" style="display: none">
          <p class="txt">준비중입니다.</p>
        </div>
      </li>
    </ul>
  </div>
  <a class="banner" href="https://news.kbs.co.kr/news/pc/issue/issueList.do?icd&#x3D;19648#1">
    <img class="img" src="/images/banner/mainBannerPc/20230907_배너_03.png" alt="" onerror="javascript:handleError(this);"/>
  </a>
</div>

<script>
    $(function () {
	getPremiumK01();
	getPremiumK02();
	getPremiumK03();
});

// 크랩
function getPremiumK01() {
	var param = {
		exceptPhotoYn: 'Y',
		currentPageNo: 1,
		rowsPerPage: 24,
		menuCode: '0938'
	};

	getNewsList(param, function (data) {
		if (data && data.data) {
			if (data.data.length >= 8) {
				data.data = data.data.slice(0, 8);
			}

			if (data.data.length > 0) {
				for (var i = 0; i < data.data.length; i++) {
					var $li = $('#main-premium-k .tab-contents-list:eq(0) ul li').first().clone();
					$li.find('a').attr('href', '/news/view.do?ncd=' + data.data[i].newsCode);
					$li.find('img').attr('src', data.data[i].imgUrl);

					$li.find('img').attr('alt', data.data[i].newsTitle);

					if (data.data[i].vodYn == 'Y') {
						$li.find('img').next('span').addClass('play-icon');
					}
					$li.find('p.title').text(data.data[i].newsTitle);
					$('#main-premium-k .tab-contents-list:eq(0) ul').append($li);
				}

				$('#main-premium-k .tab-contents-list:eq(0) ul li').first().remove();

				ui.premiumk01Slide();

				$('.premium-k-wrapper').show();
			} else {
				$('#main-premium-k .tab-contents-list:eq(0) .data').css('display', 'none');
				$('#main-premium-k .tab-contents-list:eq(0) .no-data').css('display', 'block');

				$('.premium-k-wrapper').show();
			}
		} else {
			$('#main-premium-k .tab-contents-list:eq(0) .data').css('display', 'none');
			$('#main-premium-k .tab-contents-list:eq(0) .no-data').css('display', 'block');

			$('.premium-k-wrapper').show();
		}
	});
}

// 영상K
function getPremiumK02() {
	var param = {
		exceptPhotoYn: 'Y',
		currentPageNo: 1,
		rowsPerPage: 24,
		menuCode: '0990'
	};

	//영상K
	getNewsList(param, function (data) {
		if (data && data.data) {
			if (data.data.length >= 8) {
				data.data = data.data.slice(0, 8);
			}

			if (data.data.length > 0) {
				for (var i = 0; i < data.data.length; i++) {
					var $li = $('#main-premium-k .tab-contents-list:eq(1) ul li').first().clone();
					$li.find('a').attr('href', '/news/view.do?ncd=' + data.data[i].newsCode);
					$li.find('img').attr('src', data.data[i].imgUrl);

					$li.find('img').attr('alt', data.data[i].newsTitle);

					if (data.data[i].vodYn == 'Y') {
						$li.find('img').next('span').addClass('play-icon');
					}
					$li.find('p.title').text(data.data[i].newsTitle);
					$('#main-premium-k .tab-contents-list:eq(1) ul').append($li);
				}
				$('#main-premium-k .tab-contents-list:eq(1) ul li').first().remove();

				ui.premiumk02Slide();
			} else {
				$('#main-premium-k .tab-contents-list:eq(1) .data').css('display', 'none');
				$('#main-premium-k .tab-contents-list:eq(1) .no-data').css('display', 'block');
			}
		} else {
			$('#main-premium-k .tab-contents-list:eq(1) .data').css('display', 'none');
			$('#main-premium-k .tab-contents-list:eq(1) .no-data').css('display', 'block');
		}
	});
}

// 글로벌K
function getPremiumK03() {
	var param = {
		exceptPhotoYn: 'Y',
		currentPageNo: 1,
		rowsPerPage: 24,
		menuCode: '1048'
	};

	getNewsList(param, function (data) {
		if (data && data.data) {
			if (data.data.length >= 8) {
				data.data = data.data.slice(0, 8);
			}

			if (data.data.length > 0) {
				for (var i = 0; i < data.data.length; i++) {
					var $li = $('#main-premium-k .tab-contents-list:eq(2) ul li').first().clone();
					$li.find('a').attr('href', '/news/view.do?ncd=' + data.data[i].newsCode);
					$li.find('img').attr('src', data.data[i].imgUrl);

					$li.find('img').attr('alt', data.data[i].newsTitle);

					if (data.data[i].vodYn == 'Y') {
						$li.find('img').next('span').addClass('play-icon');
					}
					$li.find('p.title').text(data.data[i].newsTitle);
					$('#main-premium-k .tab-contents-list:eq(2) ul').append($li);
				}
				$('#main-premium-k .tab-contents-list:eq(2) ul li').first().remove();

				ui.premiumk03Slide();
			} else {
				$('#main-premium-k .tab-contents-list:eq(2) .data').css('display', 'none');
				$('#main-premium-k .tab-contents-list:eq(2) .no-data').css('display', 'block');
			}
		} else {
			$('#main-premium-k .tab-contents-list:eq(2) .data').css('display', 'none');
			$('#main-premium-k .tab-contents-list:eq(2) .no-data').css('display', 'block');
		}
	});
}

function goPage() {
	var index = $('.premium-k .tab-btns.textbtn .tab-btns-list.on').index();

	if (index == 0) {
		location.href = '/news/pc/menu/menu.do?mcd=0938&ref=pSiteMap';
	} else if (index == 1) {
		location.href = '/news/pc/menu/menu.do?mcd=0990&ref=pSiteMap';
	} else {
		location.href = '/news/pc/menu/menu.do?mcd=1048&ref=pSiteMap';
	}
}

</script>
<div class="sisa box" style="display: none">
    <div class="box-title space-between">
        <h4 class="title">시사</h4>
    </div>
    <div class="box-contents">
        <div class="sisa-main-news">
            <a href="" class="box-content" aria-label="시사 기사 링크">
                <div class="thumbnail width-612">
                    <img class="img" src="" alt="" onerror="javascript:handleError(this);"/>
                    <div class="overlay-txt">
                        <p class="title height-fixed"></p>
                    </div>
                    <span class=""></span>
                </div>
            </a>
        </div>
        <div class="overlay-news-wrapper">
            <div class="overlay-txt-news box-contents has-wrap">
                <a href="" class="box-content" aria-label="시사 기사 링크">
                    <div class="thumbnail width-294">
                        <img class="img" src="" alt="" onerror="javascript:handleError(this);"/>
                        <div class="overlay-txt">
                            <p class="title"></p>
                        </div>
                        <span class=""></span>
                    </div>
                </a>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
	getSisaNewsData();
});

function getSisaNewsData() {
	getExposeData('sisaMainNews', getParameterByName('pubExec'), function (data) {
		for (var i = 0; i < data.length; i++) {
			if  (i == 0) {
				$('.sisa .sisa-main-news a').attr('href', data[i].url);
				$('.sisa .sisa-main-news img').attr('src', data[i].imgUrl);

				$('.sisa .sisa-main-news img').attr('alt', data[i].title);

				if (data[i].vodUrl) {
					$('.sisa .sisa-main-news .overlay-txt').next('span').addClass('play-icon large');
				}
				$('.sisa .sisa-main-news p.title').html(data[i].title);
			} else {
				if (i <= 4) {
					var $a = $('.sisa .box-contents .overlay-txt-news a').first().clone();
					$a.attr('href', data[i].url);
					$a.find('img').attr('src', data[i].imgUrl);

					$a.find('img').attr('alt', data[i].title);

					if (data[i].vodUrl) {
						$a.find('img').nextAll('span').first().addClass('play-icon');
						$a.find('div.overlay-txt').addClass('video');
					}
					$a.find('p.title').html(data[i].title);
					$('.sisa .box-contents .overlay-txt-news').append($a);
				}
			}
		}
		$('.sisa .box-contents .overlay-txt-news a').first().remove();

		$('.sisa').show();
	});
}

</script>

<div class="sports box" style="display: none">
  <div class="box-title space-between">
    <h4 class="title">스포츠</h4>
    <a href="/news/pc/sports/sports.html" class="look-more" aria-label="스포츠 더보기 버튼">
      <span class="txt">더보기</span>
      <span class="plus-btn"></span>
    </a>
  </div>
  <div class="box-contents">
    <div class="overlay-news-wrapper">
      <div class="overlay-txt-news box-contents has-wrap">
        <a href="" class="box-content" aria-label="스포츠 기사 링크">
          <div class="thumbnail width-294">
            <img class="img" src="" alt="" onerror="javascript:handleError(this);"/>
            <div class="overlay-txt">
              <p class="title"></p>
            </div>
            <span class=""></span>
          </div>
        </a>
      </div>
    </div>
    <div class="sports-enter-main-news">
      <a href="#" class="box-content" aria-label="스포츠 기사 링크">
        <div class="thumbnail width-612">
          <img class="img" src="" alt="" onerror="javascript:handleError(this);"/>
          <div class="overlay-txt">
            <p class="title height-fixed"></p>
          </div>
          <span class=""></span>
        </div>
      </a>
    </div>
  </div>
</div>

<script>
  $(function () {
    getSportsNewsData();
});

function getSportsNewsData() {
    getExposeData(604, getParameterByName('pubExec'), function (data) {
        for (var i = 0; i < data.length; i++) {
            if (i == 0) {
                $('.sports .sports-enter-main-news a').attr('href', data[i].url);
                $('.sports .sports-enter-main-news img').attr('src', data[i].imgUrl);

                $('.sports .sports-enter-main-news img').attr('alt', data[i].title);

                if (data[i].vodUrl) {
                    $('.sports .sports-enter-main-news .overlay-txt').next('span').addClass('play-icon large');
                }
                $('.sports .sports-enter-main-news p.title').html(data[i].title);
            } else {
                if (i <= 4) {
                    var $a = $('.sports .box-contents .overlay-txt-news a').first().clone();
                    $a.attr('href', data[i].url);
                    $a.find('img').attr('src', data[i].imgUrl);

                    $a.find('img').attr('alt', data[i].title);

                    if (data[i].vodUrl) {
                        $a.find('img').nextAll('span').first().addClass('play-icon');
                        $a.find('div.overlay-txt').addClass('video');
                    }
                    $a.find('p.title').html(data[i].title);
                    $('.sports .box-contents .overlay-txt-news').append($a);
                }
            }
        }
        $('.sports .box-contents .overlay-txt-news a').first().remove();

        $('.sports').show();
    });

}

</script>

<div class="entertainment box" style="display: none">
  <div class="box-title space-between">
    <h4 class="title">연예</h4>
    <a href="/news/pc/enter/enter.html" class="look-more" aria-label="연예 더보기 버튼">
      <span class="txt">더보기</span>
      <span class="plus-btn"></span>
    </a>
  </div>
  <div class="box-contents">
    <div class="sports-enter-main-news">
      <a href="" class="box-content" aria-label="연예 기사 링크">
        <div class="thumbnail width-612">
          <img class="img" src="" alt="" onerror="javascript:handleError(this);"/>
          <div class="overlay-txt">
            <p class="title height-fixed"></p>
          </div>
          <span class=""></span>
        </div>
      </a>
    </div>
    <div class="overlay-news-wrapper">
      <div class="overlay-txt-news box-contents has-wrap">
        <a href="" class="box-content" aria-label="연예 기사 링크">
          <div class="thumbnail width-294">
            <img class="img" src="" alt="" onerror="javascript:handleError(this);"/>
            <div class="overlay-txt">
              <p class="title"></p>
            </div>
            <span class=""></span>
          </div>
        </a>
      </div>
    </div>
  </div>
</div>

<script>
  $(function () {
    getEntertainmentNewsData();
});

function getEntertainmentNewsData() {
    getExposeData(606, getParameterByName('pubExec'), function (data) {
        for (var i = 0; i < data.length; i++) {
            if (i == 0) {
                $('.entertainment .sports-enter-main-news a').attr('href', data[i].url);
                $('.entertainment .sports-enter-main-news img').attr('src', data[i].imgUrl);

                $('.entertainment .sports-enter-main-news img').attr('alt', data[i].title);

                if (data[i].vodUrl) {
                    $('.entertainment .sports-enter-main-news .overlay-txt').next('span').addClass('play-icon large');
                }
                $('.entertainment .sports-enter-main-news p.title').html(data[i].title);
            } else {
                if (i <= 4) {
                    var $a = $('.entertainment .box-contents .overlay-txt-news a').first().clone();
                    $a.attr('href', data[i].url);
                    $a.find('img').attr('src', data[i].imgUrl);

                    $a.find('img').attr('alt', data[i].title);

                    if (data[i].vodUrl) {
                        $a.find('img').nextAll('span').first().addClass('play-icon');
                        $a.find('div.overlay-txt').addClass('video');
                    }
                    $a.find('p.title').html(data[i].title);
                    $('.entertainment .box-contents .overlay-txt-news').append($a);
                }
            }
        }
        $('.entertainment .box-contents .overlay-txt-news a').first().remove();

        $('.entertainment').show();
    });
}

</script>

<div class="nationwide-news box" style="display: none">
  <div class="box-title space-between">
    <div class="title-wrapper">
      <h4 class="title">전국 네트워크</h4>
      <p class="sub-title">KBS의 9개 지역총국 뉴스를 지역별로 제공합니다.</p>
    </div>
    <ul class="tab-btns textbtn" data-tab-contents="main-local-news">
      <li class="tab-btns-list on">
        <button type="button" class="tab-btn" role="tab" aria-controls="mln-panel-0" aria-selected="true">전체</button>
      </li>
      <li class="tab-btns-list">
        <button type="button" class="tab-btn" role="tab" aria-controls="mln-panel-1" aria-selected="false">부산</button>
      </li>
      <li class="tab-btns-list">
        <button type="button" class="tab-btn" role="tab" aria-controls="mln-panel-2" aria-selected="false">창원</button>
      </li>
      <li class="tab-btns-list">
        <button type="button" class="tab-btn" role="tab" aria-controls="mln-panel-3" aria-selected="false">대구</button>
      </li>
      <li class="tab-btns-list">
        <button type="button" class="tab-btn" role="tab" aria-controls="mln-panel-4" aria-selected="false">광주</button>
      </li>
      <li class="tab-btns-list">
        <button type="button" class="tab-btn" role="tab" aria-controls="mln-panel-5" aria-selected="false">전주</button>
      </li>
      <li class="tab-btns-list">
        <button type="button" class="tab-btn" role="tab" aria-controls="mln-panel-6" aria-selected="false">대전</button>
      </li>
      <li class="tab-btns-list">
        <button type="button" class="tab-btn" role="tab" aria-controls="mln-panel-7" aria-selected="false">청주</button>
      </li>
      <li class="tab-btns-list">
        <button type="button" class="tab-btn" role="tab" aria-controls="mln-panel-8" aria-selected="false">춘천</button>
      </li>
      <li class="tab-btns-list">
        <button type="button" class="tab-btn" role="tab" aria-controls="mln-panel-9" aria-selected="false">제주</button>
      </li>
    </ul>
  </div>
  <ul class="tab-contents" id="main-local-news">
    <li class="tab-contents-list on" role="panel" id="mln-panel-0">
      <div class="box-contents has-wrap">
        <div class="box-content-wrapper">
          <a class="box-content" href="" aria-label="전체탭 부산지역 기사 링크">
            <div class="thumbnail width-400">
              <img class="img" src="" alt="" onerror="javascript:handleError(this);">
              <span></span>
            </div>
            <div class="txt-wrapper">
              <p class="title normal-weight"></p>
            </div>
          </a>
          <a href="/news/pc/local/local.do?lscd=10" class="region-badge" aria-label="부산지역 페이지 링크">부산</a>
        </div>
        <div class="box-content-wrapper">
          <a class="box-content" href="" aria-label="전체탭 창원지역 기사 링크">
            <div class="thumbnail width-400">
              <img class="img" src="" alt="" onerror="javascript:handleError(this);">
              <span></span>
            </div>
            <div class="txt-wrapper">
              <p class="title normal-weight"></p>
            </div>
          </a>
          <a href="/news/pc/local/local.do?lscd=20" class="region-badge" aria-label="창원지역 페이지 링크">창원</a>
        </div>
        <div class="box-content-wrapper">
          <a class="box-content" href="" aria-label="전체탭 대구지역 기사 링크">
            <div class="thumbnail width-400">
              <img class="img" src="" alt="" onerror="javascript:handleError(this);">
              <span></span>
            </div>
            <div class="txt-wrapper">
              <p class="title normal-weight"></p>
            </div>
          </a>
          <a href="/news/pc/local/local.do?lscd=30" class="region-badge" aria-label="대구지역 페이지 링크">대구</a>
        </div>
        <div class="box-content-wrapper">
          <a class="box-content" href="" aria-label="전체탭 광주지역 기사 링크">
            <div class="thumbnail width-400">
              <img class="img" src="" alt="" onerror="javascript:handleError(this);">
              <span></span>
            </div>
            <div class="txt-wrapper">
              <p class="title normal-weight"></p>
            </div>
          </a>
          <a href="/news/pc/local/local.do?lscd=40" class="region-badge" aria-label="광주지역 페이지 링크">광주</a>
        </div>
        <div class="box-content-wrapper">
          <a class="box-content" href="" aria-label="전체탭 전주지역 기사 링크">
            <div class="thumbnail width-400">
              <img class="img" src="" alt="" onerror="javascript:handleError(this);">
              <span></span>
            </div>
            <div class="txt-wrapper">
              <p class="title normal-weight"></p>
            </div>
          </a>
          <a href="/news/pc/local/local.do?lscd=50" class="region-badge" aria-label="전주지역 페이지 링크">전주</a>
        </div>
        <div class="box-content-wrapper">
          <a class="box-content" href="" aria-label="전체탭 대전지역 기사 링크">
            <div class="thumbnail width-400">
              <img class="img" src="" alt="" onerror="javascript:handleError(this);">
              <span></span>
            </div>
            <div class="txt-wrapper">
              <p class="title normal-weight"></p>
            </div>
          </a>
          <a href="/news/pc/local/local.do?lscd=60" class="region-badge" aria-label="대전지역 페이지 링크">대전</a>
        </div>
        <div class="box-content-wrapper">
          <a class="box-content" href="" aria-label="전체탭 청주지역 기사 링크">
            <div class="thumbnail width-400">
              <img class="img" src="" alt="" onerror="javascript:handleError(this);">
              <span></span>
            </div>
            <div class="txt-wrapper">
              <p class="title normal-weight"></p>
            </div>
          </a>
          <a href="/news/pc/local/local.do?lscd=70" class="region-badge" aria-label="청주지역 페이지 링크">청주</a>
        </div>
        <div class="box-content-wrapper">
          <a class="box-content" href="" aria-label="전체탭 춘천지역 기사 링크">
            <div class="thumbnail width-400">
              <img class="img" src="" alt="" onerror="javascript:handleError(this);">
              <span></span>
            </div>
            <div class="txt-wrapper">
              <p class="title normal-weight"></p>
            </div>
          </a>
          <a href="/news/pc/local/local.do?lscd=80" class="region-badge" aria-label="춘천지역 페이지 링크">춘천</a>
        </div>
        <div class="box-content-wrapper">
          <a class="box-content" href="" aria-label="전체탭 제주지역 기사 링크">
            <div class="thumbnail width-400">
              <img class="img" src="" alt="" onerror="javascript:handleError(this);">
              <span></span>
            </div>
            <div class="txt-wrapper">
              <p class="title normal-weight"></p>
            </div>
          </a>
          <a href="/news/pc/local/local.do?lscd=90" class="region-badge" aria-label="제주 지역 링크">제주</a>
        </div>
      </div>
    </li>
    <li class="tab-contents-list" role="panel" id="mln-panel-1">
      <div class="box-contents has-wrap">
        <a href="" class="box-content" aria-label="부산지역 기사 링크">
          <div class="thumbnail width-400">
            <img class="img" src="" alt="" onerror="javascript:handleError(this);">
            <span></span>
          </div>
          <div class="txt-wrapper">
            <p class="title normal-weight"></p>
          </div>
        </a>
      </div>
      <div class="region-most-viewed">
        <h5 class="region-title">부산지역 많이 본 뉴스</h5>
        <div class="box-contents data">
          <a href="" class="box-content" aria-label="부산지역 많이본뉴스 기사 링크">
            <div class="thumbnail">
              <img class="img" src="" alt="" onerror="javascript:handleError(this);">
              <span></span>
            </div>
            <div class="txt-wrapper">
              <p class="title normal-weight small-font"></p>
            </div>
          </a>
        </div>
        <div class="no-data" style="display: none">
          <p class="txt">준비중입니다.</p>
        </div>
      </div>
    </li>
    <li class="tab-contents-list" role="panel" id="mln-panel-2">
      <div class="box-contents has-wrap">
        <a href="" class="box-content" aria-label="창원지역 기사 링크">
          <div class="thumbnail width-400">
            <img class="img" src="" alt="" onerror="javascript:handleError(this);">
            <span></span>
          </div>
          <div class="txt-wrapper">
            <p class="title normal-weight"></p>
          </div>
        </a>
      </div>
      <div class="region-most-viewed">
        <h5 class="region-title">창원지역 많이 본 뉴스</h5>
        <div class="box-contents">
          <a href="" class="box-content data" aria-label="창원지역 많이본뉴스 기사 링크">
            <div class="thumbnail">
              <img class="img" src="" alt="" onerror="javascript:handleError(this);">
              <span></span>
            </div>
            <div class="txt-wrapper">
              <p class="title normal-weight small-font"></p>
            </div>
          </a>
        </div>
        <div class="no-data" style="display: none">
          <p class="txt">준비중입니다.</p>
        </div>
      </div>
    </li>
    <li class="tab-contents-list" role="panel" id="mln-panel-3">
      <div class="box-contents has-wrap">
        <a href="" class="box-content" aria-label="대구지역 기사 링크">
          <div class="thumbnail width-400">
            <img class="img" src="" alt="" onerror="javascript:handleError(this);">
            <span></span>
          </div>
          <div class="txt-wrapper">
            <p class="title normal-weight"></p>
          </div>
        </a>
      </div>
      <div class="region-most-viewed">
        <h5 class="region-title">대구지역 많이 본 뉴스</h5>
        <div class="box-contents data">
          <a href="" class="box-content" aria-label="대구지역 많이본뉴스 기사 링크">
            <div class="thumbnail">
              <img class="img" src="" alt="" onerror="javascript:handleError(this);">
              <span></span>
            </div>
            <div class="txt-wrapper">
              <p class="title normal-weight small-font"></p>
            </div>
          </a>
        </div>
        <div class="no-data" style="display: none">
          <p class="txt">준비중입니다.</p>
        </div>
      </div>
    </li>
    <li class="tab-contents-list" role="panel" id="mln-panel-4">
      <div class="box-contents has-wrap">
        <a href="" class="box-content" aria-label="광주지역 기사 링크">
          <div class="thumbnail width-400">
            <img class="img" src="" alt="" onerror="javascript:handleError(this);">
            <span></span>
          </div>
          <div class="txt-wrapper">
            <p class="title normal-weight"></p>
          </div>
        </a>
      </div>
      <div class="region-most-viewed">
        <h5 class="region-title">광주지역 많이 본 뉴스</h5>
        <div class="box-contents data">
          <a href="" class="box-content" aria-label="광주지역 많이본뉴스 기사 링크">
            <div class="thumbnail">
              <img class="img" src="" alt="" onerror="javascript:handleError(this);">
              <span></span>
            </div>
            <div class="txt-wrapper">
              <p class="title normal-weight small-font"></p>
            </div>
          </a>
        </div>
        <div class="no-data" style="display: none">
          <p class="txt">준비중입니다.</p>
        </div>
      </div>
    </li>
    <li class="tab-contents-list" role="panel" id="mln-panel-5">
      <div class="box-contents has-wrap">
        <a href="" class="box-content" aria-label="전주지역 기사 링크">
          <div class="thumbnail width-400">
            <img class="img" src="" alt="" onerror="javascript:handleError(this);">
            <span></span>
          </div>
          <div class="txt-wrapper">
            <p class="title normal-weight"></p>
          </div>
        </a>
      </div>
      <div class="region-most-viewed">
        <h5 class="region-title">전주지역 많이 본 뉴스</h5>
        <div class="box-contents data">
          <a href="" class="box-content" aria-label="전주지역 많이본뉴스 기사 링크">
            <div class="thumbnail">
              <img class="img" src="" alt="" onerror="javascript:handleError(this);">
              <span></span>
            </div>
            <div class="txt-wrapper">
              <p class="title normal-weight small-font"></p>
            </div>
          </a>
        </div>
        <div class="no-data" style="display: none">
          <p class="txt">준비중입니다.</p>
        </div>
      </div>
    </li>
    <li class="tab-contents-list" role="panel" id="mln-panel-6">
      <div class="box-contents has-wrap">
        <a href="" class="box-content" aria-label="대전지역 기사 링크">
          <div class="thumbnail width-400">
            <img class="img" src="" alt="" onerror="javascript:handleError(this);">
            <span></span>
          </div>
          <div class="txt-wrapper">
            <p class="title normal-weight"></p>
          </div>
        </a>
      </div>
      <div class="region-most-viewed">
        <h5 class="region-title">대전지역 많이 본 뉴스</h5>
        <div class="box-contents data">
          <a href="" class="box-content" aria-label="대전지역 많이본뉴스 기사 링크">
            <div class="thumbnail">
              <img class="img" src="" alt="" onerror="javascript:handleError(this);">
              <span></span>
            </div>
            <div class="txt-wrapper">
              <p class="title normal-weight small-font"></p>
            </div>
          </a>
        </div>
        <div class="no-data" style="display: none">
          <p class="txt">준비중입니다.</p>
        </div>
      </div>
    </li>
    <li class="tab-contents-list" role="panel" id="mln-panel-7">
      <div class="box-contents has-wrap">
        <a href="" class="box-content" aria-label="청주지역 기사 링크">
          <div class="thumbnail width-400">
            <img class="img" src="" alt="" onerror="javascript:handleError(this);">
            <span></span>
          </div>
          <div class="txt-wrapper">
            <p class="title normal-weight"></p>
          </div>
        </a>
      </div>
      <div class="region-most-viewed">
        <h5 class="region-title">청주지역 많이 본 뉴스</h5>
        <div class="box-contents data">
          <a href="" class="box-content" aria-label="청주지역 많이본뉴스 기사 링크">
            <div class="thumbnail">
              <img class="img" src="" alt="" onerror="javascript:handleError(this);">
              <span></span>
            </div>
            <div class="txt-wrapper">
              <p class="title normal-weight small-font"></p>
            </div>
          </a>
        </div>
        <div class="no-data" style="display: none">
          <p class="txt">준비중입니다.</p>
        </div>
      </div>
    </li>
    <li class="tab-contents-list" role="panel" id="mln-panel-8">
      <div class="box-contents has-wrap">
        <a href="" class="box-content" aria-label="춘천지역 기사 링크">
          <div class="thumbnail width-400">
            <img class="img" src="" alt="" onerror="javascript:handleError(this);">
            <span></span>
          </div>
          <div class="txt-wrapper">
            <p class="title normal-weight"></p>
          </div>
        </a>
      </div>
      <div class="region-most-viewed">
        <h5 class="region-title">춘천지역 많이 본 뉴스</h5>
        <div class="box-contents data">
          <a href="" class="box-content" aria-label="춘천지역 많이본뉴스 기사 링크">
            <div class="thumbnail">
              <img class="img" src="" alt="" onerror="javascript:handleError(this);">
              <span></span>
            </div>
            <div class="txt-wrapper">
              <p class="title normal-weight small-font"></p>
            </div>
          </a>
        </div>
        <div class="no-data" style="display: none">
          <p class="txt">준비중입니다.</p>
        </div>
      </div>
    </li>
    <li class="tab-contents-list" role="panel" id="mln-panel-9">
      <div class="box-contents has-wrap">
        <a href="" class="box-content" aria-label="제주지역 기사 링크">
          <div class="thumbnail width-400">
            <img class="img" src="" alt="" onerror="javascript:handleError(this);">
            <span></span>
          </div>
          <div class="txt-wrapper">
            <p class="title normal-weight"></p>
          </div>
        </a>
      </div>
      <div class="region-most-viewed">
        <h5 class="region-title">제주지역 많이 본 뉴스</h5>
        <div class="box-contents data">
          <a href="" class="box-content" aria-label="제주지역 많이본뉴스 기사 링크">
            <div class="thumbnail">
              <img class="img" src="" alt="" onerror="javascript:handleError(this);">
              <span></span>
            </div>
            <div class="txt-wrapper">
              <p class="title normal-weight small-font"></p>
            </div>
          </a>
        </div>
        <div class="no-data" style="display: none">
          <p class="txt">준비중입니다.</p>
        </div>
      </div>
    </li>
  </ul>
</div>

<script>
  var localContextsCodeList = ['1007', '1009', '1011', '1014', '1017', '1018', '1019', '1021', '1024'];
var localAreaCodeList = ['10', '20', '30', '40', '50', '60', '70', '80', '90'];
var localAreaList = ['부산', '창원', '대구', '광주', '전주', '대전', '청주', '춘천', '제주'];
var localHeadlineNewsList = [];
var localRankingNewsList = [];

var isLocalHeadlineDataFetched = false;
var isLocalRankingDataFetched = false;

$(function () {
    getLocalNewsListForMain();

    var localInterval = setInterval(function () {
        if (isLocalHeadlineDataFetched && isLocalRankingDataFetched) {
            $('.nationwide-news').show();
            clearInterval(localInterval);
        }
    }, 100);
});

function getLocalNewsListForMain() {
	$.ajax({
		url: '/expose/localNewsListForMain.json',
		type: 'get',
		dataType: 'json',
		success: function (data) {
            if (data && data.data) {
                localHeadlineNewsList = [data.data.localHeadlineNews_10.manualList, data.data.localHeadlineNews_20.manualList, data.data.localHeadlineNews_30.manualList, data.data.localHeadlineNews_40.manualList,
                    data.data.localHeadlineNews_50.manualList, data.data.localHeadlineNews_60.manualList, data.data.localHeadlineNews_70.manualList, data.data.localHeadlineNews_80.manualList, data.data.localHeadlineNews_90.manualList];
                localRankingNewsList = [data.data.localRankingNews_10, data.data.localRankingNews_20, data.data.localRankingNews_30, data.data.localRankingNews_40,
                    data.data.localRankingNews_50, data.data.localRankingNews_60, data.data.localRankingNews_70, data.data.localRankingNews_80, data.data.localRankingNews_90];
                setMainLocalList();
                setMainRankingList();
            }
        }
	});
}

// 지역 뉴스
function setMainLocalList() {
    for (var i = 0; i < localHeadlineNewsList.length; i++) {
        var manualList = localHeadlineNewsList[i];

        // 각 지역 탭
        var $li = $('#main-local-news li').eq(i+1);

        for (var j = 0; j < Math.min(manualList.length, 3); j++) {
            var $a = $li.find('div.box-contents:eq(0) a').first().clone();

            var imgSrc = manualList[j].imgUrl;
            if (manualList[j].imgUrl == null || manualList[j].imgUrl == '') {
                imgSrc = '/resource/image/common/noimg_633_355.png';
            }

            $a.attr('href', manualList[j].url);
            $a.find('img').attr('src', imgSrc);

            $a.find('img').attr('alt', manualList[j].title);

            if (manualList[j].vodUrl) {
                $a.find('img').next('span').addClass('play-icon');
            }
            $a.find('p.title').html(manualList[j].title);

            $li.find('div.box-contents:eq(0)').append($a);
        }

        $li.find('div.box-contents:eq(0) a').first().remove();

        // 전체 탭
        var $div = $('#main-local-news li').eq(0).find('div.box-content-wrapper').eq(i);

        if (manualList[0]) {
            $div.find('a.box-content').attr('href', manualList[0].url);

            var src = manualList[0].imgUrl;
            if (manualList[0].imgUrl == null || manualList[0].imgUrl == '') {
                src = '/resource/image/common/noimg_633_355.png';
            }
            $div.find('img').attr('src', src);

            $div.find('img').attr('alt', manualList[0].title);

            if (manualList[0].vodUrl) {
                $div.find('img').next('span').addClass('play-icon');
            }
            $div.find('p.title').html(manualList[0].title);
        } else {
            $div.css('display', 'none');
        }

        isLocalHeadlineDataFetched = true;
    }
}

// 많이본 뉴스
function setMainRankingList() {

    for (var i = 0; i < localRankingNewsList.length; i++) {
        var localRankingNews = localRankingNewsList[i];

        var $li = $('#main-local-news li').eq(i+1);
        if (localRankingNews.length > 0) {
            for (var j = 0; j <  Math.min(localRankingNews.length, 5); j++) {
                var $a = $li.find('.region-most-viewed .box-contents a').first().clone();

                var imgSrc = localRankingNews[j].imgUrl;
                if (localRankingNews[j].imgUrl == null || localRankingNews[j].imgUrl == '') {
                    imgSrc = '/resource/image/common/noimg_633_355.png';
                }

                $a.attr('href', '/news/pc/view/view.do?ncd=' + localRankingNews[j].newsCode);
                $a.find('img').attr('src', imgSrc);

                $a.find('img').attr('alt', localRankingNews[j].newsTitle);

                if (localRankingNews[j].vodYn == 'Y') {
                    $a.find('img').next('span').addClass('play-icon');
                }
                $a.find('p.title').html(localRankingNews[j].newsTitle);
                $li.find('.region-most-viewed .box-contents').append($a);
            }
            $li.find('.region-most-viewed .box-contents a').first().remove();
        } else {
            $li.find('.region-most-viewed .data').css('display', 'none');
            $li.find('.region-most-viewed .no-data').css('display', 'block');
        }
    }

    isLocalRankingDataFetched = true;
}



</script>
  </main>

  <footer id="footer">
    <div class="full-menu-wrapper">
        <div class="full-menu">
  <h2 class="blind">전체메뉴</h2>
  <div class="common-menu field-menu">
    <div class="full-menu-links-wrapper">
      <h3>분야별</h3>
      <div class="full-menu-links-group">
        <ul class="full-menu-links">
          <li><a href="/news/pc/category/category.do?ref=pSiteMap">전체</a></li>
          <li><a href="/news/pc/category/category.do?ctcd=0003&ref=pSiteMap">정치</a></li>
          <li><a href="/news/pc/category/category.do?ctcd=0004&ref=pSiteMap">경제</a></li>
          <li><a href="/news/pc/category/category.do?ctcd=0005&ref=pSiteMap">사회</a></li>
          <li><a href="/news/pc/category/category.do?ctcd=0008&ref=pSiteMap">문화</a></li>
          <li><a href="/news/pc/category/category.do?ctcd=0007&ref=pSiteMap">IT·과학</a></li>
          <li><a href="/news/pc/category/category.do?ctcd=0006&ref=pSiteMap">국제</a></li>
          <li><a href="/news/pc/category/category.do?ctcd=0095&ref=pSiteMap">재난·기후·환경</a></li>
          <li><a href="/news/pc/category/category.do?ctcd=0034&ref=pSiteMap">생활·건강</a></li>
          <li><a href="/news/pc/sports/sports.html?ref=pSiteMap">스포츠</a></li>
          <li><a href="/news/pc/enter/enter.html?ref=pSiteMap">연예</a></li>
          <li><a href="/news/pc/menu/listWeather.do?mcd=0048&ref=pSiteMap">날씨</a></li>
          <li><a href="/news/pc/issue/issue.html?ref=pSiteMap">이슈</a></li>
        </ul>
      </div>
    </div>

  </div>

  <div class="common-menu tv-menu">
    <div class="full-menu-links-wrapper">
      <h3>TV 뉴스</h3>
      <div class="full-menu-links-group">
        <h4>1TV 뉴스</h4>
        <ul class="full-menu-links col-2">
          <li><a href="/news/pc/program/program.do?bcd=0004&ref=pSiteMap">06:00 뉴스광장 1부</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0010&ref=pSiteMap">17:00 뉴스 5</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0003&ref=pSiteMap">07:00 뉴스광장 2부</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0011&ref=pSiteMap">19:00 뉴스 7</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0008&ref=pSiteMap">09:30 930뉴스</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0001&ref=pSiteMap">21:00 뉴스 9</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0009&ref=pSiteMap">12:00 뉴스 12</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0012&ref=pSiteMap">22:50 뉴스라인 W</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0137&ref=pSiteMap">14:00 뉴스 2</a></li>
        </ul>
      </div>
      <div class="full-menu-links-group col-2">
        <h4>2TV 뉴스</h4>
        <ul class="full-menu-links">
          <li><a href="/news/pc/program/program.do?bcd=0016&ref=pSiteMap">10:10 아침뉴스타임</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0049&ref=pSiteMap">15:00 뉴스타임</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0197&ref=pSiteMap">15:15 월드24</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0199&ref=pSiteMap">18:00 경제콘서트</a></li>
        </ul>
      </div>
      <div class="full-menu-links-group col-2">
        <h4>1TV 경인</h4>
        <ul class="full-menu-links">
          <li><a href="/news/pc/program/program.do?bcd=0060&ref=pSiteMap">뉴스광장(경인)</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0059&ref=pSiteMap">930뉴스(경인)</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0051&ref=pSiteMap">뉴스7(경인)</a></li>
          <li><a href="/news/pc/program/program.do?bcd=0052&ref=pSiteMap">뉴스9(경인)</a></li>
        </ul>
      </div>
      <div class="full-menu-links-group">
        <h4><a href="/news/pc/program/program.do?bcd=0042&ref=pSiteMap">뉴스특보</a></h4>
      </div>
    </div>
  </div>

  <div class="common-menu premiumk-menu">
    <div class="full-menu-links-wrapper">
      <h3>심층취재</h3>
      <ul class="full-menu-links col-2">
        <li><a href="/news/pc/menu/menu.do?mcd=1127&ref=pSiteMap">심층K</a></li>
        <li><a href="/news/pc/menu/menu.do?mcd=0713&ref=pSiteMap">단독</a></li>
        <li><a href="/news/pc/menu/tamsaKList.do?mcd=1016&ref=pSiteMap">탐사K</a></li>
        <li><a href="/news/pc/menu/menu.do?mcd=1075&ref=pSiteMap">제대로 보겠습니다</a></li>
        <li><a href="/news/pc/menu/menu.do?mcd=0990&ref=pSiteMap">영상K</a></li>
        <li><a href="/news/pc/menu/menu.do?mcd=0938&ref=pSiteMap">크랩</a></li>
        <li><a href="/news/pc/menu/menu.do?mcd=1048&ref=pSiteMap">글로벌K</a></li>
        <li><a href="/news/pc/menu/menu.do?mcd=1032&ref=pSiteMap">팩트체크K</a></li>
        <li><a href="/news/pc/menu/menu.do?mcd=1039&ref=pSiteMap">스포츠K</a></li>
      </ul>
      <ul class="full-menu-links col-2">
        <li><a href="/news/pc/menu/menu.do?mcd=0795&ref=pSiteMap">취재후</a></li>
        <li><a href="/news/pc/program/program.do?bcd=0023&ref=pSiteMap">News Today</a></li>
        <li class="w100"><a href="/news/pc/menu/menu.do?mcd=1126&ref=pSiteMap">주말엔</a></li>
        <li class="w100"><a href="/news/pc/menu/menu.do?mcd=1162&ref=pSiteMap">뒷北뉴스</a></li>
        <li class="w100"><a href="/special/climatesays/2023/main.html?&ref=pSiteMap">기후는 말한다</a></li>
        <li class="w100"><a href="/news/pc/menu/menu.do?mcd=1044&ref=pSiteMap">여심야심</a></li>
      </ul>
    </div>
  </div>

  <div class="common-menu current-affairs-menu">
    <div class="full-menu-links-wrapper">
      <h3>시사프로그램</h3>
      <div class="full-menu-links-group">
        <h4>시사프로그램</h4>
        <ul class="full-menu-links">
          <li><a href="/news/pc/sisa/sisaChang.do?ref=pSiteMap">시사기획 창</a></li>
          <li><a href="/news/pc/sisa/sisa.do?bcd=0029&ref=pSiteMap">일요진단 라이브</a></li>
          <li><a href="/news/pc/sisa/sisa.do?bcd=0198&ref=pSiteMap">더 보다</a></li>
          <li><a href="/news/pc/sisa/sisa.do?bcd=0031&ref=pSiteMap">남북의 창</a></li>
          <li><a href="/news/pc/sisa/sisa.do?bcd=0072&ref=pSiteMap">특파원 보고 세계는 지금</a></li>
          <li><a href="/news/pc/sisa/sisa.do?bcd=0071&ref=pSiteMap">재난방송센터</a></li>
          <li><a href="/news/pc/sisa/sisa.do?bcd=0073&ref=pSiteMap">사사건건</a></li>
          <li><a href="/news/pc/sisa/sisa.do?bcd=0061&ref=pSiteMap">인사이드 경인</a></li>
        </ul>
      </div>
      <div class="full-menu-links-group">
        <h4>라디오</h4>
        <ul class="full-menu-links">
          <li><a href="/news/pc/radio/radio.do?mcd=1139&ref=pSiteMap">전격시사</a></li>
          <li><a href="/news/pc/radio/radio.do?mcd=1125&ref=pSiteMap">성공예감</a></li>
          <li><a href="/news/pc/radio/radio.do?mcd=1138&ref=pSiteMap">뉴스레터K</a></li>
        </ul>
      </div>
    </div>
  </div>

  <div class="common-menu region-menu">
    <div class="full-menu-links-wrapper">
      <h3>지역뉴스</h3>
      <div class="full-menu-links-group">
        <ul class="full-menu-links col-2">
          <li><a href="/news/pc/local/local.do?lscd=10&ref=pSiteMap">부산</a></li>
          <li><a href="/news/pc/local/local.do?lscd=43&ref=pSiteMap">순천</a></li>
          <li><a href="/news/pc/local/local.do?lscd=11&ref=pSiteMap">울산</a></li>
          <li><a href="/news/pc/local/local.do?lscd=50&ref=pSiteMap">전주</a></li>
          <li><a href="/news/pc/local/local.do?lscd=20&ref=pSiteMap">창원</a></li>
          <li><a href="/news/pc/local/local.do?lscd=60&ref=pSiteMap">대전</a></li>
          <li><a href="/news/pc/local/local.do?lscd=21&ref=pSiteMap">진주</a></li>
          <li><a href="/news/pc/local/local.do?lscd=70&ref=pSiteMap">청주</a></li>
          <li><a href="/news/pc/local/local.do?lscd=30&ref=pSiteMap">대구</a></li>
          <li><a href="/news/pc/local/local.do?lscd=71&ref=pSiteMap">충주</a></li>
          <li><a href="/news/pc/local/local.do?lscd=31&ref=pSiteMap">안동</a></li>
          <li><a href="/news/pc/local/local.do?lscd=80&ref=pSiteMap">춘천</a></li>
          <li><a href="/news/pc/local/local.do?lscd=32&ref=pSiteMap">포항</a></li>
          <li><a href="/news/pc/local/local.do?lscd=81&ref=pSiteMap">강릉</a></li>
          <li><a href="/news/pc/local/local.do?lscd=40&ref=pSiteMap">광주</a></li>
          <li><a href="/news/pc/local/local.do?lscd=82&ref=pSiteMap">원주</a></li>
          <li><a href="/news/pc/local/local.do?lscd=41&ref=pSiteMap">목포</a></li>
          <li><a href="/news/pc/local/local.do?lscd=90&ref=pSiteMap">제주</a></li>
        </ul>
      </div>
    </div>
  </div>

  <div class="common-menu shortcut-menu">
    <div class="full-menu-links-wrapper">
      <h3>바로가기</h3>
      <div class="full-menu-links-group">
        <ul class="full-menu-links">
          <li><a href="//mypage.kbs.co.kr">좋아요 클립</a></li>
          <li><a href="/news/pc/report/report.html?ref=pSiteMap">제보</a></li>
          <li><a href="/news/pc/breaking/breaking.html?ref=pSiteMap">속보</a></li>
          <li><a href="https://d.kbs.co.kr/" target="_blank">재난포털</a></li>
          <li><a href="/news/pc/news24/news24.html?ref=pSiteMap">ON AIR</a></li>
          <li><a href="/news/pc/newsArchive/newsArchive.html?ref=pSiteMap">뉴스 아카이브</a></li>
        </ul>
      </div>
      <div class="full-menu-links-group">
        <h3><a href="/news/pc/notice/notice.html?ref=pSiteMap">공지·정정</a></h3>
      </div>
    </div>
  </div>
</div>
    </div>

    <div class="footer-notice-wrapper" style="display: none;">
    <div class="footer-notice">
        <p class="notice-title">공지사항</p>
        <a class="notice-txt" href="/news/pc/popup/notice.html" target="_blank" aria-label="공지사항 링크">테스트</a>
    </div>
</div>

<script>
    $(function () {
    // $.get('https://pbbsapi.kbs.co.kr/board/v1/list?bbs_id=R2017-0164-03-513128&page=1&page_size=1', function (data) {
    //     // "공지·정정"만 해당js 파일에서 렌더링하고 공지사항을 header에서 api 호출하여 랜더링함
    //     if (data.data[0] && data.data[0].title) {
    //         $('.footer-inform-wrapper').css('display', 'block');
    //         $('.footer-inform-wrapper a').text(data.data[0].title);
    //     }
    // });
});

</script>

    <div class="footer-util-menu-wrapper">
        <div class="footer-util-menu">
            <div class="about-kbs-menu">
                <div class="footer-common-select">
                    <button type="button" class="footer-select-btn" aria-label="KBS 소개 메뉴 펼침 버튼">
                        <span class="btn-txt">KBS 소개</span>
                        <span class="arrow"></span>
                    </button>
                    <ul class="common-select-links">
                        <li class="common-select-list">
                            <a href="https://about.kbs.co.kr/index.html?sname=kbs&amp;stype=location" target="_blank" class="common-select-link" aria-label="주소/연락처 링크">주소/연락처</a>
                        </li>
                        <li class="common-select-list">
                            <a href="http://office.kbs.co.kr/susin/" target="_blank" class="common-select-link" aria-label="수신료 링크">수신료</a>
                        </li>
                        <li class="common-select-list">
                            <a href="https://about.kbs.co.kr/index.html?sname=recruit&amp;stype=recruit" target="_blank" class="common-select-link" aria-label="채용 링크">채용</a>
                        </li>
                        <li class="common-select-list">
                            <a href="https://about.kbs.co.kr" target="_blank" class="common-select-link" aria-label="About KBS 링크">About KBS</a>
                        </li>
                    </ul>
                </div>

                <ul class="kbs-related-links">
                    <li class="kbs-related-list">
                        <a href="https://petitions.kbs.co.kr/" target="_blank" class="kbs-related-link" aria-label="시청자권익센터 링크">시청자권익센터</a>
                    </li>
                    <li class="kbs-related-list">
                        <a href="https://audit.kbs.co.kr/CyberAudit/" target="_blank" class="kbs-related-link" aria-label="사이버 감사실 링크">사이버 감사실</a>
                    </li>
                    <li class="kbs-related-list">
                        <a href="https://pwwwapi.kbs.co.kr/api/v1/introduction/advertisement" target="_blank" class="kbs-related-link" aria-label="광고 링크">광고</a>
                    </li>
                    <li class="kbs-related-list">
                        <a href="https://sso.kbs.co.kr/SSO/KBSWeb/information/PermissionKR20100223.aspx" target="_blank" class="kbs-related-link" aria-label="이용약관 링크">이용약관</a>
                    </li>
                    <li class="kbs-related-list">
                        <a href="https://sso.kbs.co.kr/SSO/KBSWeb/information/monitionKR.aspx" target="_blank" class="kbs-related-link" aria-label="법적고지 링크">법적고지</a>
                    </li>
                    <li class="kbs-related-list">
                        <a href="https://sso.kbs.co.kr/SSO/KBSWeb/information/PersonalPoliciesKR.aspx" target="_blank" class="kbs-related-link" aria-label="개인정보처리방침 링크">개인정보처리방침</a>
                    </li>
                    <li class="kbs-related-list">
                        <a href="https://about.kbs.co.kr/index.html?sname=kbs&stype=rule#none" target="_blank" class="kbs-related-link" aria-label="윤리강령 링크">윤리강령</a>
                    </li>
                </ul>
            </div>

            <div class="nchannel-world-menu">
                <div class="footer-common-select">
                    <button type="button" class="footer-select-btn" aria-label="KBS N 채널 사이트 메뉴 펼침 버튼">
                        <span class="btn-txt">KBS N 채널</span>
                        <span class="arrow"></span>
                    </button>
                    <ul class="common-select-links">
                        <li class="common-select-list">
                            <a href="https://drama.kbs.co.kr/" target="_blank" class="nchannel-link common-select-link" aria-label="KBS Drama 링크">KBS Drama</a>
                        </li>
                        <li class="common-select-list">
                            <a href="http://www.kbsn.co.kr/index" target="_blank" class="common-select-link" aria-label="KBS W 링크">KBS W</a>
                        </li>
                        <li class="common-select-list">
                            <a href="http://www.kbsn.co.kr/index" target="_blank" class="common-select-link" aria-label="KBS Kids 링크">KBS Kids</a>
                        </li>
                        <li class="common-select-list">
                            <a href="http://www.kbsn.co.kr/nplay/index" target="_blank" class="common-select-link" aria-label="KBS N Sports 링크">KBS N Sports</a>
                        </li>
                        <li class="common-select-list">
                            <a href="http://www.kbsn.co.kr/index" target="_blank" class="common-select-link" aria-label="KBS Joy 링크">KBS Joy</a>
                        </li>
                    </ul>
                </div>

                <div class="footer-common-select">
                    <button type="button" class="footer-select-btn left-border-delete" aria-label="KBS WORLD 사이트 메뉴 펼침 버튼">
                        <span class="btn-txt">KBS WORLD</span>
                        <span class="arrow"></span>
                    </button>
                    <ul class="common-select-links">
                        <li class="common-select-list">
                            <a href="https://english.kbs.co.kr/" target="_blank" class="common-select-link" aria-label="Global 링크">Global</a>
                        </li>
                        <li class="common-select-list">
                            <a href="https://world.kbs.co.kr" target="_blank" class="common-select-link" aria-label="KBS WORLD 링크">KBS WORLD</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <div class="footer-address-copyright-wrapper">
        <div class="footer-address-copyright">
            <address class="footer-address">
                KBS / 07235 서울특별시 영등포구 여의공원로 13(여의도동) / 대표전화 02-781-1000 / 기사배열 책임자, 청소년보호책임자 : 정철웅
                <br/>
                KBS뉴스 인터넷 서비스 / 서울특별시 마포구 매봉산로 45 KBS미디어센터 / 시청자상담실 02-781-1000 / 등록번호 서울 자00297 (2010년 6월 23일)
            </address>
            <p class="footer-copyright">Copyright ⓒ KBS. All rights reserved. 무단 전재, 재배포 및 이용(AI 학습 포함) 금지</p>
        </div>
    </div>

    <button type="button" class="top-btn" aria-label="맨위로 이동 버튼"></button>
    <button type="button" class="aside-toggle-button" aria-label="aside 토글 버튼"></button>

    <aside class="aside" style="display: none">
    <ul class="aside-btns">
        
        <li class="aside-btns-list aside-like">
            <button type="button" class="like-btn common-btn"  aria-label="좋아요 펼침 버튼">
                <span class="like-icon"></span>
                <span class="common-btn-txt">0</span>
                <span class="arrow-icon"></span>
            </button>
            <ul class="like-menu open-menu">
                <li class="like-menu-list open-menu-list">
                    <button class="like-menu-btn open-menu-btn" type="button" onclick="javascript:addRecommend('', '1')" aria-label="좋아요 버튼">
                        <span class="like-icon"></span>
                        <span class="title">좋아요</span>
                    </button>
                </li>
                <li class="like-menu-list open-menu-list">
                    <button class="like-menu-btn open-menu-btn" type="button" onclick="javascript:addRecommend('', '2')" aria-label="응원해요 버튼">
                        <span class="cheer-icon"></span>
                        <span class="title">응원해요</span>
                    </button>
                </li>
                <li class="like-menu-list open-menu-list">
                    <button class="like-menu-btn open-menu-btn" type="button" onclick="javascript:addRecommend('', '3')" aria-label="후속 원해요 버튼">
                        <span class="want-icon"></span>
                        <span class="title">후속 원해요</span>
                    </button>
                </li>
            </ul>
        </li>
        <li class="share-btn-wrapper aside-btns-list aside-share">
            <button type="button" class="share-btn common-btn"  aria-label="공유 버튼">
                <span class="share-icon"></span>
                <span class="common-btn-txt">공유</span>
            </button>
        </li>
        <li class="aside-btns-list aside-copy">
            <button type="button" class="copy-btn common-btn" onclick="printSection();" aria-label="인쇄 버튼">
                <span class="copy-icon"></span>
                <span class="common-btn-txt">인쇄</span>
            </button>
        </li>
        <li class="txt-btn-wrapper aside-btns-list aside-txt">
            <button type="button" class="txt-btn common-btn"  aria-label="글꼴 버튼">
                <div class="txt-icon-wrapper">
                    <span class="txt-icon normal"></span>
                </div>
                <span class="common-btn-txt">기본</span>
                <span class="arrow-icon"></span>
            </button>
            <ul class="txt-menu open-menu">
                <li class="txt-menu-list open-menu-list">
                    <button class="txt-menu-btn large open-menu-btn" type="button"  aria-label="글꼴 확대 버튼">
                        <div class="txt-icon-wrapper">
                            <span class="txt-icon large"></span>
                        </div>
                        <span class="title">확대</span>
                    </button>
                </li>
                <li class="txt-menu-list open-menu-list">
                    <button class="txt-menu-btn normal open-menu-btn" type="button" aria-label="글꼴 기본 버튼">
                        <div class="txt-icon-wrapper">
                            <span class="txt-icon normal"></span>
                        </div>
                        <span class="title">기본</span>
                    </button>
                </li>
                <li class="txt-menu-list open-menu-list">
                    <button class="txt-menu-btn small open-menu-btn" type="button" aria-label="글꼴 축소 버튼">
                        <div class="txt-icon-wrapper">
                            <span class="txt-icon small"></span>
                        </div>
                        <span class="title">축소</span>
                    </button>
                </li>
            </ul>
        </li>
        <li class="dark-btn-wrapper aside-btns-list aside-dark">
            <button type="button" class="dark-btn common-btn"  aria-label="다크모드 버튼">
                <span class="dark-icon"></span>
                <span class="common-btn-txt">다크<br />모드</span>
            </button>
        </li>
    </ul>
</aside>

<script type="text/javascript">
    var textSize = 'normal';
var darkMode = 'false';
var isDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

$(function () {

    commonUi.setOriginalFontSize();

    if (navigator.cookieEnabled) {
        if (typeof localStorage !== "undefined" && localStorage.getItem("text-size") !== null) {
            textSize = localStorage.getItem("text-size");
        }
        if (typeof localStorage !== "undefined" && localStorage.getItem("dark-mode") !== null) {
            darkMode = localStorage.getItem("dark-mode");
        }
    }

    if (textSize == 'large'){
        commonUi.updateChangeFontsize('large');

    } else if (textSize == 'small'){
        commonUi.updateChangeFontsize('small');

    } else {
        commonUi.updateChangeFontsize('normal');
    }

    var _$btnTxt = document.querySelector(".dark-btn .common-btn-txt");

    if (_$btnTxt) {
        if (darkMode == 'true') {
            _$btnTxt.innerHTML = "\uB77C\uC774\uD2B8<br />\uBAA8\uB4DC";
        } else if (darkMode == 'false') {
            _$btnTxt.innerHTML = "\uB2E4\uD06C<br />\uBAA8\uB4DC";
        } else {
            if (isDarkMode) {
                _$btnTxt.innerHTML = "\uB77C\uC774\uD2B8<br />\uBAA8\uB4DC";
            } else {
                _$btnTxt.innerHTML = "\uB2E4\uD06C<br />\uBAA8\uB4DC";
            }
        }
    }
})

window.addEventListener('load', function() {
    window.scrollBy(0, -1);
});

</script>

    <div class="share-menu">
    <div class="title-wrapper">
        <p class="title">공유하기</p>
        <button type="button" class="close-btn"></button>
    </div>
    <div class="share-links-copy">
        <ul class="share-links">
            <li class="share-links-list">
                <button type="button" class="share-link share-facebook">
                    <span class="share-icon facebook-icon"></span>
                    <span class="txt">페이스북</span>
                </button>
            </li>
            <li class="share-links-list">
                <button type="button" class="share-link share-twitter">
                    <span class="share-icon twitter-icon"></span>
                    <span class="txt">트위터</span>
                </button>
            </li>
            <li class="share-links-list">
                <button type="button" class="share-link share-kakao">
                    <span class="share-icon kakao-icon"></span>
                    <span class="txt">카카오톡</span>
                </button>
            </li>
            <li class="share-links-list">
                <button type="button" class="share-link share-naver">
                    <span class="share-icon blog-icon"></span>
                    <span class="txt">네이버블로그</span>
                </button>
            </li>
            <li class="share-links-list">
                <button type="button" class="share-link share-naver-band">
                    <span class="share-icon band-icon"></span>
                    <span class="txt">네이버밴드</span>
                </button>
            </li>
        </ul>
        <div class="copy-input">
            <input readonly type="text" class="input" value=""/>
            <button type="button" class="copy-btn">링크복사</button>
        </div>
    </div>
</div>

<script type="text/javascript">
    var currentUrl = window.location.href;
var encodedCurrentUrl = encodeURIComponent(currentUrl);

$(function () {
	Kakao.init('d57b7eca9db04c5ccd91e4d309ce0288');
	$('.share-links-copy .copy-input input').val(currentUrl);

	$('.share-links-copy .share-facebook').off('click').on('click', function() {
		var shareUrl = 'https://www.facebook.com/sharer/sharer.php?u=' + encodedCurrentUrl;
		openPopup(shareUrl);
	});
	$('.share-links-copy .share-twitter').off('click').on('click', function() {
		var shareUrl = "https://twitter.com/intent/tweet?url=" + encodedCurrentUrl;
		openPopup(shareUrl);
	});
	$('.share-links-copy .share-kakao').off('click').on('click', function() {
		var shareDesc = document.getElementById('facebook_desc').getAttribute('content');
		var shareImg = document.getElementById('facebook_img').getAttribute('content');
		var mShareUrl = currentUrl;

		Kakao.Link.sendDefault({
			objectType:"feed"
			, content : {
				title: "KBS News"   // 콘텐츠의 타이틀
				, description: shareDesc   // 콘텐츠 상세설명
				, imageUrl: shareImg  // 썸네일 이미지
				, link : {
					webUrl:currentUrl,   // 모바일 카카오톡에서 사용하는 웹 링크 URL
				}
			}
			, buttons: [
				{
					title: '웹으로 이동',
					link: {
						mobileWebUrl: mShareUrl,
						webUrl: currentUrl
					},
				},
			],
		}); //sendDefualt
	});
	$('.share-links-copy .share-naver').off('click').on('click', function() {
		var shareUrl = 'http://blog.naver.com/openapi/share?url=' + encodedCurrentUrl + '&title=';
		openPopup(shareUrl);
	});
	$('.share-links-copy .share-naver-band').off('click').on('click', function() {
		var shareUrl = "https://band.us/plugin/share?body=" + encodedCurrentUrl + "&route=" + encodedCurrentUrl;
		openPopup(shareUrl);
	});
	$('.share-links-copy .copy-input button').off('click').on('click', function() {
		copyToClipboard(currentUrl);
	});
})

function openPopup(url) {
	var windowFeatures = 'width=600,height=400,menubar=no,location=no,resizable=yes,scrollbars=no,status=no';
	window.open(url, '_blank', windowFeatures);
}

function copyToClipboard(text) {
	var textarea = document.createElement("textarea");
	textarea.textContent = text;
	textarea.style.position = "fixed";  // Prevent scrolling to bottom of page in MS Edge.
	document.body.appendChild(textarea);
	textarea.select();
	try {
		document.execCommand("copy")
		alert('링크가 복사되었습니다.');
		return true;  // Security exception may be thrown by some browsers.
	} catch (ex) {
		console.warn("Copy to clipboard failed.", ex);
		return false;
	} finally {
		document.body.removeChild(textarea);
	}
}

</script>

</footer>

  <div class="dim"></div>

  <!-- 메인페이지 정보 추가 : SEO -->
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@id": "https://news.kbs.co.kr",
    "@type": "WebSite",
    "url": "https://news.kbs.co.kr",
    "name": "KBS 뉴스",
    "potentialAction": {
      "@type": "SearchAction",
      "target": {
        "@type": "EntryPoint",
        "urlTemplate": "https://reco.kbs.co.kr/v2/search?target=newstotal&keyword={keyword}&page=1&page_size=10&sort_option=score&searchfield=all"
      },
      "query-input": "required name=keyword"
    },
    "sameAs": [
      "http://news.kbs.co.kr",
      "https://mn.kbs.co.kr",

      "https://www.youtube.com/user/NewsKBS",
      "https://www.facebook.com/kbsnews",
      "https://www.twitter.com/KBSnews",
      "https://www.instagram.com/kbsnews",

      "https://tv.naver.com/kbsnews",
      "https://newsstand.naver.com/?list=&pcode=056",
      "https://media.naver.com/press/056",
      "https://v.daum.net/channel/327/home",
      "https://pf.kakao.com/_Judxfu",

      "https://news.google.com/publications/CAAiEEt8v3JhrtW77h8qyLmhZ_EqFAgKIhBLfL9yYa7Vu-4fKsi5oWfx?ceid=KR:ko&oc=3",
      "https://play.google.com/store/apps/details?id=kr.co.kbs.news301&hl=en-KR",
      "https://apps.apple.com/kr/app/id376746898"
    ]
  }
</script>
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@id": "https://news.kbs.co.kr/common/main.html",
    "@type": "WebPage",
    "url": "https://news.kbs.co.kr/common/main.html",
    "name": "메인 | KBS 뉴스"
  }
</script>
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "ItemList",
    "itemListElement": [
      {
        "@type": "SiteNavigationElement",
        "position": 1,
        "name": "뉴스9",
        "description": "KBS 9시 뉴스",
        "url": "https://news.kbs.co.kr/vod/program.do?bcd=0001"
      },
      {
        "@type": "SiteNavigationElement",
        "position": 2,
        "name": "최신 뉴스",
        "description": "KBS의 따끈따끈한 최근 뉴스 서비스",
        "url": "https://news.kbs.co.kr/news/list.html"
      },
      {
        "@type": "SiteNavigationElement",
        "position": 3,
        "name": "라이브",
        "description": "인터넷 전용 뉴스와 전용 프로그램을 통해 빠르고 다양한 소식으로 365일, 24시간 시청자 여러분을 찾아갑니다.",
        "url": "https://news.kbs.co.kr/news/news24.do"
      },
      {
        "@type": "SiteNavigationElement",
        "position": 4,
        "name": "제보",
        "description": "KBS에서는 여러분의 소중한 제보를 받고 있습니다.",
        "url": "https://news.kbs.co.kr/news/pc/report/report.html"
      }
    ]
  }
</script>


</body>
</html>
